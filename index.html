<!DOCTYPE html>
<html lang="en" dir="ltr" class="">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roumaissa's OS</title>
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="favicon.png">
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Cairo+Mono:wght@400;700&family=Droid+Arabic+Naskh:wght@400;700&display=swap"
        rel="stylesheet">

    <style>
        /* Custom CSS to match the retro design */
        /* Load local Flamante Cairo fonts */
        @font-face {
            font-family: 'Flamante Cairo';
            src: url('./flamante_cairo/Flamante-Cairo.ttf') format('truetype');
            font-weight: 400;
            font-style: normal;
            font-display: swap;
        }

        @font-face {
            font-family: 'Flamante Cairo';
            src: url('./flamante_cairo/Flamante-Cairo-Bold.ttf') format('truetype');
            font-weight: 700;
            font-style: normal;
            font-display: swap;
        }

        :root {
            --bg-color: #FFEFD5;
            --text-dark: #231F20;
            --border-dark: #231F20;
            --window-blue: #00A2E8;
            --dialog-orange: #F99D1C;
            --level-locked: #FFFFFF;
            --level-unlocked: #F99D1C;
            --level-locked-text: #A0A0A0;
            --level-unlocked-text: #231F20;
            --progress-bar-bg: #FFFFFF;
            --progress-bar-fill: #00A2E8;
        }

        .dark:root {
            --bg-color: #050A14;
            --text-dark: #FFEFD5;
            --border-dark: #FFEFD5;
            --window-blue: #00A2E8;
            --dialog-orange: #F99D1C;
            --level-locked: #0D1520;
            --level-unlocked: #F99D1C;
            --level-locked-text: #B0B0B0;
            --level-unlocked-text: #231F20;
            --progress-bar-bg: #0D1520;
            --progress-bar-fill: #00A2E8;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-dark);
            font-family: 'Cairo', 'Cairo Mono', sans-serif;
            font-size: 20px;
            line-height: 1.6;
        }

        .font-title {
            font-family: 'Cairo', 'Cairo Mono', sans-serif;
            font-weight: 700;
            /* Use bold for titles */
        }

        .font-arabic {
            font-family: 'Cairo', 'Flamante Cairo', sans-serif !important;
            font-weight: 700;
        }

        /* Arabic text throughout uses Cairo family */
        [lang="ar"],
        [dir="rtl"] {
            font-family: 'Cairo', 'Flamante Cairo', sans-serif !important;
        }

        /* Base window styling */
        .window-frame {
            border: 4px solid var(--border-dark);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 8px 8px 0px var(--border-dark);
            transition: all 0.3s ease;
        }


        .title-bar {
            background-color: var(--window-blue);
            border-bottom: 4px solid var(--border-dark);
            /* responsive padding */
            padding: clamp(6px, 1.4vw, 12px) clamp(10px, 3vw, 20px);
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 8px;
        }

        .title-bar-text {
            color: var(--text-dark);
            /* responsive font size: min 14px, preferred based on viewport, max 20px */
            font-size: clamp(14px, 1.6vw + 10px, 20px);
            letter-spacing: 1.2px;
            text-shadow: 1px 1px rgba(0, 0, 0, 0.12);
            display: block;
            flex: 1 1 auto;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            padding: 0 8px;
            /* breathing room so controls don't touch text */
        }

        /* Ensure control blocks don't shrink and keep space for title centering */
        .title-bar>.flex:first-child,
        .title-bar .window-controls {
            flex: 0 0 auto;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* Small-screen tweak: slightly reduce letter spacing so title fits */
        @media (max-width: 480px) {
            .title-bar-text {
                letter-spacing: 0.6px;
                font-size: clamp(13px, 3.6vw, 18px);
            }
        }

        /* Dark-mode title bar refinements */
        .dark .title-bar {
            background: var(--window-blue);
            border-bottom-color: var(--border-dark);
            box-shadow: inset 0 -4px 0 rgba(0, 0, 0, 0.15);
        }

        .dark .title-bar-text {
            text-shadow: 1px 1px rgba(0, 0, 0, 0.3);
            color: var(--text-dark);
        }

        .window-controls button,
        .title-bar-btn {
            width: 32px;
            height: 32px;
            border: 3px solid var(--border-dark);
            background-color: var(--bg-color);
            /* Uses theme variable */
            color: var(--text-dark);
            /* ADDED: This makes the SVG icon change color */
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Cairo Mono', monospace;
            font-size: 14px;
            box-shadow: 3px 3px 0px var(--border-dark);
            margin-left: 6px;
            cursor: pointer;
            transition: all 0.1s ease;
        }

        .window-controls button:active,
        .title-bar-btn:active {
            transform: translate(3px, 3px);
            box-shadow: none;
        }

        /* Dropdown select styling */
        #lang-toggle-btn {
            width: auto;
            min-width: 60px;
            padding: 0 8px;
            padding-right: 24px;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath fill='%23000' d='M1 1l5 5 5-5'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 6px center;
            background-color: var(--bg-color);
            color: var(--text-dark);
            border: 3px solid var(--border-dark);
            border-radius: 0;
            box-shadow: 3px 3px 0px var(--border-dark);
            cursor: pointer;
            font-family: 'Cairo Mono', monospace;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.1s ease;
        }

        #lang-toggle-btn:hover {
            background-color: var(--bg-hover, var(--bg-color));
        }

        #lang-toggle-btn:active {
            transform: translate(3px, 3px);
            box-shadow: none;
        }

        /* Dropdown option styling */
        #lang-toggle-btn option {
            background-color: var(--bg-color);
            color: var(--text-dark);
            padding: 4px 8px;
            font-family: 'Cairo Mono', monospace;
        }

        .dark #lang-toggle-btn {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath fill='%23e8d7c8' d='M1 1l5 5 5-5'/%3E%3C/svg%3E");
        }

        .dark #lang-toggle-btn option {
            background-color: var(--bg-color);
            color: var(--text-dark);
        }

        /* Reset System Button */
        .reset-btn {
            width: auto;
            min-width: auto;
            padding: 4px 12px;
            background-color: #FFA500;
            color: #000000;
            font-weight: 600;
            font-size: 13px;
        }

        .reset-btn:hover {
            background-color: #FF8C00;
            color: #000000;
        }

        .dark .reset-btn {
            background-color: #FFA500;
            color: #000000;
        }

        .dark .reset-btn:hover {
            background-color: #FF8C00;
            color: #000000;
        }

        .window-content {
            background-color: var(--bg-color);
            padding: 24px;
        }

        /* Dialog box inside the window */
        .dialog-box {
            border: 4px solid var(--border-dark);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 6px 6px 0px var(--border-dark);
            width: 100%;
            max-width: 500px;
        }

        .dialog-title-bar {
            background-color: var(--dialog-orange);
            border-bottom: 4px solid var(--border-dark);
            padding: 8px 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dialog-controls button {
            width: 24px;
            height: 24px;
            border: 2px solid var(--border-dark);
            background-color: var(--bg-color);
            /* CHANGED: Was 'white' */
            color: var(--text-dark);
            /* This will color the SVG */
            /* REMOVED font-family and font-size, added flex properties */
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 2px 2px 0px var(--border-dark);
            margin-left: 4px;
            cursor: pointer;
        }

        .dialog-content {
            background-color: var(--bg-color);
            padding: 20px;
        }

        .coming-soon-dialog {
            background-color: var(--bg-color);
            border: 3px solid var(--border-dark);
            border-radius: 8px;
            box-shadow: 8px 8px 0px var(--border-dark);
            max-width: 500px;
            width: 90%;
        }

        .coming-soon-dialog .dialog-title-bar {
            background-color: #0066CC;
            color: #FFFFFF;
            padding: 10px 15px;
            border-radius: 5px 5px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 3px solid var(--border-dark);
        }

        .coming-soon-dialog .dialog-content {
            padding: 25px;
        }

        /* Retro button styling */
        .btn-retro {
            display: inline-block;
            padding: 12px 24px;
            border: 3px solid var(--border-dark);
            background-color: #F99D1C;
            color: var(--text-dark);
            font-family: 'Cairo', sans-serif;
            font-weight: 700;
            /* Use bold for buttons */
            font-size: 14px;
            text-align: center;
            box-shadow: 5px 5px 0px var(--border-dark);
            transition:
                all 0.1s ease;
            cursor: pointer;
        }

        .btn-retro:hover {
            background-color: #e08e1a;
        }

        .btn-retro:active {
            transform: translate(5px, 5px);
            box-shadow: none;
        }

        #classic-view-btn {
            background-color: white;
            color: #231F20;
        }

        #classic-view-btn:hover {
            background-color: #f0f0f0;
        }

        .dark #classic-view-btn {
            background-color: #333333;
            color: #FFEFD5;
        }

        .dark #classic-view-btn:hover {
            background-color: #444444;
        }

        .dark #start-mission-btn {
            color: #000000;
        }

        /* Level card styling */
        .level-card {
            border: 4px solid var(--border-dark);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 6px 6px 0px var(--border-dark);
            transition: all 0.2s ease;
        }

        .level-card.locked {
            background-color: var(--level-locked);
            border-color: var(--border-dark);
            color: var(--level-locked-text);
            cursor: pointer;
        }

        .level-card.unlocked {
            background-color: var(--level-locked);
            /* White background for both */
            border-color: var(--level-unlocked);
            color: var(--text-dark);
            cursor: pointer;
        }

        .level-card.unlocked:hover {
            transform: scale(1.02);
            box-shadow: 8px 8px 0px var(--border-dark);
        }

        #level-2-card.unlocked:hover {
            transform: scale(1.02);
            box-shadow: 8px 8px 0px var(--border-dark);
        }

        .level-card[data-unlocked="true"]:hover {
            transform: scale(1.02);
            box-shadow: 8px 8px 0px var(--border-dark);
        }

        .level-status {
            font-size: 16px;
        }

        .level-status.unlocked {
            color: #00A2E8;
            /* Using blue for 'unlocked' status text */
        }

        .level-status.locked {
            color: var(--level-locked-text);
        }

        /* Progress Bar */
        .progress-bar {
            display: flex;
            gap: 10px;
        }

        .progress-bar-segment {
            width: 60px;
            height: 30px;
            background-color: var(--progress-bar-bg);
            border: 3px solid var(--border-dark);
            border-radius: 4px;
        }

        .progress-bar-segment.filled {
            background-color: var(--progress-bar-fill);
        }

        /* Read-Only Mode (Disabled Progress Bar) */
        .progress-bar.read-only .progress-bar-segment {
            background-color: #CCCCCC;
            border-color: #999999;
            opacity: 0.6;
        }

        .dark .progress-bar.read-only .progress-bar-segment {
            background-color: #4A2A2A;
            border-color: #8B3A3A;
        }

        .progress-bar.read-only .progress-bar-segment.filled {
            background-color: #FF6B6B;
            border-color: #CC0000;
        }

        .dark .progress-bar.read-only .progress-bar-segment.filled {
            background-color: #8B3A3A;
            border-color: #CC0000;
        }

        /* Re-Initialize Button */
        .btn-reinitialize {
            font-family: 'Cairo Mono', monospace;
            font-size: 14px;
            padding: 8px 16px;
            border: 2px solid var(--border-dark);
            background-color: var(--bg-color);
            color: var(--text-dark);
            cursor: pointer;
            box-shadow: 2px 2px 0px var(--border-dark);
            transition: all 0.1s ease;
            display: inline-flex;
            align-items: center;
            gap: 6px;
        }

        .btn-reinitialize:hover {
            background-color: #D0D0D0;
            transform: translate(1px, 1px);
            box-shadow: 1px 1px 0px var(--border-dark);
        }

        .dark .btn-reinitialize:hover {
            background-color: #3A3A3A;
        }

        .btn-reinitialize:active {
            transform: translate(2px, 2px);
            box-shadow: none;
        }

        /* Complete Level Button */
        .btn-complete-level {
            font-family: 'Cairo Mono', monospace;
            font-size: 13px;
            padding: 8px 16px;
            border: 2px solid var(--border-dark);
            background-color: #00A2E8;
            color: white;
            cursor: pointer;
            box-shadow: 2px 2px 0px var(--border-dark);
            transition: all 0.1s ease;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            white-space: nowrap;
            animation: pulse-glow 2s ease-in-out infinite;
        }

        .btn-complete-level:hover {
            background-color: #0088CC;
            transform: translate(1px, 1px);
            box-shadow: 1px 1px 0px var(--border-dark);
            animation: none;
        }

        .dark .btn-complete-level {
            background-color: #00A2E8;
        }

        .dark .btn-complete-level:hover {
            background-color: #0088CC;
        }

        .btn-complete-level:active {
            transform: translate(2px, 2px);
            box-shadow: none;
        }

        @keyframes pulse-glow {

            0%,
            100% {
                box-shadow: 2px 2px 0px var(--border-dark), 0 0 0px rgba(0, 162, 232, 0);
            }

            50% {
                box-shadow: 2px 2px 0px var(--border-dark), 0 0 10px rgba(0, 162, 232, 0.6);
            }
        }

        /* Success Popup */
        .success-popup {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--bg-color);
            border: 3px solid var(--border-dark);
            box-shadow: 4px 4px 0px var(--border-dark);
            padding: 24px 32px;
            z-index: 1000;
            text-align: center;
            font-family: 'Cairo Mono', monospace;
            animation: popup-appear 0.3s ease-out;
        }

        .dark .success-popup {
            background-color: var(--bg-color);
        }

        @keyframes popup-appear {
            0% {
                opacity: 0;
                transform: translate(-50%, -50%) scale(0.8);
            }

            100% {
                opacity: 1;
                transform: translate(-50%, -50%) scale(1);
            }
        }

        .success-popup h3 {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 8px;
            color: var(--text-dark);
        }

        .success-popup p {
            font-size: 14px;
            color: var(--text-dark);
        }

        /* Tip */
        .tip {
            font-size: 20px;
            color: var(--text-dark);
        }

        /* Logo Area - Placeholder */
        .logo-placeholder {
            width: 300px;
            height: 300px;
            border: 4px dashed var(--border-dark);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
            font-size: 18px;
        }

        .logo-placeholder .font-arabic {
            font-size: 40px;
        }

        /* RTL-specific styles */
        [dir="rtl"] body {
            text-align: right;
        }

        [dir="rtl"] .logo-placeholder,
        [dir="rtl"] .tip,
        [dir="rtl"] .btn-retro {
            text-align: center;
            /* Keep these centered */
        }

        [dir="rtl"] .window-controls button,
        [dir="rtl"] .title-bar-btn {
            margin-left: 0;
            margin-right: 6px;
        }

        [dir="rtl"] .dialog-controls button {
            margin-left: 0;
            margin-right: 4px;
        }

        [dir="rtl"] .dialog-content,
        [dir="rtl"] .level-card {
            text-align: right;
        }

        [dir="rtl"] header.flex {
            /* Ensure header elements align correctly in RTL */
            text-align: right;
        }

        /* Home icon color: use currentColor on SVG; set in dark mode */
        #home-btn {
            color: var(--text-dark);
        }

        .dark #home-btn {
            color: #FFE4BF;
        }

        /* Ensure SVG inside home button scales nicely and centers */
        #home-btn svg {
            width: 28px;
            height: 28px;
            display: block;
        }

        @media (min-width: 768px) {
            #home-btn svg {
                width: 32px;
                height: 32px;
            }
        }

        /* Terminal Styling */
        .terminal-container {
            background-color: #111111;
            border: 3px solid var(--border-dark);
            border-radius: 8px;
            box-shadow: 6px 6px 0px var(--border-dark);
            padding: 20px;
            font-family: 'Courier New', 'Cairo Mono', monospace;
            font-size: 14px;
            line-height: 1.6;
            min-height: 400px;
            max-height: 600px;
            display: flex;
            flex-direction: column;
        }

        .terminal-output {
            flex: 0;
            overflow-y: auto;
            margin-bottom: 5px;
            color: #EAEAEA;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .terminal-output::-webkit-scrollbar {
            width: 8px;
        }

        .terminal-output::-webkit-scrollbar-track {
            background: #1a1a1a;
        }

        .terminal-output::-webkit-scrollbar-thumb {
            background: #444;
            border-radius: 4px;
        }

        .terminal-output::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        .terminal-line {
            margin-bottom: 8px;
        }

        .terminal-prompt {
            color: #F98A2A;
            font-weight: bold;
        }

        .terminal-command {
            color: #F98A2A;
            font-weight: bold;
        }

        .terminal-text {
            color: #EAEAEA;
        }

        .terminal-link {
            color: #00AEEF;
            text-decoration: none;
        }

        .terminal-link:hover {
            text-decoration: underline;
        }

        .terminal-error {
            color: #FF6B6B;
        }

        .terminal-success {
            color: #51CF66;
        }

        .terminal-input-line {
            display: flex;
            align-items: center;
            gap: 0;
        }

        .terminal-input {
            flex: 1;
            background: transparent;
            border: none;
            color: #EAEAEA;
            font-family: 'Courier New', 'Cairo Mono', monospace;
            font-size: 14px;
            outline: none;
            padding: 0;
            margin: 0;
        }

        .terminal-input::placeholder {
            color: #555;
        }

        .terminal-cursor {
            display: none;
        }

        @keyframes blink {

            0%,
            49% {
                opacity: 1;
            }

            50%,
            100% {
                opacity: 0;
            }
        }



        /* Dark mode terminal adjustments */
        .dark .terminal-container {
            background-color: #0a0a0a;
        }

        .dark .terminal-output {
            color: #E0E0E0;
        }

        .dark .terminal-input {
            color: #E0E0E0;
        }

        .dark .terminal-cursor {
            color: #E0E0E0;
        }

        #home-btn-origin {
            color: var(--text-dark);
        }

        .dark #home-btn-origin {
            color: #FFE4BF;
        }

        #home-btn-origin svg {
            width: 28px;
            height: 28px;
            display: block;
        }

        @media (min-width: 768px) {
            #home-btn-origin svg {
                width: 32px;
                height: 32px;
            }
        }

        /* Origin page title styling */
        #page-origin h2 {
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        #page-origin .font-light {
            font-weight: 300;
            letter-spacing: 0.3px;
        }

        #origin-page-title {
            text-align: center;
        }

        /* File Explorer Styling */
        .explorer-window {
            background-color: var(--bg-color);
            border: 3px solid var(--border-dark);
            border-radius: 8px;
            box-shadow: 6px 6px 0px var(--border-dark);
            overflow: hidden;
        }

        .explorer-toolbar {
            background-color: #E8E8E8;
            border-bottom: 2px solid var(--border-dark);
            padding: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .dark .explorer-toolbar {
            background-color: #2A2A2A;
        }

        .toolbar-buttons {
            display: flex;
            gap: 4px;
        }

        .toolbar-btn {
            width: 28px;
            height: 28px;
            border: 2px solid var(--border-dark);
            background-color: var(--bg-color);
            color: var(--text-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.1s ease;
            box-shadow: 2px 2px 0px var(--border-dark);
        }

        .toolbar-btn:hover {
            background-color: #D0D0D0;
        }

        .dark .toolbar-btn:hover {
            background-color: #3A3A3A;
        }

        .toolbar-btn:active {
            transform: translate(2px, 2px);
            box-shadow: none;
        }

        .toolbar-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .address-bar {
            flex: 1;
            display: flex;
            align-items: center;
        }

        .address-input {
            width: 100%;
            padding: 6px 12px;
            border: 2px solid var(--border-dark);
            background-color: white;
            color: var(--text-dark);
            font-family: 'Cairo Mono', monospace;
            font-size: 13px;
            box-shadow: inset 2px 2px 0px rgba(0, 0, 0, 0.1);
        }

        .dark .address-input {
            background-color: #1A1A1A;
            color: var(--text-dark);
        }

        .explorer-content {
            display: flex;
            height: 600px;
            overflow: hidden;
        }

        .explorer-sidebar {
            width: 220px;
            background-color: #F0F0F0;
            border-right: 2px solid var(--border-dark);
            overflow-y: auto;
            padding: 8px 4px;
        }

        .dark .explorer-sidebar {
            background-color: #1F1F1F;
        }

        /* Hide sidebar on mobile devices */
        @media (max-width: 768px) {
            .explorer-sidebar {
                display: none;
            }

            .explorer-content {
                height: auto;
                min-height: 400px;
            }
        }

        .sidebar-tree {
            font-family: 'Cairo Mono', monospace;
            font-size: 12px;
        }

        .tree-item {
            padding: 2px 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 4px;
            border-radius: 2px;
            transition: background-color 0.1s;
            min-height: 20px;
        }

        .tree-item:hover {
            background-color: rgba(0, 0, 0, 0.1);
        }

        .dark .tree-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .tree-item.active {
            background-color: #B0D4FF;
            font-weight: bold;
        }

        .dark .tree-item.active {
            background-color: #2A4A6A;
        }

        .tree-icon {
            font-size: 14px;
            flex-shrink: 0;
        }

        .tree-label {
            color: var(--text-dark);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .tree-children {
            margin-left: 20px;
            margin-top: 0;
            padding-left: 0;
            border-left: 1px dotted rgba(0, 0, 0, 0.2);
            padding-left: 4px;
        }

        .dark .tree-children {
            border-left-color: rgba(255, 255, 255, 0.2);
        }

        .tree-children .tree-item {
            padding-left: 4px;
            position: relative;
        }

        .tree-children .tree-item::before {
            content: '';
            position: absolute;
            left: -4px;
            top: 50%;
            width: 8px;
            height: 1px;
            background-color: rgba(0, 0, 0, 0.2);
        }

        .dark .tree-children .tree-item::before {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .explorer-main {
            flex: 1;
            background-color: var(--bg-color);
            overflow-y: auto;
            position: relative;
        }

        .explorer-loading {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background-color: rgba(0, 0, 0, 0.1);
            z-index: 10;
        }

        .loading-bar {
            height: 100%;
            width: 100%;
            position: relative;
            overflow: hidden;
        }

        .loading-progress {
            height: 100%;
            background-color: var(--window-blue);
            animation: loading 0.5s ease-in-out;
            width: 100%;
        }

        @keyframes loading {
            0% {
                width: 0%;
            }

            100% {
                width: 100%;
            }
        }

        .explorer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 20px;
            padding: 20px;
        }

        .explorer-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 12px;
            border-radius: 4px;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }

        .explorer-item:hover {
            background-color: rgba(0, 162, 232, 0.1);
            border-color: var(--window-blue);
            transform: translateY(-2px);
        }

        .explorer-item-icon {
            width: 64px;
            height: 64px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            filter: drop-shadow(2px 2px 0px rgba(0, 0, 0, 0.2));
        }

        .explorer-item-label {
            text-align: center;
            font-family: 'Cairo Mono', monospace;
            font-size: 12px;
            color: var(--text-dark);
            word-break: break-word;
            max-width: 100px;
        }

        /* Project Viewer Modal */
        .viewer-window {
            background-color: var(--bg-color);
            border: 4px solid var(--border-dark);
            border-radius: 8px;
            box-shadow: 8px 8px 0px var(--border-dark);
            max-width: 90vw;
            max-height: 90vh;
            width: 800px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .viewer-title-bar {
            background-color: var(--window-blue);
            border-bottom: 4px solid var(--border-dark);
            padding: 8px 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .viewer-controls {
            display: flex;
            gap: 4px;
        }

        .viewer-control-btn {
            width: 24px;
            height: 24px;
            border: 2px solid var(--border-dark);
            background-color: var(--bg-color);
            color: var(--text-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 2px 2px 0px var(--border-dark);
            transition: all 0.1s ease;
        }

        .viewer-control-btn:hover {
            background-color: #E0E0E0;
        }

        .dark .viewer-control-btn:hover {
            background-color: #3A3A3A;
        }

        .viewer-control-btn:active {
            transform: translate(2px, 2px);
            box-shadow: none;
        }

        .viewer-content {
            flex: 1;
            overflow: auto;
            position: relative;
            background-color: #F5F5F5;
        }

        .dark .viewer-content {
            background-color: #1A1A1A;
        }

        .viewer-image-container {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 400px;
            padding: 20px;
        }

        .viewer-image {
            max-width: 100%;
            max-height: 60vh;
            object-fit: contain;
            border: 2px solid var(--border-dark);
            box-shadow: 4px 4px 0px var(--border-dark);
        }

        .viewer-properties {
            position: absolute;
            top: 0;
            right: 0;
            width: 300px;
            height: 100%;
            background-color: var(--bg-color);
            border-left: 4px solid var(--border-dark);
            padding: 20px;
            overflow-y: auto;
            box-shadow: -4px 0 8px rgba(0, 0, 0, 0.2);
        }

        .properties-title {
            font-family: 'Cairo', sans-serif;
            font-weight: 700;
            font-size: 18px;
            margin-bottom: 16px;
            color: var(--text-dark);
        }

        .properties-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .property-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .property-label {
            font-family: 'Cairo Mono', monospace;
            font-size: 12px;
            color: var(--level-locked-text);
            font-weight: bold;
        }

        .property-value {
            font-family: 'Cairo', sans-serif;
            font-size: 14px;
            color: var(--text-dark);
        }

        .property-link {
            display: inline-block;
            margin-top: 12px;
            padding: 8px 16px;
            background-color: var(--dialog-orange);
            color: var(--text-dark);
            text-decoration: none;
            border: 2px solid var(--border-dark);
            box-shadow: 3px 3px 0px var(--border-dark);
            font-family: 'Cairo', sans-serif;
            font-weight: 700;
            transition: all 0.1s ease;
        }

        .property-link:hover {
            transform: translate(3px, 3px);
            box-shadow: none;
        }

        .viewer-toolbar {
            background-color: #E8E8E8;
            border-top: 2px solid var(--border-dark);
            padding: 8px;
            display: flex;
            gap: 8px;
            justify-content: center;
        }

        .dark .viewer-toolbar {
            background-color: #2A2A2A;
        }

        .viewer-tool-btn {
            width: 32px;
            height: 32px;
            border: 2px solid var(--border-dark);
            background-color: var(--bg-color);
            color: var(--text-dark);
            font-family: 'Cairo Mono', monospace;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 2px 2px 0px var(--border-dark);
            transition: all 0.1s ease;
        }

        .viewer-tool-btn:hover {
            background-color: #D0D0D0;
        }

        .dark .viewer-tool-btn:hover {
            background-color: #3A3A3A;
        }

        .viewer-tool-btn:active {
            transform: translate(2px, 2px);
            box-shadow: none;
        }

        /* --- Level 03: Paint App Styling --- */
        .paint-window {
            background-color: #c0c0c0;
            /* Classic Windows Gray */
            border: 3px solid var(--border-dark);
            box-shadow: 6px 6px 0px var(--border-dark);
            display: flex;
            flex-direction: column;
            height: 600px;
            font-family: 'Courier New', monospace;
            /* Monospaced for retro feel */
        }

        .paint-toolbar {
            background-color: #000080;
            /* Classic Title Blue */
            color: white;
            padding: 4px 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-weight: bold;
            font-size: 14px;
        }

        .paint-body {
            flex: 1;
            display: flex;
            padding: 4px;
            gap: 4px;
            overflow: hidden;
        }

        .paint-sidebar {
            width: 60px;
            background-color: #c0c0c0;
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-auto-rows: 28px;
            gap: 2px;
            padding: 2px;
            border: 2px solid #808080;
            /* Outset border simulation */
            border-right-color: #ffffff;
            border-bottom-color: #ffffff;
            border-top-color: #808080;
            border-left-color: #808080;
        }

        .paint-tool-btn {
            width: 24px;
            height: 24px;
            background-color: #c0c0c0;
            border: 2px solid;
            border-color: #ffffff #808080 #808080 #ffffff;
            /* Outset 3D */
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            font-size: 14px;
        }

        .paint-tool-btn:active,
        .paint-tool-btn.active {
            border-color: #808080 #ffffff #ffffff #808080;
            /* Inset 3D */
            background-color: #e0e0e0;
        }

        .paint-tool-btn img {
            width: 16px;
            height: 16px;
            image-rendering: pixelated;
        }

        .paint-canvas-area {
            flex: 1;
            background-color: #808080;
            /* Darker bg for canvas container */
            padding: 10px;
            overflow: auto;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .paint-canvas {
            background-color: white;
            width: 100%;
            height: 100%;
            border: 2px solid #000;
            box-shadow: 4px 4px 0 rgba(0, 0, 0, 0.2);
            padding: 20px;
            overflow-y: auto;
            position: relative;
            color: black;
            /* Force black text on canvas */
        }

        .paint-footer {
            height: 50px;
            background-color: #c0c0c0;
            display: flex;
            align-items: center;
            padding: 4px;
            border-top: 2px solid #fff;
            gap: 10px;
        }

        .paint-palette {
            display: flex;
            flex-wrap: wrap;
            width: 200px;
            height: 32px;
            border: 2px solid;
            border-color: #808080 #ffffff #ffffff #808080;
            /* Inset */
        }

        .color-box {
            width: 14px;
            height: 14px;
            cursor: help;
            /* Question mark cursor */
            border: 1px solid #808080;
        }

        .paint-status-bar {
            flex: 1;
            border: 2px solid;
            border-color: #808080 #ffffff #ffffff #808080;
            /* Inset */
            height: 100%;
            display: flex;
            align-items: center;
            padding-left: 8px;
            font-family: 'Cairo Mono', monospace;
            font-size: 12px;
            color: #000;
        }

        /* Specific Content Styles inside Canvas */
        .skill-header {
            font-weight: bold;
            font-size: 24px;
            margin-bottom: 10px;
            border-bottom: 2px dashed #000;
            padding-bottom: 5px;
        }

        .skill-desc {
            font-size: 16px;
            line-height: 1.5;
        }

        .handwritten-msg {
            font-family: 'Courier New', monospace;
            font-size: 18px;
            text-align: center;
            margin-top: 20%;
            color: #555;
            animation: blink 2s infinite;
        }

        /* Dark Mode Adjustments for Paint */
        .dark .paint-window {
            border-color: var(--border-dark);
        }
    </style>
</head>

<body class="p-4 md:p-8 min-h-screen flex flex-col items-center justify-center transition-colors duration-300">

    <!-- Main Window Container -->
    <main class="window-frame w-full max-w-5xl mx-auto">

        <!-- Window Title Bar -->
        <header class="title-bar">
            <div class="flex items-center">
                <select id="lang-toggle-btn" class="title-bar-btn !font-title !text-sm px-2 py-1 cursor-pointer">
                    <option value="en">EN</option>
                    <option value="fr">FR</option>
                    <option value="it">IT</option>
                    <option value="ar">ع</option>

                </select>
                <button id="theme-toggle" class="title-bar-btn">
                    <!-- Sun Icon SVG (New, cleaner version) -->
                    <svg id="icon-sun" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                            d="M12 12m-5 0a5 5 0 1 0 10 0a5 5 0 1 0-10 0" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                            d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" />
                    </svg>
                    <!-- Moon Icon SVG -->
                    <svg id="icon-moon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                            d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z">
                        </path>
                    </svg>
                </button>
                <button id="reset-system-btn" class="title-bar-btn reset-btn" title="Reset System"
                    data-translate-key="system.reset.tooltip" data-translate-key-attr="title">
                    <span data-translate-key="system.reset.btn">Reset</span>
                </button>
            </div>
            <span id="window-title-text" class="title-bar-text font-title"></span>
            <div class="window-controls flex">
                <button aria-label="Minimize" title="Minimize" data-translate-key="window.minimize"
                    data-translate-key-attr="title">
                    <!-- Minimize (Minus) Icon SVG -->
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M20 12H4"></path>
                    </svg>
                </button>
                <button aria-label="Close" title="Close" data-translate-key="window.close"
                    data-translate-key-attr="title">
                    <!-- Close (X) Icon SVG -->
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12">
                        </path>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Window Content Area -->
        <div class="window-content">

            <!-- PAGE 1: Welcome Screen -->
            <section id="page-welcome" class="">
                <div class="flex flex-col md:flex-row items-center justify-center md:justify-around gap-12 p-4 md:p-8">

                    <!-- Left Side: Logo -->
                    <div class="flex-shrink-0">
                        <img src="logo.png" alt="Roumaissa's Logo"
                            style="max-width: 300px; max-height: 300px; width: auto; height: auto;">
                    </div>

                    <!-- Right Side: Welcome.exe Dialog -->
                    <div class="dialog-box">
                        <header class="dialog-title-bar">
                            <span class="font-title text-sm"
                                data-translate-key="welcome.dialog.title">Welcome.exe</span>
                            <div class="dialog-controls flex">
                                <!-- Replaced text with SVG -->
                                <button aria-label="Minimize" title="Minimize" data-translate-key="window.minimize"
                                    data-translate-key-attr="title">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3.5"
                                            d="M20 12H4"></path>
                                    </svg>
                                </button>
                                <!-- Replaced text with SVG -->
                                <button aria-label="Close" title="Close" data-translate-key="window.close"
                                    data-translate-key-attr="title">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3.5"
                                            d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                        </header>
                        <div class="dialog-content space-y-5">
                            <h1 class="font-title text-2xl" data-translate-key="welcome.dialog.h1">Here is Roumaissa's
                                zone</h1>
                            <p data-translate-key="welcome.dialog.p1">Oh look, another typical designer portfolio.. but
                                trust me, this one actually has personality</p>
                            <p class="font-bold text-lg" data-translate-key="welcome.dialog.p2">System booting ...</p>
                            <p data-translate-key="welcome.dialog.p3">welcome to Roumaissa's OS- 99% creativity, 1%
                                caffeine</p>

                            <div class="flex flex-col sm:flex-row gap-4 mt-8">
                                <button id="start-mission-btn" class="btn-retro btn-primary w-full sm:w-auto"
                                    data-translate-key="welcome.dialog.btn.start">Start mission</button>
                                <button id="classic-view-btn" class="btn-retro w-full sm:w-auto"
                                    data-translate-key="welcome.dialog.btn.classic">Classic view</button>
                            </div>
                        </div>
                    </div>

                </div>
            </section>

            <!-- PAGE 2: Mission Control Screen -->
            <section id="page-missions" class="hidden">
                <div class="flex flex-col gap-8 p-4 md:p-8">

                    <!-- Header -->
                    <header class="flex items-center gap-4">
                        <!-- Home Icon SVG -->
                        <button id="home-btn"
                            class="p-2 border-2 border-transparent hover:border-textDark rounded-lg transition-all"
                            title="Back to Welcome">
                            <svg class="w-10 h-10" fill="currentColor" viewBox="0 0 20 20"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z">
                                </path>
                            </svg>
                        </button>
                        <h1 class="font-title text-xl md:text-3xl" data-translate-key="missions.title">Mission Control —
                            Ready for Deployment ...</h1>
                    </header>

                    <!-- System Sync -->
                    <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4">
                        <span class="font-title text-lg flex-shrink-0" data-translate-key="missions.sync.text">System
                            Sync: 20% completed</span>
                        <div class="progress-bar">
                            <div class="progress-bar-segment filled"></div>
                            <div class="progress-bar-segment"></div>
                            <div class="progress-bar-segment"></div>
                            <div class="progress-bar-segment"></div>
                        </div>
                    </div>

                    <!-- Level Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8">

                        <!-- Level 01: Locked initially -->
                        <a href="#" id="level-1-card" class="level-card locked">
                            <h2 class="font-title text-lg" data-translate-key="missions.level1.title">level 01: the
                                origin</h2>
                            <p class="mt-2" data-translate-key="missions.level1.desc">Every story starts somewhere.</p>
                            <span class="level-status locked font-title text-sm mt-4 block"
                                data-translate-key="missions.level.status.locked">Status: locked</span>
                        </a>

                        <!-- Level 02: Locked -->
                        <div id="level-2-card" class="level-card locked">
                            <h2 class="font-title text-lg" data-translate-key="missions.level2.title">level 02: the
                                Playground</h2>
                            <p class="mt-2" data-translate-key="missions.level2.desc">Where ideas turn into visuals</p>
                            <span class="level-status locked font-title text-sm mt-4 block"
                                data-translate-key="missions.level.status.locked">Status: locked</span>
                        </div>

                        <!-- Level 03: Locked -->
                        <div id="level-3-card" class="level-card locked">
                            <h2 class="font-title text-lg" data-translate-key="missions.level3.title">level 03: the
                                Toolkit</h2>
                            <p class="mt-2" data-translate-key="missions.level3.desc">Discover my creative arsenal</p>
                            <span class="level-status locked font-title text-sm mt-4 block"
                                data-translate-key="missions.level.status.locked">Status: locked</span>
                        </div>

                        <!-- Level 04: Locked -->
                        <div id="level-4-card" class="level-card locked">
                            <h2 class="font-title text-lg" data-translate-key="missions.level4.title">level 04: the
                                Final Portal</h2>
                            <p class="mt-2" data-translate-key="missions.level4.desc">Let's connect and create together
                            </p>
                            <span class="level-status locked font-title text-sm mt-4 block"
                                data-translate-key="missions.level.status.locked">Status: locked</span>
                        </div>

                    </div>

                    <!-- Tip -->
                    <div class="tip text-center mt-4" data-translate-key="missions.tip">
                        &gt;&gt; Tip: Complete all levels to unlock the secret ending_
                    </div>

                </div>
            </section>

            <!-- PAGE 3: The Origin Terminal -->
            <section id="page-origin" class="hidden">
                <div class="flex flex-col gap-0 p-0 md:p-0">

                    <!-- Header -->
                    <header class="flex items-center gap-4 px-4 md:px-8 pt-4 md:pt-8 pb-2">
                        <!-- Home Icon SVG -->
                        <button id="home-btn-origin"
                            class="p-2 border-2 border-transparent hover:border-textDark rounded-lg transition-all"
                            title="Back to Welcome">
                            <svg class="w-10 h-10" fill="currentColor" viewBox="0 0 20 20"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z">
                                </path>
                            </svg>
                        </button>

                        <!-- Title and Subtitle -->
                        <div class="flex-grow">
                            <h2 class="font-title text-xl sm:text-2xl md:text-3xl font-bold"
                                data-translate-key="origin.title">Level 01: The Origin</h2>
                            <p class="text-sm sm:text-base font-light mt-1" data-translate-key="origin.subtitle">Every
                                story starts somewhere, and mine starts in Sétif</p>
                        </div>
                    </header>

                    <!-- Terminal Window -->
                    <div id="terminal-window" class="terminal-container px-4 md:px-8 pb-4 md:pb-8">
                        <div id="terminal-output" class="terminal-output">
                            <!-- Content will be generated by JavaScript -->
                        </div>
                        <div class="terminal-input-line">
                            <span class="terminal-prompt">>> </span>
                            <input id="terminal-input" type="text" class="terminal-input" placeholder=""
                                autocomplete="off">
                            <span id="terminal-cursor" class="terminal-cursor">▌</span>
                        </div>
                    </div>

                </div>
            </section>

            <!-- PAGE 4: Level 02 - The Playground (File Explorer) -->
            <section id="page-playground" class="hidden">
                <div class="flex flex-col gap-0 p-0 md:p-0">
                    <!-- Header -->
                    <header class="flex items-center gap-4 px-4 md:px-8 pt-4 md:pt-8 pb-2">
                        <button id="home-btn-playground"
                            class="p-2 border-2 border-transparent hover:border-textDark rounded-lg transition-all"
                            title="Back to Mission Control">
                            <svg class="w-10 h-10" fill="currentColor" viewBox="0 0 20 20"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z">
                                </path>
                            </svg>
                        </button>
                        <div class="flex-grow">
                            <h2 class="font-title text-xl sm:text-2xl md:text-3xl font-bold"
                                data-translate-key="playground.title">Level 02: The Playground</h2>
                            <p class="text-sm sm:text-base font-light mt-1" data-translate-key="playground.subtitle">
                                Where ideas turn into visuals</p>
                        </div>
                    </header>

                    <!-- Read-Only Mode Warning (shown only in Emergency Access) -->
                    <div id="read-only-warning" class="hidden px-4 md:px-8 pb-4">
                        <div
                            class="flex flex-col sm:flex-row items-start sm:items-center gap-4 p-4 border-2 border-yellow-500 bg-yellow-50 dark:bg-yellow-900/20 rounded-lg">
                            <div class="flex-grow">
                                <p class="font-title text-sm sm:text-base text-yellow-800 dark:text-yellow-200"
                                    data-translate-key="playground.readonly.warning">⚠ SYNC DISABLED: Sequence Bypassed
                                </p>
                                <p class="text-xs sm:text-sm text-yellow-700 dark:text-yellow-300 mt-1"
                                    data-translate-key="playground.readonly.message">Your progress will NOT be saved
                                    because you skipped Level 01.</p>
                            </div>
                            <button id="reinitialize-btn" class="btn-reinitialize flex-shrink-0"
                                data-translate-key="playground.readonly.reinitialize">
                                ↻ Re-Initialize Sequence
                            </button>
                        </div>
                    </div>

                    <!-- File Explorer Window -->
                    <div class="explorer-window px-4 md:px-8 pb-4 md:pb-8">
                        <!-- Explorer Toolbar -->
                        <div class="explorer-toolbar">
                            <div class="toolbar-buttons">
                                <button id="explorer-back" class="toolbar-btn" title="Back">
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd"
                                            d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z"
                                            clip-rule="evenodd" />
                                    </svg>
                                </button>
                                <button id="explorer-forward" class="toolbar-btn" title="Forward">
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd"
                                            d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z"
                                            clip-rule="evenodd" />
                                    </svg>
                                </button>
                                <button id="explorer-up" class="toolbar-btn" title="Up">
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd"
                                            d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z"
                                            clip-rule="evenodd" />
                                    </svg>
                                </button>
                            </div>
                            <div class="address-bar">
                                <input type="text" id="explorer-address" class="address-input" readonly
                                    value="C:\Roumaissa\Portfolio">
                            </div>
                            <button id="complete-level-btn" class="btn-complete-level hidden"
                                data-translate-key="playground.complete.btn">
                                📡 Sync Mission Data
                            </button>
                        </div>

                        <!-- Explorer Content -->
                        <div class="explorer-content">
                            <!-- Sidebar -->
                            <div class="explorer-sidebar">
                                <div class="sidebar-tree">
                                    <div class="tree-item" data-path="C:\Roumaissa">
                                        <span class="tree-icon">📁</span>
                                        <span class="tree-label">Roumaissa</span>
                                    </div>
                                    <div class="tree-item tree-expanded" data-path="C:\Roumaissa\Portfolio">
                                        <span class="tree-icon">📁</span>
                                        <span class="tree-label">Portfolio</span>
                                    </div>
                                    <div class="tree-children">
                                        <div class="tree-item" data-path="C:\Roumaissa\Portfolio\Branding">
                                            <span class="tree-icon">📁</span>
                                            <span class="tree-label">Branding</span>
                                        </div>
                                        <div class="tree-item" data-path="C:\Roumaissa\Portfolio\Social Media">
                                            <span class="tree-icon">📁</span>
                                            <span class="tree-label">Social Media</span>
                                        </div>
                                        <div class="tree-item" data-path="C:\Roumaissa\Portfolio\Web Design">
                                            <span class="tree-icon">📁</span>
                                            <span class="tree-label">Web Design</span>
                                        </div>
                                        <div class="tree-item" data-path="C:\Roumaissa\Portfolio\Illustration">
                                            <span class="tree-icon">📁</span>
                                            <span class="tree-label">Illustration</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Main Content Area -->
                            <div class="explorer-main">
                                <!-- Loading Bar -->
                                <div id="explorer-loading" class="explorer-loading hidden">
                                    <div class="loading-bar">
                                        <div class="loading-progress"></div>
                                    </div>
                                </div>

                                <!-- File Grid -->
                                <div id="explorer-grid" class="explorer-grid">
                                    <!-- Content will be populated by JavaScript -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Project Viewer Modal (Windows Picture and Fax Viewer style) -->
            <div id="project-viewer-modal"
                class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="viewer-window">
                    <header class="viewer-title-bar">
                        <span id="viewer-title" class="font-title text-sm">project.brand</span>
                        <div class="viewer-controls flex">
                            <button id="viewer-properties-btn" class="viewer-control-btn" title="Properties">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path
                                        d="M7 2a1 1 0 011 1v1h3a1 1 0 110 2H9.578a18.87 18.87 0 01-1.724 4.78c.29.354.596.696.914 1.026a1 1 0 11-1.44 1.389c-.188-.196-.373-.396-.554-.6a19.098 19.098 0 01-3.432 2.753 1 1 0 01-1.415-1.415c.955-.744 1.799-1.587 2.514-2.511a19.047 19.047 0 01-1.415-1.415 1 1 0 011.415-1.415c.218.218.434.44.646.662a18.98 18.98 0 01-1.723-4.78H3a1 1 0 110-2h3V3a1 1 0 011-1zm6 6a1 1 0 01.894.553l2.991 5.982a.869.869 0 01.02.037l.99 1.98a1 1 0 11-1.79.895L15.383 16h-4.764l-.724 1.447a1 1 0 11-1.788-.894l.99-1.98.019-.038 2.99-5.982A1 1 0 0113 8zm-1.382 6h2.764L12 11.236 11.618 14z" />
                                </svg>
                            </button>
                            <button id="viewer-close-btn" class="viewer-control-btn" title="Close">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3.5"
                                        d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                    </header>
                    <div class="viewer-content">
                        <div id="viewer-image-container" class="viewer-image-container">
                            <img id="viewer-image" src="" alt="Project Preview" class="viewer-image">
                        </div>
                        <div id="viewer-properties" class="viewer-properties hidden">
                            <div class="properties-content">
                                <h3 class="properties-title">Properties</h3>
                                <div class="properties-list">
                                    <div class="property-item">
                                        <span class="property-label">Project Name:</span>
                                        <span id="property-name" class="property-value"></span>
                                    </div>
                                    <div class="property-item">
                                        <span class="property-label">Date:</span>
                                        <span id="property-date" class="property-value"></span>
                                    </div>
                                    <div class="property-item">
                                        <span class="property-label">Client:</span>
                                        <span id="property-client" class="property-value"></span>
                                    </div>
                                    <div class="property-item">
                                        <span class="property-label">Category:</span>
                                        <span id="property-category" class="property-value"></span>
                                    </div>
                                    <a id="property-link" href="#" target="_blank" class="property-link">Launch Project
                                        →</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="viewer-toolbar">
                        <button id="viewer-zoom-in" class="viewer-tool-btn" title="Zoom In">+</button>
                        <button id="viewer-zoom-out" class="viewer-tool-btn" title="Zoom Out">-</button>
                        <button id="viewer-rotate" class="viewer-tool-btn" title="Rotate">↻</button>
                    </div>
                </div>
            </div>

            <!-- Level 02 Locked Modal -->
            <div id="level2-locked-modal"
                class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="coming-soon-dialog">
                    <header class="dialog-title-bar">
                        <span class="font-title text-sm"
                            data-translate-key="level2.locked.title">level_02_locked.exe</span>
                        <div class="dialog-controls flex">
                            <button id="close-level2-locked-btn" aria-label="Close" title="Close">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3.5"
                                        d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                    </header>
                    <div class="dialog-content space-y-4">
                        <p class="text-lg font-title" data-translate-key="level2.locked.message">Complete Level 01 first
                            to unlock the full experience!</p>
                        <p class="text-sm" data-translate-key="level2.locked.submessage">Explore The Origin to discover
                            my story and unlock The Playground.</p>
                        <div class="flex gap-4 mt-6">
                            <button id="go-to-level1-btn" class="btn-retro btn-primary flex-1"
                                data-translate-key="level2.locked.btn.level1">Go to Level 01</button>
                            <button id="emergency-access-btn" class="btn-retro flex-1"
                                data-translate-key="level2.locked.btn.emergency">Emergency Access</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Coming Soon Modal -->
            <div id="coming-soon-modal"
                class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="coming-soon-dialog">
                    <header class="dialog-title-bar">
                        <span class="font-title text-sm">coming_soon.exe</span>
                        <div class="dialog-controls flex">
                            <button id="close-coming-soon-btn" aria-label="Close" title="Close">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3.5"
                                        d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                    </header>
                    <div class="dialog-content space-y-4">
                        <p class="text-lg font-title" data-translate-key="coming.soon">This level is coming soon! Stay
                            tuned...</p>
                        <div class="flex gap-4 mt-6">
                            <button id="ok-coming-soon-btn" class="btn-retro btn-primary flex-1"
                                data-translate-key="coming.soon.btn">OK</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Reset System Confirmation Modal -->
            <div id="reset-confirm-modal"
                class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="coming-soon-dialog">
                    <header class="dialog-title-bar">
                        <span class="font-title text-sm"
                            data-translate-key="system.reset.modal.title">reset_system.exe</span>
                        <div class="dialog-controls flex">
                            <button id="close-reset-confirm-btn" aria-label="Close" title="Close">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3.5"
                                        d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                    </header>
                    <div class="dialog-content space-y-4">
                        <p class="text-lg font-title" data-translate-key="system.reset.modal.message">Are you sure you
                            want to reset all progress?</p>
                        <p class="text-sm text-gray-600 dark:text-gray-400"
                            data-translate-key="system.reset.modal.warning">This action cannot be undone.</p>
                        <div class="flex gap-4 mt-6">
                            <button id="cancel-reset-btn" class="btn-retro flex-1"
                                data-translate-key="system.reset.modal.cancel">Cancel</button>
                            <button id="confirm-reset-btn" class="btn-retro btn-primary flex-1"
                                data-translate-key="system.reset.modal.confirm">Reset</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- Footer -->
    <footer class="w-full text-center p-4 mt-6 text-sm" data-translate-key="footer.text">
        © 2025 Roumaissa Koussa – story mode edition
    </footer>

    <script>
        // === Translations Data ===
        const translations = {
            'en': {
                'lang.toggle.text': 'EN',
                'window.minimize': '-',
                'window.close': 'x',
                'window.title.welcome': '',
                'window.title.missions': 'mission_selector.exe',
                'welcome.logo.p1': 'Replace this with your logo graphic',
                'welcome.logo.p2': 'Roumaissa',
                'welcome.logo.p3': '(From my-portfolio-design1.png)',
                'welcome.dialog.title': 'Welcome.exe',
                'welcome.dialog.h1': "Here is Roumaissa's zone",
                'welcome.dialog.p1': 'Oh look, another typical designer portfolio.. but trust me, this one actually has personality',
                'welcome.dialog.p2': 'System booting ...',
                'welcome.dialog.p3': "welcome to Roumaissa's OS- 99% creativity, 1% caffeine",
                'welcome.dialog.btn.start': 'Start mission',
                'welcome.dialog.btn.classic': 'Classic view',
                'missions.title': 'Mission Control — Ready for Deployment ...',
                'missions.sync.text': 'System Sync: {percent}% completed',
                'missions.sync.disabled': '⚠ SYNC DISABLED: Sequence Bypassed',
                'playground.readonly.warning': '⚠ SYNC DISABLED: Sequence Bypassed',
                'playground.readonly.message': 'Your progress will NOT be saved because you skipped Level 01.',
                'playground.readonly.reinitialize': '↻ Re-Initialize Sequence',
                'playground.complete.btn': '📡 Sync Mission Data',
                'playground.complete.success.title': '✓ Data Uploaded Successfully',
                'playground.complete.success.message': 'Level 02 completed! Returning to Mission Control...',
                'missions.level1.title': 'level 01: the origin',
                'missions.level1.desc': 'Every story starts somewhere.',
                'missions.level2.title': 'level 02: the Playground',
                'missions.level2.desc': 'Where ideas turn into visuals',
                'missions.level3.title': 'level 03: the Toolkit',
                'missions.level3.desc': 'Discover my creative arsenal',
                'missions.level4.title': 'level 04: the Final Portal',
                'missions.level4.desc': "Let's connect and create together",
                'missions.level.status.unlocked': 'Status: unlocked',
                'missions.level.status.locked': 'Status: locked',
                'missions.tip': '>> Tip: Complete all levels to unlock the secret ending_',
                'origin.title': 'Level 01: The Origin',
                'origin.subtitle': 'Every story starts somewhere, and mine starts in Sétif',
                'origin.boot.line1': 'Booting Roumaisa OS v1.0 ...',
                'origin.boot.line2': 'Loading childhood memories...',
                'origin.boot.line3': 'Loading creativity modules...',
                'origin.boot.line4': 'System ready.',
                'origin.welcome': "Welcome, traveler. You've entered a creative system built with imagination and caffeine ☕",
                'origin.help.prompt': 'Type \'help\' to begin your exploration_',
                'origin.help.title': 'Available commands:',
                'origin.help.whoami': '[1] whoami      → Learn who\'s behind the system',
                'origin.help.origin': '[2] origin      → Discover where it all began',
                'origin.help.spark': '[3] spark       → The moment creativity ignited',
                'origin.help.skills': '[4] skills      → What powers my design process',
                'origin.help.toolkit': '[5] toolkit     → My creative weapons of choice',
                'origin.help.contact': '[6] contact     → Connect with me',
                'origin.help.lang': '[7] lang        → Change system language',
                'origin.help.exit': '[8] exit        → Return to Mission Control',
                'origin.help.clear': '[9] clear       → Clear the terminal screen',
                'origin.whoami': "I'm Roumaisa — a designer who translates ideas into emotions,\nand emotions into visuals.\nPowered by curiosity, color, and a hint of organized chaos ✨",
                'origin.origin': "Every story starts somewhere… mine began in Sétif, Algeria 🇩🇿\nFrom doodling on notebooks to designing full brand identities —\nmy journey was never planned, just passionately crafted.",
                'origin.spark': "The spark?\nProbably the first time I realized design could make people *feel*.\nSince then, I\'ve been chasing that feeling — one pixel at a time.",
                'origin.skills.title': 'Skills detected:',
                'origin.skills.list': '- Branding & Visual Identity\n- Social Media Design\n- Concept Art & Illustration\n- Storytelling through visuals\n- AI-enhanced design exploration 🤖',
                'origin.toolkit.title': 'Toolkit initialized:',
                'origin.toolkit.list': '- Adobe Illustrator\n- Photoshop\n- Figma\n- After Effects\n- ChatGPT + Midjourney (my AI sidekicks ⚡)',
                'origin.contact': "Let's connect and create something unforgettable 💫\nEmail: roumaissaks1997@gmail.com\nLinktree: linktr.ee/roumaissou19",
                'origin.exit': 'Returning to Mission Control...\nSystem Sync: 25% completed.',
                'origin.error': 'Command not found.\nEven my creativity module couldn\'t process that.\nTry \'help\' before I start guessing 🤔',
                'origin.easter.coffee': '☕ Brewing creativity... Done. +15% inspiration.',
                'origin.lang.title': 'Language Selection System',
                'origin.lang.available': 'Available languages:',
                'origin.lang.current': 'Current language: {lang}',
                'origin.lang.set': 'Language changed to: {lang}',
                'origin.lang.notavailable': 'Language \'{lang}\' is not available yet.\nAvailable languages: en, fr, ar, it',
                'origin.lang.usage': 'Usage: lang [language_code]\nExample: lang fr (to switch to French)',
                'origin.lang.prompt': 'Type the language name or code (or any command to cancel):',
                'origin.lang.cancelled': 'Language selection cancelled.',
                'playground.title': 'Level 02: The Playground',
                'playground.subtitle': 'Where ideas turn into visuals',
                'level2.locked.title': 'level_02_locked.exe',
                'level2.locked.message': 'Complete Level 01 first to unlock the full experience!',
                'level2.locked.submessage': 'Explore The Origin to discover my story and unlock The Playground.',
                'level2.locked.btn.level1': 'Go to Level 01',
                'level2.locked.btn.emergency': 'Emergency Access',
                'coming.soon': 'This level is coming soon! Stay tuned...',
                'coming.soon.btn': 'OK',
                'footer.text': '© 2025 Roumaissa Koussa – story mode edition',
                'system.reset.tooltip': '⚠ Reset System',
                'system.reset.confirm': 'Are you sure you want to reset all progress?',
                'system.reset.btn': 'Reset',
                'system.reset.modal.title': 'reset_system.exe',
                'system.reset.modal.message': 'Are you sure you want to reset all progress?',
                'system.reset.modal.warning': 'This action cannot be undone.',
                'system.reset.modal.cancel': 'Cancel',
                'system.reset.modal.confirm': 'Reset'
            },
            'fr': {
                'lang.toggle.text': 'FR',
                'window.minimize': '-',
                'window.close': 'x',
                'window.title.welcome': '',
                'window.title.missions': 'selecteur_mission.exe',
                'welcome.logo.p1': 'Remplacez ceci par votre logo',
                'welcome.logo.p2': 'Roumaissa',
                'welcome.logo.p3': '(Depuis my-portfolio-design1.png)',
                'welcome.dialog.title': 'Bienvenue.exe',
                'welcome.dialog.h1': "Voici la zone de Roumaissa",
                'welcome.dialog.p1': 'Oh, encore un portfolio de designer typique... mais croyez-moi, celui-ci a de la personnalité',
                'welcome.dialog.p2': 'Démarrage du système ...',
                'welcome.dialog.p3': "bienvenue sur Roumaissa OS- 99% créativité, 1% caféine",
                'welcome.dialog.btn.start': 'Commencer la mission',
                'welcome.dialog.btn.classic': 'Vue classique',
                'missions.title': 'Contrôle de mission — Prêt pour le déploiement ...',
                'missions.sync.text': 'Synchro système : {percent}% terminée',
                'missions.sync.disabled': '⚠ SYNCHRO DÉSACTIVÉE : Séquence Contournée',
                'playground.readonly.warning': '⚠ SYNCHRO DÉSACTIVÉE : Séquence Contournée',
                'playground.readonly.message': 'Votre progression ne sera PAS sauvegardée car vous avez ignoré le Niveau 01.',
                'playground.readonly.reinitialize': '↻ Réinitialiser la Séquence',
                'playground.complete.btn': '📡 Synchroniser les Données de Mission',
                'playground.complete.success.title': '✓ Données Téléchargées avec Succès',
                'playground.complete.success.message': 'Niveau 02 terminé ! Retour au Centre de Contrôle...',
                'missions.level1.title': 'niveau 01 : l\'origine',
                'missions.level1.desc': 'Chaque histoire commence quelque part.',
                'missions.level2.title': 'niveau 02 : le Terrain de jeu',
                'missions.level2.desc': 'Où les idées deviennent visuels',
                'missions.level3.title': 'niveau 03 : la Boîte à outils',
                'missions.level3.desc': 'Découvrez mon arsenal créatif',
                'missions.level4.title': 'niveau 04 : le Portail Final',
                'missions.level4.desc': 'Connectons-nous et créons ensemble',
                'missions.level.status.unlocked': 'Statut : déverrouillé',
                'missions.level.status.locked': 'Statut : verrouillé',
                'missions.tip': '>> Astuce : Terminez tous les niveaux pour débloquer la fin secrète_',
                'origin.title': 'Niveau 01 : L\'Origine',
                'origin.subtitle': 'Chaque histoire commence quelque part, et la mienne commence à Sétif',
                'origin.boot.line1': 'Démarrage du système d\'exploitation Roumaisa v1.0 ...',
                'origin.boot.line2': 'Chargement des souvenirs d\'enfance...',
                'origin.boot.line3': 'Chargement des modules de créativité...',
                'origin.boot.line4': 'Système prêt.',
                'origin.welcome': "Bienvenue, voyageur. Vous êtes entré dans un système créatif construit avec imagination et caféine ☕",
                'origin.help.prompt': 'Tapez \'help\' pour commencer votre exploration_',
                'origin.help.title': 'Commandes disponibles:',
                'origin.help.whoami': '[1] whoami      → Apprenez qui se cache derrière le système',
                'origin.help.origin': '[2] origin      → Découvrez où tout a commencé',
                'origin.help.spark': '[3] spark       → Le moment où la créativité s\'est allumée',
                'origin.help.skills': '[4] skills      → Ce qui alimente mon processus de conception',
                'origin.help.toolkit': '[5] toolkit     → Mes armes créatives préférées',
                'origin.help.contact': '[6] contact     → Connectez-vous avec moi',
                'origin.help.lang': '[7] lang        → Changer la langue du système',
                'origin.help.exit': '[8] exit        → Retour au Centre de Contrôle',
                'origin.help.clear': '[9] clear       → Effacer l\'écran du terminal',
                'origin.whoami': "Je suis Roumaisa — une designer qui traduit les idées en émotions,\net les émotions en visuels.\nAlimentée par la curiosité, la couleur et un brin de chaos organisé ✨",
                'origin.origin': "Chaque histoire commence quelque part… la mienne a commencé à Sétif, Algérie 🇩🇿\nDu griffonnage sur des cahiers à la conception d\'identités de marque complètes —\nmon voyage n\'a jamais été planifié, juste passionnément créé.",
                'origin.spark': "L\'étincelle?\nProbablement le moment où j\'ai réalisé que le design pouvait faire *ressentir* aux gens.\nDepuis, je chasse ce sentiment — un pixel à la fois.",
                'origin.skills.title': 'Compétences détectées:',
                'origin.skills.list': '- Branding et Identité Visuelle\n- Design de Médias Sociaux\n- Concept Art & Illustration\n- Storytelling par les visuels\n- Exploration de design améliorée par l\'IA 🤖',
                'origin.toolkit.title': 'Boîte à outils initialisée:',
                'origin.toolkit.list': '- Adobe Illustrator\n- Photoshop\n- Figma\n- After Effects\n- ChatGPT + Midjourney (mes compagnons IA ⚡)',
                'origin.contact': "Connectons-nous et créons quelque chose d\'inoubliable 💫\nEmail: roumaissaks1997@gmail.com\nLinktree: linktr.ee/roumaissou19",
                'origin.exit': 'Retour au Centre de Contrôle...\nSynchronisation du système : 25% terminée.',
                'origin.error': 'Commande non trouvée.\nMême mon module de créativité n\'a pas pu traiter cela.\nEssayez \'help\' avant que je commence à deviner 🤔',
                'origin.easter.coffee': '☕ Infusion de créativité... Fait. +15% d\'inspiration.',
                'origin.lang.title': 'Système de Sélection de Langue',
                'origin.lang.available': 'Langues disponibles:',
                'origin.lang.current': 'Langue actuelle: {lang}',
                'origin.lang.set': 'Langue changée en: {lang}',
                'origin.lang.notavailable': 'La langue \'{lang}\' n\'est pas encore disponible.\nLangues disponibles: en, fr, ar, it',
                'origin.lang.usage': 'Utilisation: lang [code_langue]\nExemple: lang fr (pour passer au français)',
                'origin.lang.prompt': 'Tapez le nom ou le code de la langue (ou toute commande pour annuler):',
                'origin.lang.cancelled': 'Sélection de langue annulée.',
                'playground.title': 'Niveau 02 : Le Terrain de jeu',
                'playground.subtitle': 'Où les idées deviennent visuels',
                'level2.locked.title': 'niveau_02_verrouille.exe',
                'level2.locked.message': 'Complétez le Niveau 01 d\'abord pour débloquer l\'expérience complète!',
                'level2.locked.submessage': 'Explorez L\'Origine pour découvrir mon histoire et débloquer Le Terrain de jeu.',
                'level2.locked.btn.level1': 'Aller au Niveau 01',
                'level2.locked.btn.emergency': 'Accès d\'urgence',
                'coming.soon': 'Ce niveau arrive bientôt! Restez à l\'écoute...',
                'coming.soon.btn': 'OK',
                'footer.text': '© 2025 Roumaissa Koussa – édition mode histoire',
                'system.reset.tooltip': '⚠ Réinitialiser le Système',
                'system.reset.confirm': 'Êtes-vous sûr de vouloir réinitialiser toute la progression ?',
                'system.reset.btn': 'Reset',
                'system.reset.modal.title': 'reinitialiser_systeme.exe',
                'system.reset.modal.message': 'Êtes-vous sûr de vouloir réinitialiser toute la progression ?',
                'system.reset.modal.warning': 'Cette action ne peut pas être annulée.',
                'system.reset.modal.cancel': 'Annuler',
                'system.reset.modal.confirm': 'Réinitialiser'
            },
            'ar': {
                'lang.toggle.text': 'ع',
                'window.minimize': '-',
                'window.close': 'x',
                'window.title.missions': 'mission_selector.exe',
                'welcome.logo.p1': 'يُستبدل هذا بشعارك الخاص',
                'welcome.logo.p2': 'رميسة',
                'welcome.logo.p3': '(من my-portfolio-design1.png)',
                'welcome.dialog.title': 'Welcome.exe',
                'welcome.dialog.h1': 'هنا منطقة رميسة',
                'welcome.dialog.p1': 'أوه، ملف مصمم نموذجي آخر.. لكن ثق بي، هذا الملف له شخصية مميزة',
                'welcome.dialog.p2': '...جاري تشغيل النظام',
                'welcome.dialog.p3': 'مرحبًا بك في نظام رميسة - 99% إبداع، 1% كافيين',
                'welcome.dialog.btn.start': 'إبدأ المهمة',
                'welcome.dialog.btn.classic': 'العرض الكلاسيكي',
                'missions.title': 'مركز التحكم — جاهز لللانطلاق ...',
                'missions.sync.text': 'مزامنة النظام: {percent}% مكتمل',
                'missions.sync.disabled': '⚠ المزامنة معطلة: تم تجاوز التسلسل',
                'playground.readonly.warning': '⚠ المزامنة معطلة: تم تجاوز التسلسل',
                'playground.readonly.message': 'لن يتم حفظ تقدمك لأنك تجاوزت المستوى 01.',
                'playground.readonly.reinitialize': '↻ إعادة تهيئة التسلسل',
                'playground.complete.btn': '📡 مزامنة بيانات المهمة',
                'playground.complete.success.title': '✓ تم رفع البيانات بنجاح',
                'playground.complete.success.message': 'تم إكمال المستوى 02! العودة إلى غرفة التحكم...',
                'missions.level1.title': 'المستوى 01: الأصل',
                'missions.level1.desc': 'كل قصة تبدأ من مكان ما.',
                'missions.level2.title': 'المستوى 02: الملعب',
                'missions.level2.desc': 'أين تتحول الأفكار إلى مرئيات',
                'missions.level3.title': 'المستوى 03: صندوق الأدوات',
                'missions.level3.desc': 'اكتشف ترسانتي الإبداعية',
                'missions.level4.title': 'المستوى 04: البوابة النهائية',
                'missions.level4.desc': 'لنتواصل ونبدع معًا',
                'missions.level.status.unlocked': 'الحالة: مفتوح',
                'missions.level.status.locked': 'الحالة: مقفل',
                'missions.tip': '>> نصيحة: أكمل جميع المستويات لفتح النهاية السرية_',
                'origin.title': 'المستوى 01: الأصل',
                'origin.subtitle': 'كل قصة تبدأ من مكان ما، وقصتي تبدأ من سطيف',
                'origin.boot.line1': 'تشغيل نظام تشغيل رميسة v1.0 ...',
                'origin.boot.line2': 'جاري تحميل ذكريات الطفولة...',
                'origin.boot.line3': 'جاري تحميل وحدات الإبداع...',
                'origin.boot.line4': 'النظام جاهز.',
                'origin.welcome': "أهلا وسهلا أيها المسافر. لقد دخلت نظام إبداعي مبني على الخيال والكافيين ☕",
                'origin.help.prompt': "اكتب 'help' لبدء استكشافك_",
                'origin.help.title': 'الأوامر المتاحة:',
                'origin.help.whoami': '[1] whoami      → تعرف على من وراء النظام',
                'origin.help.origin': '[2] origin      → اكتشف أين بدأت الحكاية',
                'origin.help.spark': '[3] spark       → لحظة اشتعال الإبداع',
                'origin.help.skills': '[4] skills      → ما يشغل عملية تصميمي',
                'origin.help.toolkit': '[5] toolkit     → أدواتي الإبداعية المفضلة',
                'origin.help.contact': '[6] contact     → تواصل معي',
                'origin.help.lang': '[7] lang        → تغيير لغة النظام',
                'origin.help.exit': '[8] exit        → العودة إلى غرفة التحكم',
                'origin.help.clear': '[9] clear       → امسح شاشة الطرفية',
                'origin.whoami': "أنا رميسة — مصممة أترجم الأفكار إلى مشاعر،\nوالمشاعر إلى رسوميات.\nمدفوعة بالفضول والألوان وبعض الفوضى المنظمة ✨",
                'origin.origin': "كل قصة تبدأ من مكان ما... قصتي بدأت من سطيف، الجزائر 🇩🇿\nمن الرسم على دفاتري إلى تصميم هويات ماركات كاملة —\nرحلتي لم تكن مخططة أبداً، فقط مبدعة بشغف.",
                'origin.spark': "الشرارة؟\nربما أول مرة أدركت أن التصميم يمكنه أن يجعل الناس *يشعرون*.\nمنذ ذلك الحين، أنا أطارد هذا الشعور — بكسل واحد في كل مرة.",
                'origin.skills.title': 'المهارات المكتشفة:',
                'origin.skills.list': '- الهوية البصرية والتصميم الشامل\n- تصميم وسائل التواصل الاجتماعي\n- الفن المفاهيمي والرسوم التوضيحية\n- سرد القصص من خلال الرسوميات\n- استكشاف التصميم المحسّن بالذكاء الاصطناعي 🤖',
                'origin.toolkit.title': 'صندوق الأدوات جاهز:',
                'origin.toolkit.list': '- Adobe Illustrator\n- Photoshop\n- Figma\n- After Effects\n- ChatGPT + Midjourney (رفاقي في الذكاء الاصطناعي ⚡)',
                'origin.contact': "لنتواصل ونبدع شيئاً لا يُنسى 💫\nالبريد الإلكتروني: roumaissaks1997@gmail.com\nLinktree: linktr.ee/roumaissou19",
                'origin.exit': 'العودة إلى غرفة التحكم...\nمزامنة النظام: 25% مكتملة.',
                'origin.error': 'الأمر غير موجود.\nحتى وحدة الإبداع الخاصة بي لم تستطع معالجة ذلك.\nجرب \'help\' قبل أن أبدأ في التخمين 🤔',
                'origin.easter.coffee': '☕ تخمير الإبداع... تمّ. +15% إلهام.',
                'origin.lang.title': 'نظام اختيار اللغة',
                'origin.lang.available': 'اللغات المتاحة:',
                'origin.lang.current': 'اللغة الحالية: {lang}',
                'origin.lang.set': 'تم تغيير اللغة إلى: {lang}',
                'origin.lang.notavailable': 'اللغة \'{lang}\' غير متاحة بعد.\nاللغات المتاحة: en, fr, ar, it',
                'origin.lang.usage': 'الاستخدام: lang [رمز_اللغة]\nمثال: lang ar (للتبديل إلى العربية)',
                'origin.lang.prompt': 'اكتب اسم اللغة أو الرمز (أو أي أمر لإلغاء):',
                'origin.lang.cancelled': 'تم إلغاء اختيار اللغة.',
                'playground.title': 'المستوى 02: الملعب',
                'playground.subtitle': 'أين تتحول الأفكار إلى مرئيات',
                'level2.locked.title': 'المستوى_02_مقفل.exe',
                'level2.locked.message': 'أكمل المستوى 01 أولاً لفتح التجربة الكاملة!',
                'level2.locked.submessage': 'استكشف الأصل لاكتشاف قصتي وفتح الملعب.',
                'level2.locked.btn.level1': 'اذهب إلى المستوى 01',
                'level2.locked.btn.emergency': 'وصول طوارئ',
                'coming.soon': 'هذا المستوى قادم قريباً! ابق متابعاً...',
                'coming.soon.btn': 'حسناً',
                'footer.text': '© 2025 رميسة كوسة – إصدار طور القصة',
                'system.reset.tooltip': '⚠ إعادة تعيين النظام',
                'system.reset.confirm': 'هل أنت متأكد أنك تريد إعادة تعيين كل التقدم؟',
                'system.reset.btn': 'إعادة تعيين',
                'system.reset.modal.title': 'إعادة_تعيين_النظام.exe',
                'system.reset.modal.message': 'هل أنت متأكد أنك تريد إعادة تعيين كل التقدم؟',
                'system.reset.modal.warning': 'لا يمكن التراجع عن هذا الإجراء.',
                'system.reset.modal.cancel': 'إلغاء',
                'system.reset.modal.confirm': 'إعادة تعيين'
            },
            'it': {
                'lang.toggle.text': 'IT',
                'window.minimize': '-',
                'window.close': 'x',
                'window.title.welcome': '',
                'window.title.missions': 'mission_selector.exe',
                'welcome.logo.p1': 'Sostituisci questo con il tuo logo',
                'welcome.logo.p2': 'Roumaissa',
                'welcome.logo.p3': '(Da my-portfolio-design1.png)',
                'welcome.dialog.title': 'Welcome.exe',
                'welcome.dialog.h1': "Ecco la zona di Roumaissa",
                'welcome.dialog.p1': 'Oh, un altro portfolio di designer tipico... ma credimi, questo ha davvero personalità',
                'welcome.dialog.p2': 'Avvio del sistema ...',
                'welcome.dialog.p3': "Benvenuto nel Sistema Operativo di Roumaissa - 99% creatività, 1% caffeina",
                'welcome.dialog.btn.start': 'Inizia missione',
                'welcome.dialog.btn.classic': 'Vista classica',
                'missions.title': 'Centro di Controllo Missione — Pronto per il Lancio ...',
                'missions.sync.text': 'Sincronizzazione Sistema: {percent}% completata',
                'missions.sync.disabled': '⚠ SINCRONIZZAZIONE DISATTIVATA: Sequenza Bypassata',
                'playground.readonly.warning': '⚠ SINCRONIZZAZIONE DISATTIVATA: Sequenza Bypassata',
                'playground.readonly.message': 'Il tuo progresso NON verrà salvato perché hai saltato il Livello 01.',
                'playground.readonly.reinitialize': '↻ Reinizializza Sequenza',
                'playground.complete.btn': '📡 Sincronizza Dati Missione',
                'playground.complete.success.title': '✓ Dati Caricati con Successo',
                'playground.complete.success.message': 'Livello 02 completato! Ritorno al Centro di Controllo...',
                'missions.level1.title': 'livello 01: l\'origine',
                'missions.level1.desc': 'Ogni storia inizia da qualche parte.',
                'missions.level2.title': 'livello 02: il Parco Giochi',
                'missions.level2.desc': 'Dove le idee si trasformano in immagini',
                'missions.level3.title': 'livello 03: la Cassetta degli Attrezzi',
                'missions.level3.desc': 'Scopri il mio arsenale creativo',
                'missions.level4.title': 'livello 04: il Portale Finale',
                'missions.level4.desc': "Connettiamoci e creiamo insieme",
                'missions.level.status.unlocked': 'Stato: sbloccato',
                'missions.level.status.locked': 'Stato: bloccato',
                'missions.tip': '>> Consiglio: Completa tutti i livelli per sbloccare il finale segreto_',
                'origin.title': 'Livello 01: L\'Origine',
                'origin.subtitle': 'Ogni storia inizia da qualche parte, e la mia inizia a Sétif',
                'origin.boot.line1': 'Avvio del sistema operativo Roumaisa v1.0 ...',
                'origin.boot.line2': 'Caricamento dei ricordi d\'infanzia...',
                'origin.boot.line3': 'Caricamento dei moduli di creatività...',
                'origin.boot.line4': 'Sistema pronto.',
                'origin.welcome': "Benvenuto, viaggiatore. Sei entrato in un sistema creativo costruito con immaginazione e caffeina ☕",
                'origin.help.prompt': "Digita 'help' per iniziare la tua esplorazione_",
                'origin.help.title': 'Comandi disponibili:',
                'origin.help.whoami': 'whoami      → Scopri chi c\'è dietro il sistema',
                'origin.help.origin': 'origin      → Scopri dove tutto è iniziato',
                'origin.help.spark': 'spark       → Il momento in cui la creatività si è accesa',
                'origin.help.skills': 'skills      → Cosa alimenta il mio processo di progettazione',
                'origin.help.toolkit': 'toolkit     → Le mie armi creative preferite',
                'origin.help.contact': 'contact     → Contattami',
                'origin.help.lang': 'lang        → Cambia la lingua del sistema',
                'origin.help.exit': 'exit        → Ritorno al Centro di Controllo Missioni',
                'origin.help.clear': 'clear       → Cancella lo schermo del terminale',
                'origin.whoami': "Sono Roumaisa — una designer che traduce le idee in emozioni,\ne le emozioni in grafica.\nAlimentata da curiosità, colore e un pizzico di caos organizzato ✨",
                'origin.origin': "Ogni storia inizia da qualche parte… la mia è iniziata a Sétif, Algeria 🇩🇿\nDal disegno su quaderni alla progettazione di identità di marca complete —\nil mio viaggio non è mai stato pianificato, solo creato appassionatamente.",
                'origin.spark': "La scintilla?\nProbabilmente la prima volta che ho capito che il design potrebbe far *sentire* le persone.\nDa allora, sto inseguendo quel sentimento — un pixel alla volta.",
                'origin.skills.title': 'Competenze rilevate:',
                'origin.skills.list': '- Branding e Identità Visiva\n- Design dei Social Media\n- Concept Art e Illustrazione\n- Storytelling attraverso la grafica\n- Esplorazione di design potenziata dall\'IA 🤖',
                'origin.toolkit.title': 'Kit di strumenti inizializzato:',
                'origin.toolkit.list': '- Adobe Illustrator\n- Photoshop\n- Figma\n- After Effects\n- ChatGPT + Midjourney (i miei compagni IA ⚡)',
                'origin.contact': "Connettiamoci e creiamo qualcosa di indimenticabile 💫\nEmail: roumaissaks1997@gmail.com\nLinktree: linktr.ee/roumaissou19",
                'origin.exit': 'Ritorno al Centro di Controllo Missioni...\nSincronizzazione del sistema: 25% completata.',
                'origin.error': 'Comando non trovato.\nNeanche il mio modulo di creatività ha potuto elaborarlo.\nProva \'help\' prima che cominci a indovinare 🤔',
                'origin.easter.coffee': '☕ Preparazione della creatività... Fatto. +15% ispirazione.',
                'origin.lang.title': 'Sistema di Selezione Lingua',
                'origin.lang.available': 'Lingue disponibili:',
                'origin.lang.current': 'Lingua corrente: {lang}',
                'origin.lang.set': 'Lingua cambiata in: {lang}',
                'origin.lang.notavailable': 'La lingua \'{lang}\' non è ancora disponibile.\nLingue disponibili: en, fr, ar, it',
                'origin.lang.usage': 'Utilizzo: lang [codice_lingua]\nEsempio: lang it (per passare all\'italiano)',
                'origin.lang.prompt': 'Digita il nome o il codice della lingua (o qualsiasi comando per annullare):',
                'origin.lang.cancelled': 'Selezione lingua annullata.',
                'playground.title': 'Livello 02: Il Parco Giochi',
                'playground.subtitle': 'Dove le idee si trasformano in immagini',
                'level2.locked.title': 'livello_02_bloccato.exe',
                'level2.locked.message': 'Completa il Livello 01 prima per sbloccare l\'esperienza completa!',
                'level2.locked.submessage': 'Esplora L\'Origine per scoprire la mia storia e sbloccare Il Parco Giochi.',
                'level2.locked.btn.level1': 'Vai al Livello 01',
                'level2.locked.btn.emergency': 'Accesso di Emergenza',
                'coming.soon': 'Questo livello arriva presto! Rimani sintonizzato...',
                'coming.soon.btn': 'OK',
                'footer.text': '© 2025 Roumaissa Koussa – edizione story mode',
                'system.reset.tooltip': '⚠ Reimposta Sistema',
                'system.reset.confirm': 'Sei sicuro di voler reimpostare tutto il progresso?',
                'system.reset.btn': 'Reset',
                'system.reset.modal.title': 'reimposta_sistema.exe',
                'system.reset.modal.message': 'Sei sicuro di voler reimpostare tutto il progresso?',
                'system.reset.modal.warning': 'Questa azione non può essere annullata.',
                'system.reset.modal.cancel': 'Annulla',
                'system.reset.modal.confirm': 'Reimposta'
            }
        };

        const languages = ['en', 'fr', 'ar', 'it'];
        let currentLang = 'en';
        // Global state: track if user entered via Emergency Access (Read-Only Mode)
        let isReadOnlyMode = false;

        document.addEventListener('DOMContentLoaded', () => {
            // Page Elements
            const pageWelcome = document.getElementById('page-welcome');
            const pageMissions = document.getElementById('page-missions');
            const windowTitleText = document.getElementById('window-title-text');

            // Button Elements
            const startMissionBtn = document.getElementById('start-mission-btn');
            const classicViewBtn = document.getElementById('classic-view-btn');
            const homeBtn = document.getElementById('home-btn');
            const themeToggleBtn = document.getElementById('theme-toggle');
            const langToggleBtn = document.getElementById('lang-toggle-btn');

            // Icon Elements
            const iconSun = document.getElementById('icon-sun');
            const iconMoon = document.getElementById('icon-moon');

            // --- Page Navigation ---
            function showWelcomePage() {
                // Hide all pages first (one window at a time)
                pageMissions.classList.add('hidden');
                pageOrigin.classList.add('hidden');
                if (pagePlayground) pagePlayground.classList.add('hidden');
                // Show welcome page
                pageWelcome.classList.remove('hidden');
                windowTitleText.dataset.translateKey = 'window.title.welcome';
                updateWindowTitle(); // Update title on page change
            }

            // Update progress bar and sync text based on unlocked levels
            function updateProgress() {
                const progressBar = document.querySelector('.progress-bar');
                const segments = Array.from(document.querySelectorAll('.progress-bar-segment'));
                const completedCount = document.querySelectorAll('.level-card.completed').length;
                const percent = completedCount * 25; // 4 levels -> 25% each

                // Check if we're in Read-Only Mode (Emergency Access)
                if (isReadOnlyMode) {
                    // Apply read-only styling
                    if (progressBar) {
                        progressBar.classList.add('read-only');
                    }
                    // Update segments to show disabled state
                    segments.forEach((seg) => {
                        seg.classList.remove('filled');
                    });
                    // Update the sync text to show disabled message
                    const el = document.querySelector('[data-translate-key="missions.sync.text"]');
                    if (el) {
                        const disabledText = (translations[currentLang] && translations[currentLang]['missions.sync.disabled']) || '⚠ SYNC DISABLED: Sequence Bypassed';
                        el.textContent = disabledText;
                    }
                } else {
                    // Normal mode - remove read-only styling
                    if (progressBar) {
                        progressBar.classList.remove('read-only');
                    }
                    // Update segments fill
                    segments.forEach((seg, idx) => {
                        if (idx < completedCount) seg.classList.add('filled');
                        else seg.classList.remove('filled');
                    });
                    // Update the sync text using translation template {percent}
                    const el = document.querySelector('[data-translate-key="missions.sync.text"]');
                    if (el) {
                        const template = (translations[currentLang] && translations[currentLang]['missions.sync.text']) || '';
                        el.textContent = template.replace('{percent}', percent);
                    }
                }
            }

            function showMissionsPage() {
                // Hide all pages first (one window at a time)
                pageWelcome.classList.add('hidden');
                pageOrigin.classList.add('hidden');
                if (pagePlayground) pagePlayground.classList.add('hidden');
                // Show missions page
                pageMissions.classList.remove('hidden');
                windowTitleText.dataset.translateKey = 'window.title.missions';
                updateWindowTitle(); // Update title on page change
                // Reset read-only mode when returning to missions (normal flow)
                isReadOnlyMode = false;
                // Load saved progress from localStorage
                loadProgressFromStorage();
                updateProgress();
            }

            // Load progress from localStorage on page load
            function loadProgressFromStorage() {
                // Load Level 01 completion
                if (localStorage.getItem('level1Completed') === 'true') {
                    const level1Card = document.getElementById('level-1-card');
                    if (level1Card) {
                        level1Card.classList.add('completed');
                        if (level1Card.classList.contains('locked')) {
                            level1Card.classList.remove('locked');
                            level1Card.classList.add('unlocked');
                            const statusEl = level1Card.querySelector('.level-status');
                            if (statusEl) {
                                statusEl.textContent = translations[currentLang]['missions.level.status.unlocked'] || 'Status: unlocked';
                                statusEl.classList.remove('locked');
                                statusEl.classList.add('unlocked');
                            }
                        }
                    }
                    // Unlock Level 02
                    const level2Card = document.getElementById('level-2-card');
                    if (level2Card) {
                        level2Card.setAttribute('data-unlocked', 'true');
                    }
                }
                // Load Level 02 completion
                if (localStorage.getItem('level2Completed') === 'true') {
                    const level2Card = document.getElementById('level-2-card');
                    if (level2Card) {
                        level2Card.classList.add('completed');
                        if (level2Card.classList.contains('locked')) {
                            level2Card.classList.remove('locked');
                            level2Card.classList.add('unlocked');
                            const statusEl = level2Card.querySelector('.level-status');
                            if (statusEl) {
                                statusEl.textContent = translations[currentLang]['missions.level.status.unlocked'] || 'Status: unlocked';
                                statusEl.classList.remove('locked');
                                statusEl.classList.add('unlocked');
                            }
                        }
                    }
                    // Unlock Level 03
                    const level3Card = document.getElementById('level-3-card');
                    if (level3Card) {
                        level3Card.classList.remove('locked');
                        level3Card.classList.add('unlocked');
                        const statusEl = level3Card.querySelector('.level-status');
                        if (statusEl) {
                            statusEl.textContent = translations[currentLang]['missions.level.status.unlocked'] || 'Status: unlocked';
                            statusEl.classList.remove('locked');
                            statusEl.classList.add('unlocked');
                        }
                    }
                }
            }

            // Complete Level 02 function
            function completeLevel02() {
                // Show success popup
                const successPopup = document.createElement('div');
                successPopup.className = 'success-popup';
                successPopup.innerHTML = `
                    <h3 data-translate-key="playground.complete.success.title">✓ Data Uploaded Successfully</h3>
                    <p data-translate-key="playground.complete.success.message">Level 02 completed! Returning to Mission Control...</p>
                `;
                document.body.appendChild(successPopup);

                // Translate popup text
                const titleEl = successPopup.querySelector('[data-translate-key="playground.complete.success.title"]');
                const messageEl = successPopup.querySelector('[data-translate-key="playground.complete.success.message"]');
                if (titleEl && translations[currentLang] && translations[currentLang]['playground.complete.success.title']) {
                    titleEl.textContent = translations[currentLang]['playground.complete.success.title'];
                }
                if (messageEl && translations[currentLang] && translations[currentLang]['playground.complete.success.message']) {
                    messageEl.textContent = translations[currentLang]['playground.complete.success.message'];
                }

                // Mark Level 02 as completed
                const level2Card = document.getElementById('level-2-card');
                if (level2Card) {
                    level2Card.classList.add('completed');
                    if (level2Card.classList.contains('locked')) {
                        level2Card.classList.remove('locked');
                        level2Card.classList.add('unlocked');
                        const statusEl = level2Card.querySelector('.level-status');
                        if (statusEl) {
                            statusEl.textContent = translations[currentLang]['missions.level.status.unlocked'] || 'Status: unlocked';
                            statusEl.classList.remove('locked');
                            statusEl.classList.add('unlocked');
                        }
                    }
                }

                // Unlock Level 03
                const level3Card = document.getElementById('level-3-card');
                if (level3Card) {
                    level3Card.classList.remove('locked');
                    level3Card.classList.add('unlocked');
                    const statusEl = level3Card.querySelector('.level-status');
                    if (statusEl) {
                        statusEl.textContent = translations[currentLang]['missions.level.status.unlocked'] || 'Status: unlocked';
                        statusEl.classList.remove('locked');
                        statusEl.classList.add('unlocked');
                    }
                }

                // Save to localStorage
                localStorage.setItem('level2Completed', 'true');

                // Update progress
                updateProgress();

                // Hide complete button
                const completeBtn = document.getElementById('complete-level-btn');
                if (completeBtn) {
                    completeBtn.classList.add('hidden');
                }

                // Redirect to Mission Control after 2 seconds
                setTimeout(() => {
                    successPopup.remove();
                    showMissionsPage();
                }, 2000);
            }

            // PAGE 3: Origin Terminal
            const pageOrigin = document.getElementById('page-origin');
            const terminalOutput = document.getElementById('terminal-output');
            const terminalInput = document.getElementById('terminal-input');
            const homeBtnOrigin = document.getElementById('home-btn-origin');

            // Language selection mode
            let isLanguageSelectionMode = false;

            // Language mapping - all possible ways to write each language
            const languageMap = {
                'en': ['en', 'english', 'anglais', 'inglés', 'inglese', 'انجليزي', 'انجليزية', 'إنجليزي', 'إنجليزية', 'eng', 'ang', 'inglish', 'inglish', 'انجليزيه'],
                'fr': ['fr', 'french', 'français', 'francais', 'frances', 'francese', 'فرنسي', 'فرنسية', 'franco', 'france', 'frensh', 'فرنسيه'],
                'ar': ['ar', 'arabic', 'arabe', 'arabo', 'árabe', 'عربي', 'عربية', 'العربية', 'العربي', 'arab', 'ara', 'arabik', 'عربيه', 'عربى'],
                'it': ['it', 'italian', 'italien', 'italiano', 'إيطالي', 'ايطالي', 'إيطالية', 'ايطالية', 'italia', 'italy', 'italien', 'ايطاليه']
            };

            function showOriginPage() {
                // Hide all pages first (one window at a time)
                pageWelcome.classList.add('hidden');
                pageMissions.classList.add('hidden');
                if (pagePlayground) pagePlayground.classList.add('hidden');
                // Show origin page
                pageOrigin.classList.remove('hidden');
                windowTitleText.dataset.translateKey = 'window.title.missions'; // Keep same title
                updateWindowTitle();
                // Focus on input and start boot sequence
                setTimeout(() => terminalInput.focus(), 100);
                if (terminalOutput.textContent.trim() === '') {
                    startBootSequence();
                }
            }

            function showMissionsPageFromOrigin() {
                // Hide all pages first (one window at a time)
                pageOrigin.classList.add('hidden');
                pageWelcome.classList.add('hidden');
                if (pagePlayground) pagePlayground.classList.add('hidden');
                // Show missions page
                pageMissions.classList.remove('hidden');
            }

            // PAGE 4: Playground File Explorer
            const pagePlayground = document.getElementById('page-playground');
            const homeBtnPlayground = document.getElementById('home-btn-playground');

            // Portfolio Data Structure
            const portfolioData = {
                'C:\\Roumaissa\\Portfolio': {
                    type: 'folder',
                    items: [
                        { name: 'Branding', type: 'folder', path: 'C:\\Roumaissa\\Portfolio\\Branding' },
                        { name: 'Social Media', type: 'folder', path: 'C:\\Roumaissa\\Portfolio\\Social Media' },
                        { name: 'Web Design', type: 'folder', path: 'C:\\Roumaissa\\Portfolio\\Web Design' },
                        { name: 'Illustration', type: 'folder', path: 'C:\\Roumaissa\\Portfolio\\Illustration' }
                    ]
                },
                'C:\\Roumaissa\\Portfolio\\Branding': {
                    type: 'folder',
                    items: [
                        { name: 'brand_identity.brand', type: 'file', image: 'https://via.placeholder.com/400x300/00A2E8/FFFFFF?text=Brand+Identity', date: '2024-01-15', client: 'Tech Startup', category: 'Branding', link: '#' },
                        { name: 'logo_design.brand', type: 'file', image: 'https://via.placeholder.com/400x300/F99D1C/FFFFFF?text=Logo+Design', date: '2024-02-20', client: 'Local Business', category: 'Branding', link: '#' },
                        { name: 'corporate_identity.brand', type: 'file', image: 'https://via.placeholder.com/400x300/00A2E8/FFFFFF?text=Corporate+Identity', date: '2024-03-10', client: 'Enterprise', category: 'Branding', link: '#' }
                    ]
                },
                'C:\\Roumaissa\\Portfolio\\Social Media': {
                    type: 'folder',
                    items: [
                        { name: 'instagram_campaign.insta', type: 'file', image: 'https://via.placeholder.com/400x300/F99D1C/FFFFFF?text=Instagram+Campaign', date: '2024-04-05', client: 'Fashion Brand', category: 'Social Media', link: '#' },
                        { name: 'facebook_ads.social', type: 'file', image: 'https://via.placeholder.com/400x300/00A2E8/FFFFFF?text=Facebook+Ads', date: '2024-05-12', client: 'E-commerce', category: 'Social Media', link: '#' },
                        { name: 'twitter_banner.social', type: 'file', image: 'https://via.placeholder.com/400x300/F99D1C/FFFFFF?text=Twitter+Banner', date: '2024-06-18', client: 'Tech Company', category: 'Social Media', link: '#' }
                    ]
                },
                'C:\\Roumaissa\\Portfolio\\Web Design': {
                    type: 'folder',
                    items: [
                        { name: 'landing_page.web', type: 'file', image: 'https://via.placeholder.com/400x300/00A2E8/FFFFFF?text=Landing+Page', date: '2024-07-22', client: 'SaaS Company', category: 'Web Design', link: '#' },
                        { name: 'dashboard_ui.web', type: 'file', image: 'https://via.placeholder.com/400x300/F99D1C/FFFFFF?text=Dashboard+UI', date: '2024-08-30', client: 'Startup', category: 'Web Design', link: '#' },
                        { name: 'mobile_app.web', type: 'file', image: 'https://via.placeholder.com/400x300/00A2E8/FFFFFF?text=Mobile+App', date: '2024-09-15', client: 'Mobile App', category: 'Web Design', link: '#' }
                    ]
                },
                'C:\\Roumaissa\\Portfolio\\Illustration': {
                    type: 'folder',
                    items: [
                        { name: 'character_design.ill', type: 'file', image: 'https://via.placeholder.com/400x300/F99D1C/FFFFFF?text=Character+Design', date: '2024-10-01', client: 'Game Studio', category: 'Illustration', link: '#' },
                        { name: 'icon_set.ill', type: 'file', image: 'https://via.placeholder.com/400x300/00A2E8/FFFFFF?text=Icon+Set', date: '2024-11-10', client: 'App Developer', category: 'Illustration', link: '#' },
                        { name: 'vector_art.ill', type: 'file', image: 'https://via.placeholder.com/400x300/F99D1C/FFFFFF?text=Vector+Art', date: '2024-12-05', client: 'Design Agency', category: 'Illustration', link: '#' }
                    ]
                }
            };

            let currentPath = 'C:\\Roumaissa\\Portfolio';
            let pathHistory = ['C:\\Roumaissa\\Portfolio'];
            let historyIndex = 0;
            let currentZoom = 100;

            function showPlaygroundPage(emergencyAccess = false) {
                // Set read-only mode if accessed via Emergency Access
                isReadOnlyMode = emergencyAccess;

                // Hide all pages first (one window at a time)
                pageWelcome.classList.add('hidden');
                pageMissions.classList.add('hidden');
                pageOrigin.classList.add('hidden');
                // Show playground page
                if (pagePlayground) {
                    pagePlayground.classList.remove('hidden');
                    windowTitleText.dataset.translateKey = 'window.title.missions';
                    updateWindowTitle();
                    loadFolder(currentPath);
                    // Update progress bar to reflect read-only state
                    updateProgress();
                    // Show/hide read-only warning
                    const readOnlyWarning = document.getElementById('read-only-warning');
                    if (readOnlyWarning) {
                        if (isReadOnlyMode) {
                            readOnlyWarning.classList.remove('hidden');
                        } else {
                            readOnlyWarning.classList.add('hidden');
                        }
                    }
                    // Show/hide complete level button (only in normal mode)
                    const completeBtn = document.getElementById('complete-level-btn');
                    if (completeBtn) {
                        if (isReadOnlyMode) {
                            completeBtn.classList.add('hidden');
                        } else {
                            // Check if Level 02 is already completed
                            const isCompleted = localStorage.getItem('level2Completed') === 'true';
                            if (!isCompleted) {
                                completeBtn.classList.remove('hidden');
                            } else {
                                completeBtn.classList.add('hidden');
                            }
                        }
                    }
                }
            }

            function loadFolder(path) {
                // Show loading
                const loadingEl = document.getElementById('explorer-loading');
                loadingEl.classList.remove('hidden');

                // Reset loading animation
                const progressEl = loadingEl.querySelector('.loading-progress');
                progressEl.style.width = '0%';
                setTimeout(() => {
                    progressEl.style.width = '100%';
                }, 10);

                setTimeout(() => {
                    loadingEl.classList.add('hidden');

                    // Update address bar
                    const addressInput = document.getElementById('explorer-address');
                    addressInput.value = path;

                    // Update active tree item
                    document.querySelectorAll('.tree-item').forEach(item => {
                        item.classList.remove('active');
                        if (item.dataset.path === path) {
                            item.classList.add('active');
                        }
                    });

                    // Load folder content
                    const folder = portfolioData[path];
                    const grid = document.getElementById('explorer-grid');
                    grid.innerHTML = '';

                    if (folder && folder.items) {
                        folder.items.forEach(item => {
                            const itemEl = document.createElement('div');
                            itemEl.className = 'explorer-item';
                            itemEl.dataset.path = item.path || path;
                            itemEl.dataset.type = item.type;

                            if (item.type === 'folder') {
                                itemEl.innerHTML = `
                                    <div class="explorer-item-icon">📁</div>
                                    <div class="explorer-item-label">${item.name}</div>
                                `;
                                itemEl.addEventListener('click', () => {
                                    navigateToFolder(item.path);
                                });
                            } else {
                                const iconMap = {
                                    'brand': '🎨',
                                    'insta': '📱',
                                    'social': '📲',
                                    'web': '🌐',
                                    'ill': '✏️'
                                };
                                const ext = item.name.split('.').pop();
                                const icon = iconMap[ext] || '📄';

                                itemEl.innerHTML = `
                                    <div class="explorer-item-icon">${icon}</div>
                                    <div class="explorer-item-label">${item.name}</div>
                                `;
                                itemEl.addEventListener('click', () => {
                                    openProject(item);
                                });
                            }

                            grid.appendChild(itemEl);
                        });
                    }

                    // Update navigation buttons
                    updateNavigationButtons();
                }, 500);
            }

            function navigateToFolder(path) {
                if (portfolioData[path]) {
                    // Add to history if not going back/forward
                    if (path !== pathHistory[historyIndex]) {
                        pathHistory = pathHistory.slice(0, historyIndex + 1);
                        pathHistory.push(path);
                        historyIndex = pathHistory.length - 1;
                    }
                    currentPath = path;
                    loadFolder(path);
                }
            }

            function updateNavigationButtons() {
                const backBtn = document.getElementById('explorer-back');
                const forwardBtn = document.getElementById('explorer-forward');
                const upBtn = document.getElementById('explorer-up');

                backBtn.disabled = historyIndex <= 0;
                forwardBtn.disabled = historyIndex >= pathHistory.length - 1;

                const parentPath = currentPath.split('\\').slice(0, -1).join('\\');
                upBtn.disabled = !portfolioData[parentPath] || parentPath === 'C:\\Roumaissa';
            }

            function openProject(project) {
                const modal = document.getElementById('project-viewer-modal');
                const viewerImage = document.getElementById('viewer-image');
                const viewerTitle = document.getElementById('viewer-title');
                const propertyName = document.getElementById('property-name');
                const propertyDate = document.getElementById('property-date');
                const propertyClient = document.getElementById('property-client');
                const propertyCategory = document.getElementById('property-category');
                const propertyLink = document.getElementById('property-link');

                viewerImage.src = project.image;
                viewerTitle.textContent = project.name;
                propertyName.textContent = project.name.replace(/\.[^.]+$/, '');
                propertyDate.textContent = project.date;
                propertyClient.textContent = project.client;
                propertyCategory.textContent = project.category;
                propertyLink.href = project.link;

                currentZoom = 100;
                viewerImage.style.transform = `scale(${currentZoom / 100})`;

                modal.classList.remove('hidden');
            }

            function closeProjectViewer() {
                const modal = document.getElementById('project-viewer-modal');
                modal.classList.add('hidden');
            }

            // File Explorer Event Handlers
            if (pagePlayground) {
                document.getElementById('explorer-back')?.addEventListener('click', () => {
                    if (historyIndex > 0) {
                        historyIndex--;
                        currentPath = pathHistory[historyIndex];
                        loadFolder(currentPath);
                    }
                });

                document.getElementById('explorer-forward')?.addEventListener('click', () => {
                    if (historyIndex < pathHistory.length - 1) {
                        historyIndex++;
                        currentPath = pathHistory[historyIndex];
                        loadFolder(currentPath);
                    }
                });

                document.getElementById('explorer-up')?.addEventListener('click', () => {
                    const parentPath = currentPath.split('\\').slice(0, -1).join('\\');
                    if (portfolioData[parentPath] && parentPath !== 'C:\\Roumaissa') {
                        navigateToFolder(parentPath);
                    }
                });

                document.querySelectorAll('.tree-item').forEach(item => {
                    item.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const path = item.dataset.path;
                        if (path && portfolioData[path]) {
                            navigateToFolder(path);
                        }
                    });
                });

                document.getElementById('viewer-close-btn')?.addEventListener('click', closeProjectViewer);
                document.getElementById('viewer-properties-btn')?.addEventListener('click', () => {
                    const properties = document.getElementById('viewer-properties');
                    properties.classList.toggle('hidden');
                });

                document.getElementById('viewer-zoom-in')?.addEventListener('click', () => {
                    currentZoom = Math.min(currentZoom + 25, 200);
                    document.getElementById('viewer-image').style.transform = `scale(${currentZoom / 100})`;
                });

                document.getElementById('viewer-zoom-out')?.addEventListener('click', () => {
                    currentZoom = Math.max(currentZoom - 25, 50);
                    document.getElementById('viewer-image').style.transform = `scale(${currentZoom / 100})`;
                });

                document.getElementById('viewer-rotate')?.addEventListener('click', () => {
                    const img = document.getElementById('viewer-image');
                    const currentRotate = img.style.transform.match(/rotate\((\d+)deg\)/) ?
                        parseInt(img.style.transform.match(/rotate\((\d+)deg\)/)[1]) : 0;
                    const newRotate = (currentRotate + 90) % 360;
                    img.style.transform = `${img.style.transform.replace(/rotate\(\d+deg\)/, '')} rotate(${newRotate}deg)`.trim();
                });

                // Re-Initialize Button Handler (for Read-Only Mode)
                const reinitializeBtn = document.getElementById('reinitialize-btn');
                if (reinitializeBtn) {
                    reinitializeBtn.addEventListener('click', () => {
                        // Reset read-only mode
                        isReadOnlyMode = false;
                        // Go back to Level 01 (The Origin)
                        showOriginPage();
                    });
                }

                // Complete Level 02 Button Handler
                const completeLevelBtn = document.getElementById('complete-level-btn');
                if (completeLevelBtn) {
                    completeLevelBtn.addEventListener('click', () => {
                        if (!isReadOnlyMode) {
                            completeLevel02();
                        }
                    });
                }

                homeBtnPlayground?.addEventListener('click', () => {
                    showMissionsPage();
                });

                // Close modal on outside click
                document.getElementById('project-viewer-modal')?.addEventListener('click', (e) => {
                    if (e.target.id === 'project-viewer-modal') {
                        closeProjectViewer();
                    }
                });
            }

            // Terminal Boot Sequence
            function startBootSequence() {
                terminalOutput.innerHTML = '';
                const lines = [
                    { key: 'origin.boot.line1', delay: 0 },
                    { key: 'origin.boot.line2', delay: 800 },
                    { key: 'origin.boot.line3', delay: 1600 },
                    { key: 'origin.boot.line4', delay: 2400 }
                ];

                lines.forEach(({ key, delay }) => {
                    setTimeout(() => {
                        const text = translations[currentLang][key] || '';
                        addTerminalLine(text);
                    }, delay);
                });

                setTimeout(() => {
                    addTerminalLine('');
                    addTerminalLine(translations[currentLang]['origin.welcome'] || '');
                    addTerminalLine(translations[currentLang]['origin.help.prompt'] || '');
                }, 3200);
            }

            function addTerminalLine(text, isCommand = false) {
                const line = document.createElement('div');
                line.className = 'terminal-line';
                if (isCommand) {
                    line.innerHTML = `<span class="terminal-prompt">>>> </span><span class="terminal-command">${escapeHtml(text)}</span>`;
                } else {
                    line.textContent = text;
                }
                terminalOutput.appendChild(line);
                terminalOutput.scrollTop = terminalOutput.scrollHeight;
            }

            function escapeHtml(text) {
                const map = {
                    '&': '&amp;',
                    '<': '&lt;',
                    '>': '&gt;',
                    '"': '&quot;',
                    "'": '&#039;'
                };
                return text.replace(/[&<>"']/g, m => map[m]);
            }

            // Function to detect language from any input
            function detectLanguage(input) {
                const normalizedInput = input.trim().toLowerCase();
                for (const [langCode, variants] of Object.entries(languageMap)) {
                    if (variants.includes(normalizedInput)) {
                        return langCode;
                    }
                }
                return null;
            }

            // Terminal Command Handler
            function processCommand(input) {
                const cmd = input.trim().toLowerCase();

                // If in language selection mode, check if input is a language or another command
                if (isLanguageSelectionMode) {
                    // Check if it's another command (not a language selection)
                    const isOtherCommand = ['help', 'whoami', 'origin', 'spark', 'skills', 'toolkit', 'contact', 'exit', 'clear', 'coffee'].includes(cmd);

                    if (isOtherCommand) {
                        // Cancel language selection mode and process the command normally
                        isLanguageSelectionMode = false;
                        addTerminalLine(input, true);
                        addTerminalLine('');
                        addTerminalLine(translations[currentLang]['origin.lang.cancelled'] || 'Language selection cancelled.');
                        addTerminalLine('');
                        // Process the command (will be handled below)
                    } else {
                        // Try to detect language
                        const detectedLang = detectLanguage(input);
                        if (detectedLang) {
                            addTerminalLine(input, true);
                            addTerminalLine('');
                            setLanguage(detectedLang);
                            const langNames = { 'en': 'English', 'fr': 'Français', 'ar': 'العربية', 'it': 'Italiano' };
                            const langName = langNames[detectedLang] || detectedLang;
                            addTerminalLine((translations[detectedLang]['origin.lang.set'] || '').replace('{lang}', langName));
                            isLanguageSelectionMode = false;
                            addTerminalLine('');
                            return;
                        } else {
                            // Invalid language input - try to suggest similar
                            addTerminalLine(input, true);
                            addTerminalLine('');
                            const inputLower = input.toLowerCase();
                            let suggestion = '';

                            // Simple suggestion logic
                            if (inputLower.includes('eng') || inputLower.includes('angl')) {
                                suggestion = '\nDid you mean: english, en?';
                            } else if (inputLower.includes('fren') || inputLower.includes('fran')) {
                                suggestion = '\nDid you mean: french, fr, français?';
                            } else if (inputLower.includes('arab') || inputLower.includes('عرب')) {
                                suggestion = '\nDid you mean: arabic, ar, عربية?';
                            } else if (inputLower.includes('ital') || inputLower.includes('ايطال')) {
                                suggestion = '\nDid you mean: italian, it, italiano?';
                            }

                            addTerminalLine((translations[currentLang]['origin.lang.notavailable'] || '').replace('{lang}', input) + suggestion);
                            addTerminalLine('');
                            addTerminalLine(translations[currentLang]['origin.lang.usage'] || '');
                            addTerminalLine('');
                            return;
                        }
                    }
                } else {
                    addTerminalLine(input, true);
                }

                if (cmd === 'help') {
                    const helpTitle = translations[currentLang]['origin.help.title'] || '';
                    addTerminalLine('');
                    addTerminalLine(helpTitle);
                    addTerminalLine('----------------------------------------------');
                    addTerminalLine(translations[currentLang]['origin.help.whoami'] || '');
                    addTerminalLine(translations[currentLang]['origin.help.origin'] || '');
                    addTerminalLine(translations[currentLang]['origin.help.spark'] || '');
                    addTerminalLine(translations[currentLang]['origin.help.skills'] || '');
                    addTerminalLine(translations[currentLang]['origin.help.toolkit'] || '');
                    addTerminalLine(translations[currentLang]['origin.help.contact'] || '');
                    addTerminalLine(translations[currentLang]['origin.help.lang'] || '');
                    addTerminalLine(translations[currentLang]['origin.help.exit'] || '');
                    addTerminalLine(translations[currentLang]['origin.help.clear'] || '');
                    addTerminalLine('----------------------------------------------');
                } else if (cmd === 'whoami') {
                    addTerminalLine('');
                    addTerminalLine(translations[currentLang]['origin.whoami'] || '');
                } else if (cmd === 'origin') {
                    addTerminalLine('');
                    addTerminalLine(translations[currentLang]['origin.origin'] || '');
                } else if (cmd === 'spark') {
                    addTerminalLine('');
                    addTerminalLine(translations[currentLang]['origin.spark'] || '');
                } else if (cmd === 'skills') {
                    addTerminalLine('');
                    addTerminalLine(translations[currentLang]['origin.skills.title'] || '');
                    addTerminalLine(translations[currentLang]['origin.skills.list'] || '');
                } else if (cmd === 'toolkit') {
                    addTerminalLine('');
                    addTerminalLine(translations[currentLang]['origin.toolkit.title'] || '');
                    addTerminalLine(translations[currentLang]['origin.toolkit.list'] || '');
                } else if (cmd === 'contact') {
                    addTerminalLine('');
                    addTerminalLine(translations[currentLang]['origin.contact'] || '');
                } else if (cmd.startsWith('lang')) {
                    addTerminalLine('');
                    const parts = input.trim().split(/\s+/);
                    if (parts.length === 1) {
                        // Enter interactive language selection mode
                        addTerminalLine(translations[currentLang]['origin.lang.title'] || '');
                        addTerminalLine('==============================================');
                        addTerminalLine(translations[currentLang]['origin.lang.available'] || '');
                        addTerminalLine('');
                        addTerminalLine('  [1] English (en)');
                        addTerminalLine('      Examples: english, anglais, انجليزي');
                        addTerminalLine('');
                        addTerminalLine('  [2] Français (fr)');
                        addTerminalLine('      Examples: french, francais, فرنسي');
                        addTerminalLine('');
                        addTerminalLine('  [3] العربية (ar)');
                        addTerminalLine('      Examples: arabic, arabe, عربية');
                        addTerminalLine('');
                        addTerminalLine('  [4] Italiano (it)');
                        addTerminalLine('      Examples: italian, italien, إيطالي');
                        addTerminalLine('');
                        addTerminalLine('==============================================');
                        const langNames = { 'en': 'English', 'fr': 'Français', 'ar': 'العربية', 'it': 'Italiano' };
                        const currentLangName = langNames[currentLang] || currentLang;
                        addTerminalLine((translations[currentLang]['origin.lang.current'] || '').replace('{lang}', currentLangName));
                        addTerminalLine('');
                        addTerminalLine(translations[currentLang]['origin.lang.prompt'] || 'Type the language name or code (or any command to cancel):');
                        isLanguageSelectionMode = true;
                    } else if (parts.length === 2) {
                        // Direct language change (backward compatibility)
                        const detectedLang = detectLanguage(parts[1]);
                        const langNames = { 'en': 'English', 'fr': 'Français', 'ar': 'العربية', 'it': 'Italiano' };
                        if (detectedLang) {
                            setLanguage(detectedLang);
                            const langName = langNames[detectedLang] || detectedLang;
                            addTerminalLine((translations[detectedLang]['origin.lang.set'] || '').replace('{lang}', langName));
                        } else {
                            addTerminalLine((translations[currentLang]['origin.lang.notavailable'] || '').replace('{lang}', parts[1]));
                        }
                    } else {
                        addTerminalLine(translations[currentLang]['origin.lang.usage'] || '');
                    }
                } else if (cmd === 'clear') {
                    terminalOutput.innerHTML = '';
                    addTerminalLine(translations[currentLang]['origin.welcome'] || '');
                    addTerminalLine(translations[currentLang]['origin.help.prompt'] || '');
                } else if (cmd === 'exit') {
                    addTerminalLine('');
                    addTerminalLine(translations[currentLang]['origin.exit'] || '');
                    // Mark Level 01 as completed and unlock Level 02
                    setTimeout(() => {
                        // Mark Level 01 as completed (for progress) and change to unlocked visually
                        if (level1Card && !level1Card.classList.contains('completed')) {
                            level1Card.classList.add('completed');
                            // Save to localStorage
                            localStorage.setItem('level1Completed', 'true');
                        }
                        // Change Level 01 from locked to unlocked visually
                        if (level1Card && level1Card.classList.contains('locked')) {
                            level1Card.classList.remove('locked');
                            level1Card.classList.add('unlocked');
                            level1Card.querySelector('.level-status').textContent = translations[currentLang]['missions.level.status.unlocked'] || 'Status: unlocked';
                            level1Card.querySelector('.level-status').classList.remove('locked');
                            level1Card.querySelector('.level-status').classList.add('unlocked');
                        }
                        // Unlock Level 02 (internally) but keep it looking locked
                        const levelCard2 = document.getElementById('level-2-card');
                        if (levelCard2 && levelCard2.classList.contains('locked')) {
                            // Add a custom attribute to mark it as unlocked internally
                            levelCard2.setAttribute('data-unlocked', 'true');
                            // Click handler is already added on page load
                        }
                        // Update progress (25% for Level 01 completed)
                        updateProgress();
                        showMissionsPageFromOrigin();
                    }, 1000);
                } else if (cmd === 'coffee') {
                    addTerminalLine('');
                    addTerminalLine(translations[currentLang]['origin.easter.coffee'] || '');
                } else if (cmd !== '') {
                    addTerminalLine('');
                    addTerminalLine(translations[currentLang]['origin.error'] || '');
                }
                addTerminalLine('');
            }

            // Terminal Input Handler
            terminalInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    processCommand(terminalInput.value);
                    terminalInput.value = '';
                }
            });

            startMissionBtn.addEventListener('click', showMissionsPage);
            homeBtn.addEventListener('click', showWelcomePage);
            homeBtnOrigin.addEventListener('click', showMissionsPageFromOrigin);

            // Level 02 Locked Modal Handler
            const level2LockedModal = document.getElementById('level2-locked-modal');
            const closeLevel2LockedBtn = document.getElementById('close-level2-locked-btn');
            const goToLevel1Btn = document.getElementById('go-to-level1-btn');
            const emergencyAccessBtn = document.getElementById('emergency-access-btn');

            function showLevel2LockedModal() {
                level2LockedModal.classList.remove('hidden');
            }

            function hideLevel2LockedModal() {
                level2LockedModal.classList.add('hidden');
            }

            if (closeLevel2LockedBtn) {
                closeLevel2LockedBtn.addEventListener('click', hideLevel2LockedModal);
            }

            if (goToLevel1Btn) {
                goToLevel1Btn.addEventListener('click', () => {
                    hideLevel2LockedModal();
                    showOriginPage();
                });
            }

            if (emergencyAccessBtn) {
                emergencyAccessBtn.addEventListener('click', () => {
                    hideLevel2LockedModal();
                    showPlaygroundPage(true); // Pass true to indicate Emergency Access
                });
            }

            // Close modal when clicking outside
            if (level2LockedModal) {
                level2LockedModal.addEventListener('click', (e) => {
                    if (e.target === level2LockedModal) {
                        hideLevel2LockedModal();
                    }
                });
            }

            // Coming Soon Modal Handler
            const comingSoonModal = document.getElementById('coming-soon-modal');
            const closeComingSoonBtn = document.getElementById('close-coming-soon-btn');
            const okComingSoonBtn = document.getElementById('ok-coming-soon-btn');

            function showComingSoonModal() {
                comingSoonModal.classList.remove('hidden');
            }

            function hideComingSoonModal() {
                comingSoonModal.classList.add('hidden');
            }

            if (closeComingSoonBtn) {
                closeComingSoonBtn.addEventListener('click', hideComingSoonModal);
            }

            if (okComingSoonBtn) {
                okComingSoonBtn.addEventListener('click', hideComingSoonModal);
            }

            // Close modal when clicking outside
            comingSoonModal.addEventListener('click', (e) => {
                if (e.target === comingSoonModal) {
                    hideComingSoonModal();
                }
            });

            // Level 01 Card Click Handler
            const level1Card = document.getElementById('level-1-card');
            if (level1Card) {
                level1Card.addEventListener('click', (e) => {
                    e.preventDefault();
                    // Unlock Level 01 when entered
                    if (level1Card.classList.contains('locked')) {
                        level1Card.classList.remove('locked');
                        level1Card.classList.add('unlocked');
                        level1Card.querySelector('.level-status').textContent = translations[currentLang]['missions.level.status.unlocked'] || 'Status: unlocked';
                        level1Card.querySelector('.level-status').classList.remove('locked');
                        level1Card.querySelector('.level-status').classList.add('unlocked');
                    }
                    showOriginPage();
                });
            }

            // Level 02 Card Click Handler
            const level2Card = document.getElementById('level-2-card');
            if (level2Card) {
                level2Card.addEventListener('click', () => {
                    // Check if level is unlocked
                    if (level2Card.getAttribute('data-unlocked') === 'true' || !level2Card.classList.contains('locked')) {
                        isReadOnlyMode = false; // Normal access - not read-only
                        showPlaygroundPage(false);
                    } else {
                        showLevel2LockedModal();
                    }
                });
            }

            // Level 03 Card Click Handler
            const level3Card = document.getElementById('level-3-card');
            if (level3Card) {
                level3Card.addEventListener('click', () => {
                    // Check if level is unlocked
                    if (level3Card.classList.contains('unlocked') || !level3Card.classList.contains('locked')) {
                        // Level 03 functionality (coming soon for now)
                        showComingSoonModal();
                    } else {
                        showComingSoonModal();
                    }
                });
            }

            // Level 04 Card Click Handler
            const level4Card = document.getElementById('level-4-card');
            if (level4Card) {
                level4Card.addEventListener('click', () => {
                    showComingSoonModal();
                });
            }

            classicViewBtn.addEventListener('click', () => {
                // You can replace this with a link to another page or a modal
                console.log('Classic View button clicked!');
                // Example: window.location.href = '/classic-portfolio.html';
            });

            // --- Theme Toggler ---

            function updateThemeIcons(isDark) {
                if (isDark) {
                    iconSun.classList.add('hidden');
                    iconMoon.classList.remove('hidden');
                } else {
                    iconSun.classList.remove('hidden');
                    iconMoon.classList.add('hidden');
                }
            }

            function toggleTheme() {
                const htmlEl = document.documentElement;
                const isDark = htmlEl.classList.toggle('dark');
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
                updateThemeIcons(isDark);
            }

            function initTheme() {
                const savedTheme = localStorage.getItem('theme');
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

                if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
                    document.documentElement.classList.add('dark');
                    updateThemeIcons(true);
                } else {
                    document.documentElement.classList.remove('dark');
                    updateThemeIcons(false);
                }
            }

            themeToggleBtn.addEventListener('click', toggleTheme);

            // --- Reset System Button ---
            const resetSystemBtn = document.getElementById('reset-system-btn');
            const resetConfirmModal = document.getElementById('reset-confirm-modal');
            const closeResetConfirmBtn = document.getElementById('close-reset-confirm-btn');
            const cancelResetBtn = document.getElementById('cancel-reset-btn');
            const confirmResetBtn = document.getElementById('confirm-reset-btn');

            function showResetConfirmModal() {
                if (resetConfirmModal) {
                    resetConfirmModal.classList.remove('hidden');
                }
            }

            function hideResetConfirmModal() {
                if (resetConfirmModal) {
                    resetConfirmModal.classList.add('hidden');
                }
            }

            function performReset() {
                // Clear all localStorage (including theme and language preferences)
                // But we'll preserve theme and language for better UX
                const savedTheme = localStorage.getItem('theme');
                const savedLang = localStorage.getItem('lang');

                localStorage.clear();

                // Restore theme and language preferences
                if (savedTheme) {
                    localStorage.setItem('theme', savedTheme);
                }
                if (savedLang) {
                    localStorage.setItem('lang', savedLang);
                }

                // Reload the page
                window.location.reload();
            }

            if (resetSystemBtn) {
                resetSystemBtn.addEventListener('click', () => {
                    showResetConfirmModal();
                });
            }

            if (closeResetConfirmBtn) {
                closeResetConfirmBtn.addEventListener('click', hideResetConfirmModal);
            }

            if (cancelResetBtn) {
                cancelResetBtn.addEventListener('click', hideResetConfirmModal);
            }

            if (confirmResetBtn) {
                confirmResetBtn.addEventListener('click', performReset);
            }

            // Close modal when clicking outside
            if (resetConfirmModal) {
                resetConfirmModal.addEventListener('click', (e) => {
                    if (e.target === resetConfirmModal) {
                        hideResetConfirmModal();
                    }
                });
            }

            // --- Language Toggler ---

            function updateWindowTitle() {
                const titleKey = windowTitleText.dataset.translateKey;
                if (titleKey) {
                    windowTitleText.textContent = translations[currentLang][titleKey] || '';
                } else {
                    windowTitleText.textContent = '';
                }
            }

            function setLanguage(lang) {
                if (!languages.includes(lang)) lang = 'en';
                currentLang = lang;

                // Set HTML lang and dir
                document.documentElement.lang = lang;
                document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';

                // Save preference
                localStorage.setItem('lang', lang);

                // Update lang toggle dropdown value
                langToggleBtn.value = lang;

                // Translate all elements with data-translate-key
                document.querySelectorAll('[data-translate-key]').forEach(el => {
                    const key = el.dataset.translateKey;
                    if (translations[lang][key]) {
                        el.textContent = translations[lang][key];
                    }
                });

                // Translate all elements with data-translate-key-attr (for titles/aria-labels)
                document.querySelectorAll('[data-translate-key-attr]').forEach(el => {
                    const attrName = el.dataset.translateKeyAttr;
                    const key = el.dataset.translateKey;
                    if (key && translations[lang][key] && attrName) {
                        el.setAttribute(attrName, translations[lang][key]);
                    }
                });
                document.querySelectorAll('[data-translate-key-attr]').forEach(el => {
                    const key = el.dataset.translateKey;
                    const attr = el.dataset.translateKeyAttr;
                    if (translations[lang][key]) {
                        el.setAttribute(attr, translations[lang][key]);
                    }
                });

                // Update the dynamic window title
                updateWindowTitle();
                // Update progress text/segments (depends on translations/currentLang)
                if (typeof updateProgress === 'function') updateProgress();
            }

            function cycleLanguage() {
                const currentLangIndex = languages.indexOf(currentLang);
                const nextLangIndex = (currentLangIndex + 1) % languages.length;
                const nextLang = languages[nextLangIndex];
                setLanguage(nextLang);
            }

            function initLang() {
                const savedLang = localStorage.getItem('lang');
                setLanguage(savedLang || 'en'); // Default to English
                // Set dropdown to current language
                langToggleBtn.value = currentLang;
            }

            langToggleBtn.addEventListener('change', (e) => {
                setLanguage(e.target.value);
            });

            // --- Initial Load ---
            initLang(); // Initialize language first
            initTheme();
            // Load saved progress on initial page load
            loadProgressFromStorage();
            updateProgress();
            // Show welcome page by default
            showWelcomePage();

        });
    </script>

</body>

</html>