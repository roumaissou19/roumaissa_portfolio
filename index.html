<!DOCTYPE html>
<html lang="en" dir="ltr" class="">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roumaissa's OS</title>
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="favicon.png">
    <!-- Tailwind CSS CDN -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&family=Cairo+Mono:wght@400;700&family=Droid+Arabic+Naskh:wght@400;700&display=swap"
        rel="stylesheet">

    <style>
        /* Custom CSS to match the retro design */
        /* Load local Flamante Cairo fonts */
        @font-face {
            font-family: 'Flamante Cairo';
            src: url('./flamante_cairo/Flamante-Cairo.ttf') format('truetype');
            font-weight: 400;
            font-style: normal;
            font-display: swap;
        }

        @font-face {
            font-family: 'Flamante Cairo';
            src: url('./flamante_cairo/Flamante-Cairo-Bold.ttf') format('truetype');
            font-weight: 700;
            font-style: normal;
            font-display: swap;
        }

        :root {
            --bg-color: #FFEFD5;
            --text-dark: #231F20;
            --border-dark: #231F20;
            --window-blue: #00A2E8;
            --dialog-orange: #F99D1C;
            --level-locked: #FFFFFF;
            --level-unlocked: #F99D1C;
            --level-locked-text: #A0A0A0;
            --level-unlocked-text: #231F20;
            --progress-bar-bg: #FFFFFF;
            --progress-bar-fill: #00A2E8;
        }

        .dark:root {
            --bg-color: #050A14;
            --text-dark: #FFEFD5;
            --border-dark: #FFEFD5;
            --window-blue: #00A2E8;
            --dialog-orange: #F99D1C;
            --level-locked: #0D1520;
            --level-unlocked: #F99D1C;
            --level-locked-text: #B0B0B0;
            --level-unlocked-text: #231F20;
            --progress-bar-bg: #0D1520;
            --progress-bar-fill: #00A2E8;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-dark);
            font-family: 'Cairo', 'Cairo Mono', sans-serif;
            font-size: 20px;
            line-height: 1.6;
        }

        .font-title {
            font-family: 'Cairo', 'Cairo Mono', sans-serif;
            font-weight: 700;
            /* Use bold for titles */
        }

        .font-arabic {
            font-family: 'Cairo', 'Flamante Cairo', sans-serif !important;
            font-weight: 700;
        }

        /* Arabic text throughout uses Cairo family */
        [lang="ar"],
        [dir="rtl"] {
            font-family: 'Cairo', 'Flamante Cairo', sans-serif !important;
        }

        /* Base window styling */
        .window-frame {
            border: 4px solid var(--border-dark);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 8px 8px 0px var(--border-dark);
            transition: all 0.3s ease;
        }


        .title-bar {
            background-color: var(--window-blue);
            border-bottom: 4px solid var(--border-dark);
            /* responsive padding */
            padding: clamp(6px, 1.4vw, 12px) clamp(10px, 3vw, 20px);
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 8px;
        }

        .title-bar-text {
            color: var(--text-dark);
            /* responsive font size: min 14px, preferred based on viewport, max 20px */
            font-size: clamp(14px, 1.6vw + 10px, 20px);
            letter-spacing: 1.2px;
            text-shadow: 1px 1px rgba(0, 0, 0, 0.12);
            display: block;
            flex: 1 1 auto;
            text-align: center;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            padding: 0 8px;
            /* breathing room so controls don't touch text */
        }

        /* Ensure control blocks don't shrink and keep space for title centering */
        .title-bar>.flex:first-child,
        .title-bar .window-controls {
            flex: 0 0 auto;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* Small-screen tweak: slightly reduce letter spacing so title fits */
        @media (max-width: 480px) {
            .title-bar-text {
                letter-spacing: 0.6px;
                font-size: clamp(13px, 3.6vw, 18px);
            }
        }

        /* Dark-mode title bar refinements */
        .dark .title-bar {
            background: var(--window-blue);
            border-bottom-color: var(--border-dark);
            box-shadow: inset 0 -4px 0 rgba(0, 0, 0, 0.15);
        }

        .dark .title-bar-text {
            text-shadow: 1px 1px rgba(0, 0, 0, 0.3);
            color: var(--text-dark);
        }

        .window-controls button,
        .title-bar-btn {
            width: 32px;
            height: 32px;
            border: 3px solid var(--border-dark);
            background-color: var(--bg-color);
            /* Uses theme variable */
            color: var(--text-dark);
            /* ADDED: This makes the SVG icon change color */
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Cairo Mono', monospace;
            font-size: 14px;
            box-shadow: 3px 3px 0px var(--border-dark);
            margin-left: 6px;
            cursor: pointer;
            transition: all 0.1s ease;
        }

        .window-controls button:active,
        .title-bar-btn:active {
            transform: translate(3px, 3px);
            box-shadow: none;
        }

        /* Dropdown select styling */
        #lang-toggle-btn {
            width: auto;
            min-width: 60px;
            padding: 0 8px;
            padding-right: 24px;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath fill='%23000' d='M1 1l5 5 5-5'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 6px center;
            background-color: var(--bg-color);
            color: var(--text-dark);
            border: 3px solid var(--border-dark);
            border-radius: 0;
            box-shadow: 3px 3px 0px var(--border-dark);
            cursor: pointer;
            font-family: 'Cairo Mono', monospace;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.1s ease;
        }

        #lang-toggle-btn:hover {
            background-color: var(--bg-hover, var(--bg-color));
        }

        #lang-toggle-btn:active {
            transform: translate(3px, 3px);
            box-shadow: none;
        }

        /* Dropdown option styling */
        #lang-toggle-btn option {
            background-color: var(--bg-color);
            color: var(--text-dark);
            padding: 4px 8px;
            font-family: 'Cairo Mono', monospace;
        }

        .dark #lang-toggle-btn {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='8' viewBox='0 0 12 8'%3E%3Cpath fill='%23e8d7c8' d='M1 1l5 5 5-5'/%3E%3C/svg%3E");
        }

        .dark #lang-toggle-btn option {
            background-color: var(--bg-color);
            color: var(--text-dark);
        }

        .window-content {
            background-color: var(--bg-color);
            padding: 24px;
        }

        /* Dialog box inside the window */
        .dialog-box {
            border: 4px solid var(--border-dark);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 6px 6px 0px var(--border-dark);
            width: 100%;
            max-width: 500px;
        }

        .dialog-title-bar {
            background-color: var(--dialog-orange);
            border-bottom: 4px solid var(--border-dark);
            padding: 8px 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dialog-controls button {
            width: 24px;
            height: 24px;
            border: 2px solid var(--border-dark);
            background-color: var(--bg-color);
            /* CHANGED: Was 'white' */
            color: var(--text-dark);
            /* This will color the SVG */
            /* REMOVED font-family and font-size, added flex properties */
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 2px 2px 0px var(--border-dark);
            margin-left: 4px;
            cursor: pointer;
        }

        .dialog-content {
            background-color: var(--bg-color);
            padding: 20px;
        }

        .coming-soon-dialog {
            background-color: var(--bg-color);
            border: 3px solid var(--border-dark);
            border-radius: 8px;
            box-shadow: 8px 8px 0px var(--border-dark);
            max-width: 500px;
            width: 90%;
        }

        .coming-soon-dialog .dialog-title-bar {
            background-color: #0066CC;
            color: #FFFFFF;
            padding: 10px 15px;
            border-radius: 5px 5px 0 0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 3px solid var(--border-dark);
        }

        .coming-soon-dialog .dialog-content {
            padding: 25px;
        }

        /* Retro button styling */
        .btn-retro {
            display: inline-block;
            padding: 12px 24px;
            border: 3px solid var(--border-dark);
            background-color: #F99D1C;
            color: var(--text-dark);
            font-family: 'Cairo', sans-serif;
            font-weight: 700;
            /* Use bold for buttons */
            font-size: 14px;
            text-align: center;
            box-shadow: 5px 5px 0px var(--border-dark);
            transition:
                all 0.1s ease;
            cursor: pointer;
        }

        .btn-retro:hover {
            background-color: #e08e1a;
        }

        .btn-retro:active {
            transform: translate(5px, 5px);
            box-shadow: none;
        }

        #classic-view-btn {
            background-color: white;
            color: #231F20;
        }

        #classic-view-btn:hover {
            background-color: #f0f0f0;
        }

        .dark #classic-view-btn {
            background-color: #333333;
            color: #FFEFD5;
        }

        .dark #classic-view-btn:hover {
            background-color: #444444;
        }

        .dark #start-mission-btn {
            color: #000000;
        }

        /* Level card styling */
        .level-card {
            border: 4px solid var(--border-dark);
            border-radius: 12px;
            padding: 20px;
            box-shadow: 6px 6px 0px var(--border-dark);
            transition: all 0.2s ease;
        }

        .level-card.locked {
            background-color: var(--level-locked);
            border-color: var(--border-dark);
            color: var(--level-locked-text);
            cursor: pointer;
        }

        .level-card.unlocked {
            background-color: var(--level-locked);
            /* White background for both */
            border-color: var(--level-unlocked);
            color: var(--text-dark);
            cursor: pointer;
        }

        .level-card.unlocked:hover {
            transform: scale(1.02);
            box-shadow: 8px 8px 0px var(--border-dark);
        }

        #level-2-card.unlocked:hover {
            transform: scale(1.02);
            box-shadow: 8px 8px 0px var(--border-dark);
        }

        .level-card[data-unlocked="true"]:hover {
            transform: scale(1.02);
            box-shadow: 8px 8px 0px var(--border-dark);
        }

        .level-status {
            font-size: 16px;
        }

        .level-status.unlocked {
            color: #00A2E8;
            /* Using blue for 'unlocked' status text */
        }

        .level-status.locked {
            color: var(--level-locked-text);
        }

        /* Progress Bar */
        .progress-bar {
            display: flex;
            gap: 10px;
        }

        .progress-bar-segment {
            width: 60px;
            height: 30px;
            background-color: var(--progress-bar-bg);
            border: 3px solid var(--border-dark);
            border-radius: 4px;
        }

        .progress-bar-segment.filled {
            background-color: var(--progress-bar-fill);
        }

        /* Tip */
        .tip {
            font-size: 20px;
            color: var(--text-dark);
        }

        /* Logo Area - Placeholder */
        .logo-placeholder {
            width: 300px;
            height: 300px;
            border: 4px dashed var(--border-dark);
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
            font-size: 18px;
        }

        .logo-placeholder .font-arabic {
            font-size: 40px;
        }

        /* RTL-specific styles */
        [dir="rtl"] body {
            text-align: right;
        }

        [dir="rtl"] .logo-placeholder,
        [dir="rtl"] .tip,
        [dir="rtl"] .btn-retro {
            text-align: center;
            /* Keep these centered */
        }

        [dir="rtl"] .window-controls button,
        [dir="rtl"] .title-bar-btn {
            margin-left: 0;
            margin-right: 6px;
        }

        [dir="rtl"] .dialog-controls button {
            margin-left: 0;
            margin-right: 4px;
        }

        [dir="rtl"] .dialog-content,
        [dir="rtl"] .level-card {
            text-align: right;
        }

        [dir="rtl"] header.flex {
            /* Ensure header elements align correctly in RTL */
            text-align: right;
        }

        /* Home icon color: use currentColor on SVG; set in dark mode */
        #home-btn {
            color: var(--text-dark);
        }

        .dark #home-btn {
            color: #FFE4BF;
        }

        /* Ensure SVG inside home button scales nicely and centers */
        #home-btn svg {
            width: 28px;
            height: 28px;
            display: block;
        }

        @media (min-width: 768px) {
            #home-btn svg {
                width: 32px;
                height: 32px;
            }
        }

        /* Terminal Styling */
        .terminal-container {
            background-color: #111111;
            border: 3px solid var(--border-dark);
            border-radius: 8px;
            box-shadow: 6px 6px 0px var(--border-dark);
            padding: 20px;
            font-family: 'Courier New', 'Cairo Mono', monospace;
            font-size: 14px;
            line-height: 1.6;
            min-height: 400px;
            max-height: 600px;
            display: flex;
            flex-direction: column;
        }

        .terminal-output {
            flex: 0;
            overflow-y: auto;
            margin-bottom: 5px;
            color: #EAEAEA;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .terminal-output::-webkit-scrollbar {
            width: 8px;
        }

        .terminal-output::-webkit-scrollbar-track {
            background: #1a1a1a;
        }

        .terminal-output::-webkit-scrollbar-thumb {
            background: #444;
            border-radius: 4px;
        }

        .terminal-output::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        .terminal-line {
            margin-bottom: 8px;
        }

        .terminal-prompt {
            color: #F98A2A;
            font-weight: bold;
        }

        .terminal-command {
            color: #F98A2A;
            font-weight: bold;
        }

        .terminal-text {
            color: #EAEAEA;
        }

        .terminal-link {
            color: #00AEEF;
            text-decoration: none;
        }

        .terminal-link:hover {
            text-decoration: underline;
        }

        .terminal-error {
            color: #FF6B6B;
        }

        .terminal-success {
            color: #51CF66;
        }

        .terminal-input-line {
            display: flex;
            align-items: center;
            gap: 0;
        }

        .terminal-input {
            flex: 1;
            background: transparent;
            border: none;
            color: #EAEAEA;
            font-family: 'Courier New', 'Cairo Mono', monospace;
            font-size: 14px;
            outline: none;
            padding: 0;
            margin: 0;
        }

        .terminal-input::placeholder {
            color: #555;
        }

        .terminal-cursor {
            display: none;
        }

        @keyframes blink {

            0%,
            49% {
                opacity: 1;
            }

            50%,
            100% {
                opacity: 0;
            }
        }



        /* Dark mode terminal adjustments */
        .dark .terminal-container {
            background-color: #0a0a0a;
        }

        .dark .terminal-output {
            color: #E0E0E0;
        }

        .dark .terminal-input {
            color: #E0E0E0;
        }

        .dark .terminal-cursor {
            color: #E0E0E0;
        }

        #home-btn-origin {
            color: var(--text-dark);
        }

        .dark #home-btn-origin {
            color: #FFE4BF;
        }

        #home-btn-origin svg {
            width: 28px;
            height: 28px;
            display: block;
        }

        @media (min-width: 768px) {
            #home-btn-origin svg {
                width: 32px;
                height: 32px;
            }
        }

        /* Origin page title styling */
        #page-origin h2 {
            font-weight: 700;
            letter-spacing: -0.5px;
        }

        #page-origin .font-light {
            font-weight: 300;
            letter-spacing: 0.3px;
        }

        #origin-page-title {
            text-align: center;
        }

        /* File Explorer Styling */
        .explorer-window {
            background-color: var(--bg-color);
            border: 3px solid var(--border-dark);
            border-radius: 8px;
            box-shadow: 6px 6px 0px var(--border-dark);
            overflow: hidden;
        }

        .explorer-toolbar {
            background-color: #E8E8E8;
            border-bottom: 2px solid var(--border-dark);
            padding: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .dark .explorer-toolbar {
            background-color: #2A2A2A;
        }

        .toolbar-buttons {
            display: flex;
            gap: 4px;
        }

        .toolbar-btn {
            width: 28px;
            height: 28px;
            border: 2px solid var(--border-dark);
            background-color: var(--bg-color);
            color: var(--text-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.1s ease;
            box-shadow: 2px 2px 0px var(--border-dark);
        }

        .toolbar-btn:hover {
            background-color: #D0D0D0;
        }

        .dark .toolbar-btn:hover {
            background-color: #3A3A3A;
        }

        .toolbar-btn:active {
            transform: translate(2px, 2px);
            box-shadow: none;
        }

        .toolbar-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .address-bar {
            flex: 1;
            display: flex;
            align-items: center;
        }

        .address-input {
            width: 100%;
            padding: 6px 12px;
            border: 2px solid var(--border-dark);
            background-color: white;
            color: var(--text-dark);
            font-family: 'Cairo Mono', monospace;
            font-size: 13px;
            box-shadow: inset 2px 2px 0px rgba(0, 0, 0, 0.1);
        }

        .dark .address-input {
            background-color: #1A1A1A;
            color: var(--text-dark);
        }

        .explorer-content {
            display: flex;
            height: 600px;
            overflow: hidden;
        }

        .explorer-sidebar {
            width: 220px;
            background-color: #F0F0F0;
            border-right: 2px solid var(--border-dark);
            overflow-y: auto;
            padding: 8px 4px;
        }

        .dark .explorer-sidebar {
            background-color: #1F1F1F;
        }

        .sidebar-tree {
            font-family: 'Cairo Mono', monospace;
            font-size: 12px;
        }

        .tree-item {
            padding: 2px 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 4px;
            border-radius: 2px;
            transition: background-color 0.1s;
            min-height: 20px;
        }

        .tree-item:hover {
            background-color: rgba(0, 0, 0, 0.1);
        }

        .dark .tree-item:hover {
            background-color: rgba(255, 255, 255, 0.1);
        }

        .tree-item.active {
            background-color: #B0D4FF;
            font-weight: bold;
        }

        .dark .tree-item.active {
            background-color: #2A4A6A;
        }

        .tree-icon {
            font-size: 14px;
            flex-shrink: 0;
        }

        .tree-label {
            color: var(--text-dark);
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .tree-children {
            margin-left: 20px;
            margin-top: 0;
            padding-left: 0;
            border-left: 1px dotted rgba(0, 0, 0, 0.2);
            padding-left: 4px;
        }
        
        .dark .tree-children {
            border-left-color: rgba(255, 255, 255, 0.2);
        }
        
        .tree-children .tree-item {
            padding-left: 4px;
            position: relative;
        }
        
        .tree-children .tree-item::before {
            content: '';
            position: absolute;
            left: -4px;
            top: 50%;
            width: 8px;
            height: 1px;
            background-color: rgba(0, 0, 0, 0.2);
        }
        
        .dark .tree-children .tree-item::before {
            background-color: rgba(255, 255, 255, 0.2);
        }

        .explorer-main {
            flex: 1;
            background-color: var(--bg-color);
            overflow-y: auto;
            position: relative;
        }

        .explorer-loading {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background-color: rgba(0, 0, 0, 0.1);
            z-index: 10;
        }

        .loading-bar {
            height: 100%;
            width: 100%;
            position: relative;
            overflow: hidden;
        }

        .loading-progress {
            height: 100%;
            background-color: var(--window-blue);
            animation: loading 0.5s ease-in-out;
            width: 100%;
        }

        @keyframes loading {
            0% { width: 0%; }
            100% { width: 100%; }
        }

        .explorer-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
            gap: 20px;
            padding: 20px;
        }

        .explorer-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            padding: 12px;
            border-radius: 4px;
            transition: all 0.2s ease;
            border: 2px solid transparent;
        }

        .explorer-item:hover {
            background-color: rgba(0, 162, 232, 0.1);
            border-color: var(--window-blue);
            transform: translateY(-2px);
        }

        .explorer-item-icon {
            width: 64px;
            height: 64px;
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            filter: drop-shadow(2px 2px 0px rgba(0, 0, 0, 0.2));
        }

        .explorer-item-label {
            text-align: center;
            font-family: 'Cairo Mono', monospace;
            font-size: 12px;
            color: var(--text-dark);
            word-break: break-word;
            max-width: 100px;
        }

        /* Project Viewer Modal */
        .viewer-window {
            background-color: var(--bg-color);
            border: 4px solid var(--border-dark);
            border-radius: 8px;
            box-shadow: 8px 8px 0px var(--border-dark);
            max-width: 90vw;
            max-height: 90vh;
            width: 800px;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .viewer-title-bar {
            background-color: var(--window-blue);
            border-bottom: 4px solid var(--border-dark);
            padding: 8px 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .viewer-controls {
            display: flex;
            gap: 4px;
        }

        .viewer-control-btn {
            width: 24px;
            height: 24px;
            border: 2px solid var(--border-dark);
            background-color: var(--bg-color);
            color: var(--text-dark);
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 2px 2px 0px var(--border-dark);
            transition: all 0.1s ease;
        }

        .viewer-control-btn:hover {
            background-color: #E0E0E0;
        }

        .dark .viewer-control-btn:hover {
            background-color: #3A3A3A;
        }

        .viewer-control-btn:active {
            transform: translate(2px, 2px);
            box-shadow: none;
        }

        .viewer-content {
            flex: 1;
            overflow: auto;
            position: relative;
            background-color: #F5F5F5;
        }

        .dark .viewer-content {
            background-color: #1A1A1A;
        }

        .viewer-image-container {
            display: flex;
            align-items: center;
            justify-content: center;
            min-height: 400px;
            padding: 20px;
        }

        .viewer-image {
            max-width: 100%;
            max-height: 60vh;
            object-fit: contain;
            border: 2px solid var(--border-dark);
            box-shadow: 4px 4px 0px var(--border-dark);
        }

        .viewer-properties {
            position: absolute;
            top: 0;
            right: 0;
            width: 300px;
            height: 100%;
            background-color: var(--bg-color);
            border-left: 4px solid var(--border-dark);
            padding: 20px;
            overflow-y: auto;
            box-shadow: -4px 0 8px rgba(0, 0, 0, 0.2);
        }

        .properties-title {
            font-family: 'Cairo', sans-serif;
            font-weight: 700;
            font-size: 18px;
            margin-bottom: 16px;
            color: var(--text-dark);
        }

        .properties-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .property-item {
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .property-label {
            font-family: 'Cairo Mono', monospace;
            font-size: 12px;
            color: var(--level-locked-text);
            font-weight: bold;
        }

        .property-value {
            font-family: 'Cairo', sans-serif;
            font-size: 14px;
            color: var(--text-dark);
        }

        .property-link {
            display: inline-block;
            margin-top: 12px;
            padding: 8px 16px;
            background-color: var(--dialog-orange);
            color: var(--text-dark);
            text-decoration: none;
            border: 2px solid var(--border-dark);
            box-shadow: 3px 3px 0px var(--border-dark);
            font-family: 'Cairo', sans-serif;
            font-weight: 700;
            transition: all 0.1s ease;
        }

        .property-link:hover {
            transform: translate(3px, 3px);
            box-shadow: none;
        }

        .viewer-toolbar {
            background-color: #E8E8E8;
            border-top: 2px solid var(--border-dark);
            padding: 8px;
            display: flex;
            gap: 8px;
            justify-content: center;
        }

        .dark .viewer-toolbar {
            background-color: #2A2A2A;
        }

        .viewer-tool-btn {
            width: 32px;
            height: 32px;
            border: 2px solid var(--border-dark);
            background-color: var(--bg-color);
            color: var(--text-dark);
            font-family: 'Cairo Mono', monospace;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 2px 2px 0px var(--border-dark);
            transition: all 0.1s ease;
        }

        .viewer-tool-btn:hover {
            background-color: #D0D0D0;
        }

        .dark .viewer-tool-btn:hover {
            background-color: #3A3A3A;
        }

        .viewer-tool-btn:active {
            transform: translate(2px, 2px);
            box-shadow: none;
        }
    </style>
</head>

<body class="p-4 md:p-8 min-h-screen flex flex-col items-center justify-center transition-colors duration-300">

    <!-- Main Window Container -->
    <main class="window-frame w-full max-w-5xl mx-auto">

        <!-- Window Title Bar -->
        <header class="title-bar">
            <div class="flex items-center">
                <select id="lang-toggle-btn" class="title-bar-btn !font-title !text-sm px-2 py-1 cursor-pointer">
                    <option value="en">EN</option>
                    <option value="fr">FR</option>
                    <option value="it">IT</option>
                    <option value="ar">ÿπ</option>

                </select>
                <button id="theme-toggle" class="title-bar-btn">
                    <!-- Sun Icon SVG (New, cleaner version) -->
                    <svg id="icon-sun" class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                            d="M12 12m-5 0a5 5 0 1 0 10 0a5 5 0 1 0-10 0" />
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                            d="M12 1v2M12 21v2M4.22 4.22l1.42 1.42M18.36 18.36l1.42 1.42M1 12h2M21 12h2M4.22 19.78l1.42-1.42M18.36 5.64l1.42-1.42" />
                    </svg>
                    <!-- Moon Icon SVG -->
                    <svg id="icon-moon" class="w-5 h-5 hidden" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3"
                            d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z">
                        </path>
                    </svg>
                </button>
            </div>
            <span id="window-title-text" class="title-bar-text font-title"></span>
            <div class="window-controls flex">
                <button aria-label="Minimize" title="Minimize" data-translate-key="window.minimize"
                    data-translate-key-attr="title">
                    <!-- Minimize (Minus) Icon SVG -->
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M20 12H4"></path>
                    </svg>
                </button>
                <button aria-label="Close" title="Close" data-translate-key="window.close"
                    data-translate-key-attr="title">
                    <!-- Close (X) Icon SVG -->
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                        xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M6 18L18 6M6 6l12 12">
                        </path>
                    </svg>
                </button>
            </div>
        </header>

        <!-- Window Content Area -->
        <div class="window-content">

            <!-- PAGE 1: Welcome Screen -->
            <section id="page-welcome" class="">
                <div class="flex flex-col md:flex-row items-center justify-center md:justify-around gap-12 p-4 md:p-8">

                    <!-- Left Side: Logo -->
                    <div class="flex-shrink-0">
                        <img src="logo.png" alt="Roumaissa's Logo"
                            style="max-width: 300px; max-height: 300px; width: auto; height: auto;">
                    </div>

                    <!-- Right Side: Welcome.exe Dialog -->
                    <div class="dialog-box">
                        <header class="dialog-title-bar">
                            <span class="font-title text-sm"
                                data-translate-key="welcome.dialog.title">Welcome.exe</span>
                            <div class="dialog-controls flex">
                                <!-- Replaced text with SVG -->
                                <button aria-label="Minimize" title="Minimize" data-translate-key="window.minimize"
                                    data-translate-key-attr="title">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3.5"
                                            d="M20 12H4"></path>
                                    </svg>
                                </button>
                                <!-- Replaced text with SVG -->
                                <button aria-label="Close" title="Close" data-translate-key="window.close"
                                    data-translate-key-attr="title">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                        xmlns="http://www.w3.org/2000/svg">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3.5"
                                            d="M6 18L18 6M6 6l12 12"></path>
                                    </svg>
                                </button>
                            </div>
                        </header>
                        <div class="dialog-content space-y-5">
                            <h1 class="font-title text-2xl" data-translate-key="welcome.dialog.h1">Here is Roumaissa's
                                zone</h1>
                            <p data-translate-key="welcome.dialog.p1">Oh look, another typical designer portfolio.. but
                                trust me, this one actually has personality</p>
                            <p class="font-bold text-lg" data-translate-key="welcome.dialog.p2">System booting ...</p>
                            <p data-translate-key="welcome.dialog.p3">welcome to Roumaissa's OS- 99% creativity, 1%
                                caffeine</p>

                            <div class="flex flex-col sm:flex-row gap-4 mt-8">
                                <button id="start-mission-btn" class="btn-retro btn-primary w-full sm:w-auto"
                                    data-translate-key="welcome.dialog.btn.start">Start mission</button>
                                <button id="classic-view-btn" class="btn-retro w-full sm:w-auto"
                                    data-translate-key="welcome.dialog.btn.classic">Classic view</button>
                            </div>
                        </div>
                    </div>

                </div>
            </section>

            <!-- PAGE 2: Mission Control Screen -->
            <section id="page-missions" class="hidden">
                <div class="flex flex-col gap-8 p-4 md:p-8">

                    <!-- Header -->
                    <header class="flex items-center gap-4">
                        <!-- Home Icon SVG -->
                        <button id="home-btn"
                            class="p-2 border-2 border-transparent hover:border-textDark rounded-lg transition-all"
                            title="Back to Welcome">
                            <svg class="w-10 h-10" fill="currentColor" viewBox="0 0 20 20"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z">
                                </path>
                            </svg>
                        </button>
                        <h1 class="font-title text-xl md:text-3xl" data-translate-key="missions.title">Mission Control ‚Äî
                            Ready for Deployment ...</h1>
                    </header>

                    <!-- System Sync -->
                    <div class="flex flex-col sm:flex-row items-start sm:items-center gap-4">
                        <span class="font-title text-lg flex-shrink-0" data-translate-key="missions.sync.text">System
                            Sync: 20% completed</span>
                        <div class="progress-bar">
                            <div class="progress-bar-segment filled"></div>
                            <div class="progress-bar-segment"></div>
                            <div class="progress-bar-segment"></div>
                            <div class="progress-bar-segment"></div>
                        </div>
                    </div>

                    <!-- Level Grid -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 md:gap-8">

                        <!-- Level 01: Locked initially -->
                        <a href="#" id="level-1-card" class="level-card locked">
                            <h2 class="font-title text-lg" data-translate-key="missions.level1.title">level 01: the
                                origin</h2>
                            <p class="mt-2" data-translate-key="missions.level1.desc">Every story starts somewhere.</p>
                            <span class="level-status locked font-title text-sm mt-4 block"
                                data-translate-key="missions.level.status.locked">Status: locked</span>
                        </a>

                        <!-- Level 02: Locked -->
                        <div id="level-2-card" class="level-card locked">
                            <h2 class="font-title text-lg" data-translate-key="missions.level2.title">level 02: the
                                Playground</h2>
                            <p class="mt-2" data-translate-key="missions.level2.desc">Where ideas turn into visuals</p>
                            <span class="level-status locked font-title text-sm mt-4 block"
                                data-translate-key="missions.level.status.locked">Status: locked</span>
                        </div>

                        <!-- Level 03: Locked -->
                        <div id="level-3-card" class="level-card locked">
                            <h2 class="font-title text-lg" data-translate-key="missions.level3.title">level 03: the
                                Toolkit</h2>
                            <p class="mt-2" data-translate-key="missions.level3.desc">Discover my creative arsenal</p>
                            <span class="level-status locked font-title text-sm mt-4 block"
                                data-translate-key="missions.level.status.locked">Status: locked</span>
                        </div>

                        <!-- Level 04: Locked -->
                        <div id="level-4-card" class="level-card locked">
                            <h2 class="font-title text-lg" data-translate-key="missions.level4.title">level 04: the
                                Final Portal</h2>
                            <p class="mt-2" data-translate-key="missions.level4.desc">Let's connect and create together
                            </p>
                            <span class="level-status locked font-title text-sm mt-4 block"
                                data-translate-key="missions.level.status.locked">Status: locked</span>
                        </div>

                    </div>

                    <!-- Tip -->
                    <div class="tip text-center mt-4" data-translate-key="missions.tip">
                        &gt;&gt; Tip: Complete all levels to unlock the secret ending_
                    </div>

                </div>
            </section>

            <!-- PAGE 3: The Origin Terminal -->
            <section id="page-origin" class="hidden">
                <div class="flex flex-col gap-0 p-0 md:p-0">

                    <!-- Header -->
                    <header class="flex items-center gap-4 px-4 md:px-8 pt-4 md:pt-8 pb-2">
                        <!-- Home Icon SVG -->
                        <button id="home-btn-origin"
                            class="p-2 border-2 border-transparent hover:border-textDark rounded-lg transition-all"
                            title="Back to Welcome">
                            <svg class="w-10 h-10" fill="currentColor" viewBox="0 0 20 20"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z">
                                </path>
                            </svg>
                        </button>

                        <!-- Title and Subtitle -->
                        <div class="flex-grow">
                            <h2 class="font-title text-xl sm:text-2xl md:text-3xl font-bold"
                                data-translate-key="origin.title">Level 01: The Origin</h2>
                            <p class="text-sm sm:text-base font-light mt-1" data-translate-key="origin.subtitle">Every
                                story starts somewhere, and mine starts in S√©tif</p>
                        </div>
                    </header>

                    <!-- Terminal Window -->
                    <div id="terminal-window" class="terminal-container px-4 md:px-8 pb-4 md:pb-8">
                        <div id="terminal-output" class="terminal-output">
                            <!-- Content will be generated by JavaScript -->
                        </div>
                        <div class="terminal-input-line">
                            <span class="terminal-prompt">>> </span>
                            <input id="terminal-input" type="text" class="terminal-input" placeholder=""
                                autocomplete="off">
                            <span id="terminal-cursor" class="terminal-cursor">‚ñå</span>
                        </div>
                    </div>

                </div>
            </section>

            <!-- PAGE 4: Level 02 - The Playground (File Explorer) -->
            <section id="page-playground" class="hidden">
                <div class="flex flex-col gap-0 p-0 md:p-0">
                    <!-- Header -->
                    <header class="flex items-center gap-4 px-4 md:px-8 pt-4 md:pt-8 pb-2">
                        <button id="home-btn-playground"
                            class="p-2 border-2 border-transparent hover:border-textDark rounded-lg transition-all"
                            title="Back to Mission Control">
                            <svg class="w-10 h-10" fill="currentColor" viewBox="0 0 20 20"
                                xmlns="http://www.w3.org/2000/svg">
                                <path
                                    d="M10.707 2.293a1 1 0 00-1.414 0l-7 7a1 1 0 001.414 1.414L4 10.414V17a1 1 0 001 1h2a1 1 0 001-1v-2a1 1 0 011-1h2a1 1 0 011 1v2a1 1 0 001 1h2a1 1 0 001-1v-6.586l.293.293a1 1 0 001.414-1.414l-7-7z">
                                </path>
                            </svg>
                        </button>
                        <div class="flex-grow">
                            <h2 class="font-title text-xl sm:text-2xl md:text-3xl font-bold"
                                data-translate-key="playground.title">Level 02: The Playground</h2>
                            <p class="text-sm sm:text-base font-light mt-1" data-translate-key="playground.subtitle">Where ideas turn into visuals</p>
                        </div>
                    </header>

                    <!-- File Explorer Window -->
                    <div class="explorer-window px-4 md:px-8 pb-4 md:pb-8">
                        <!-- Explorer Toolbar -->
                        <div class="explorer-toolbar">
                            <div class="toolbar-buttons">
                                <button id="explorer-back" class="toolbar-btn" title="Back">
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M9.707 16.707a1 1 0 01-1.414 0l-6-6a1 1 0 010-1.414l6-6a1 1 0 011.414 1.414L5.414 9H17a1 1 0 110 2H5.414l4.293 4.293a1 1 0 010 1.414z" clip-rule="evenodd"/>
                                    </svg>
                                </button>
                                <button id="explorer-forward" class="toolbar-btn" title="Forward">
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M10.293 3.293a1 1 0 011.414 0l6 6a1 1 0 010 1.414l-6 6a1 1 0 01-1.414-1.414L14.586 11H3a1 1 0 110-2h11.586l-4.293-4.293a1 1 0 010-1.414z" clip-rule="evenodd"/>
                                    </svg>
                                </button>
                                <button id="explorer-up" class="toolbar-btn" title="Up">
                                    <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                        <path fill-rule="evenodd" d="M14.707 12.707a1 1 0 01-1.414 0L10 9.414l-3.293 3.293a1 1 0 01-1.414-1.414l4-4a1 1 0 011.414 0l4 4a1 1 0 010 1.414z" clip-rule="evenodd"/>
                                    </svg>
                                </button>
                            </div>
                            <div class="address-bar">
                                <input type="text" id="explorer-address" class="address-input" readonly value="C:\Roumaissa\Portfolio">
                            </div>
                        </div>

                        <!-- Explorer Content -->
                        <div class="explorer-content">
                            <!-- Sidebar -->
                            <div class="explorer-sidebar">
                                <div class="sidebar-tree">
                                    <div class="tree-item" data-path="C:\Roumaissa">
                                        <span class="tree-icon">üìÅ</span>
                                        <span class="tree-label">Roumaissa</span>
                                    </div>
                                    <div class="tree-item tree-expanded" data-path="C:\Roumaissa\Portfolio">
                                        <span class="tree-icon">üìÅ</span>
                                        <span class="tree-label">Portfolio</span>
                                    </div>
                                    <div class="tree-children">
                                        <div class="tree-item" data-path="C:\Roumaissa\Portfolio\Branding">
                                            <span class="tree-icon">üìÅ</span>
                                            <span class="tree-label">Branding</span>
                                        </div>
                                        <div class="tree-item" data-path="C:\Roumaissa\Portfolio\Social Media">
                                            <span class="tree-icon">üìÅ</span>
                                            <span class="tree-label">Social Media</span>
                                        </div>
                                        <div class="tree-item" data-path="C:\Roumaissa\Portfolio\Web Design">
                                            <span class="tree-icon">üìÅ</span>
                                            <span class="tree-label">Web Design</span>
                                        </div>
                                        <div class="tree-item" data-path="C:\Roumaissa\Portfolio\Illustration">
                                            <span class="tree-icon">üìÅ</span>
                                            <span class="tree-label">Illustration</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Main Content Area -->
                            <div class="explorer-main">
                                <!-- Loading Bar -->
                                <div id="explorer-loading" class="explorer-loading hidden">
                                    <div class="loading-bar">
                                        <div class="loading-progress"></div>
                                    </div>
                                </div>

                                <!-- File Grid -->
                                <div id="explorer-grid" class="explorer-grid">
                                    <!-- Content will be populated by JavaScript -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Project Viewer Modal (Windows Picture and Fax Viewer style) -->
            <div id="project-viewer-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="viewer-window">
                    <header class="viewer-title-bar">
                        <span id="viewer-title" class="font-title text-sm">project.brand</span>
                        <div class="viewer-controls flex">
                            <button id="viewer-properties-btn" class="viewer-control-btn" title="Properties">
                                <svg class="w-4 h-4" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M7 2a1 1 0 011 1v1h3a1 1 0 110 2H9.578a18.87 18.87 0 01-1.724 4.78c.29.354.596.696.914 1.026a1 1 0 11-1.44 1.389c-.188-.196-.373-.396-.554-.6a19.098 19.098 0 01-3.432 2.753 1 1 0 01-1.415-1.415c.955-.744 1.799-1.587 2.514-2.511a19.047 19.047 0 01-1.415-1.415 1 1 0 011.415-1.415c.218.218.434.44.646.662a18.98 18.98 0 01-1.723-4.78H3a1 1 0 110-2h3V3a1 1 0 011-1zm6 6a1 1 0 01.894.553l2.991 5.982a.869.869 0 01.02.037l.99 1.98a1 1 0 11-1.79.895L15.383 16h-4.764l-.724 1.447a1 1 0 11-1.788-.894l.99-1.98.019-.038 2.99-5.982A1 1 0 0113 8zm-1.382 6h2.764L12 11.236 11.618 14z"/>
                                </svg>
                            </button>
                            <button id="viewer-close-btn" class="viewer-control-btn" title="Close">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3.5" d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                    </header>
                    <div class="viewer-content">
                        <div id="viewer-image-container" class="viewer-image-container">
                            <img id="viewer-image" src="" alt="Project Preview" class="viewer-image">
                        </div>
                        <div id="viewer-properties" class="viewer-properties hidden">
                            <div class="properties-content">
                                <h3 class="properties-title">Properties</h3>
                                <div class="properties-list">
                                    <div class="property-item">
                                        <span class="property-label">Project Name:</span>
                                        <span id="property-name" class="property-value"></span>
                                    </div>
                                    <div class="property-item">
                                        <span class="property-label">Date:</span>
                                        <span id="property-date" class="property-value"></span>
                                    </div>
                                    <div class="property-item">
                                        <span class="property-label">Client:</span>
                                        <span id="property-client" class="property-value"></span>
                                    </div>
                                    <div class="property-item">
                                        <span class="property-label">Category:</span>
                                        <span id="property-category" class="property-value"></span>
                                    </div>
                                    <a id="property-link" href="#" target="_blank" class="property-link">Launch Project ‚Üí</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="viewer-toolbar">
                        <button id="viewer-zoom-in" class="viewer-tool-btn" title="Zoom In">+</button>
                        <button id="viewer-zoom-out" class="viewer-tool-btn" title="Zoom Out">-</button>
                        <button id="viewer-rotate" class="viewer-tool-btn" title="Rotate">‚Üª</button>
                    </div>
                </div>
            </div>

            <!-- Level 02 Locked Modal -->
            <div id="level2-locked-modal"
                class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="coming-soon-dialog">
                    <header class="dialog-title-bar">
                        <span class="font-title text-sm" data-translate-key="level2.locked.title">level_02_locked.exe</span>
                        <div class="dialog-controls flex">
                            <button id="close-level2-locked-btn" aria-label="Close" title="Close">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3.5"
                                        d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                    </header>
                    <div class="dialog-content space-y-4">
                        <p class="text-lg font-title" data-translate-key="level2.locked.message">Complete Level 01 first to unlock the full experience!</p>
                        <p class="text-sm" data-translate-key="level2.locked.submessage">Explore The Origin to discover my story and unlock The Playground.</p>
                        <div class="flex gap-4 mt-6">
                            <button id="go-to-level1-btn" class="btn-retro btn-primary flex-1"
                                data-translate-key="level2.locked.btn.level1">Go to Level 01</button>
                            <button id="emergency-access-btn" class="btn-retro flex-1"
                                data-translate-key="level2.locked.btn.emergency">Emergency Access</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Coming Soon Modal -->
            <div id="coming-soon-modal"
                class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
                <div class="coming-soon-dialog">
                    <header class="dialog-title-bar">
                        <span class="font-title text-sm">coming_soon.exe</span>
                        <div class="dialog-controls flex">
                            <button id="close-coming-soon-btn" aria-label="Close" title="Close">
                                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"
                                    xmlns="http://www.w3.org/2000/svg">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3.5"
                                        d="M6 18L18 6M6 6l12 12"></path>
                                </svg>
                            </button>
                        </div>
                    </header>
                    <div class="dialog-content space-y-4">
                        <p class="text-lg font-title" data-translate-key="coming.soon">This level is coming soon! Stay
                            tuned...</p>
                        <div class="flex gap-4 mt-6">
                            <button id="ok-coming-soon-btn" class="btn-retro btn-primary flex-1"
                                data-translate-key="coming.soon.btn">OK</button>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- Footer -->
    <footer class="w-full text-center p-4 mt-6 text-sm" data-translate-key="footer.text">
        ¬© 2025 Roumaissa Koussa ‚Äì story mode edition
    </footer>

    <script>
        // === Translations Data ===
        const translations = {
            'en': {
                'lang.toggle.text': 'EN',
                'window.minimize': '-',
                'window.close': 'x',
                'window.title.welcome': '',
                'window.title.missions': 'mission_selector.exe',
                'welcome.logo.p1': 'Replace this with your logo graphic',
                'welcome.logo.p2': 'Roumaissa',
                'welcome.logo.p3': '(From my-portfolio-design1.png)',
                'welcome.dialog.title': 'Welcome.exe',
                'welcome.dialog.h1': "Here is Roumaissa's zone",
                'welcome.dialog.p1': 'Oh look, another typical designer portfolio.. but trust me, this one actually has personality',
                'welcome.dialog.p2': 'System booting ...',
                'welcome.dialog.p3': "welcome to Roumaissa's OS- 99% creativity, 1% caffeine",
                'welcome.dialog.btn.start': 'Start mission',
                'welcome.dialog.btn.classic': 'Classic view',
                'missions.title': 'Mission Control ‚Äî Ready for Deployment ...',
                'missions.sync.text': 'System Sync: {percent}% completed',
                'missions.level1.title': 'level 01: the origin',
                'missions.level1.desc': 'Every story starts somewhere.',
                'missions.level2.title': 'level 02: the Playground',
                'missions.level2.desc': 'Where ideas turn into visuals',
                'missions.level3.title': 'level 03: the Toolkit',
                'missions.level3.desc': 'Discover my creative arsenal',
                'missions.level4.title': 'level 04: the Final Portal',
                'missions.level4.desc': "Let's connect and create together",
                'missions.level.status.unlocked': 'Status: unlocked',
                'missions.level.status.locked': 'Status: locked',
                'missions.tip': '>> Tip: Complete all levels to unlock the secret ending_',
                'origin.title': 'Level 01: The Origin',
                'origin.subtitle': 'Every story starts somewhere, and mine starts in S√©tif',
                'origin.boot.line1': 'Booting Roumaisa OS v1.0 ...',
                'origin.boot.line2': 'Loading childhood memories...',
                'origin.boot.line3': 'Loading creativity modules...',
                'origin.boot.line4': 'System ready.',
                'origin.welcome': "Welcome, traveler. You've entered a creative system built with imagination and caffeine ‚òï",
                'origin.help.prompt': 'Type \'help\' to begin your exploration_',
                'origin.help.title': 'Available commands:',
                'origin.help.whoami': '[1] whoami      ‚Üí Learn who\'s behind the system',
                'origin.help.origin': '[2] origin      ‚Üí Discover where it all began',
                'origin.help.spark': '[3] spark       ‚Üí The moment creativity ignited',
                'origin.help.skills': '[4] skills      ‚Üí What powers my design process',
                'origin.help.toolkit': '[5] toolkit     ‚Üí My creative weapons of choice',
                'origin.help.contact': '[6] contact     ‚Üí Connect with me',
                'origin.help.lang': '[7] lang        ‚Üí Change system language',
                'origin.help.exit': '[8] exit        ‚Üí Return to Mission Control',
                'origin.help.clear': '[9] clear       ‚Üí Clear the terminal screen',
                'origin.whoami': "I'm Roumaisa ‚Äî a designer who translates ideas into emotions,\nand emotions into visuals.\nPowered by curiosity, color, and a hint of organized chaos ‚ú®",
                'origin.origin': "Every story starts somewhere‚Ä¶ mine began in S√©tif, Algeria üá©üáø\nFrom doodling on notebooks to designing full brand identities ‚Äî\nmy journey was never planned, just passionately crafted.",
                'origin.spark': "The spark?\nProbably the first time I realized design could make people *feel*.\nSince then, I\'ve been chasing that feeling ‚Äî one pixel at a time.",
                'origin.skills.title': 'Skills detected:',
                'origin.skills.list': '- Branding & Visual Identity\n- Social Media Design\n- Concept Art & Illustration\n- Storytelling through visuals\n- AI-enhanced design exploration ü§ñ',
                'origin.toolkit.title': 'Toolkit initialized:',
                'origin.toolkit.list': '- Adobe Illustrator\n- Photoshop\n- Figma\n- After Effects\n- ChatGPT + Midjourney (my AI sidekicks ‚ö°)',
                'origin.contact': "Let's connect and create something unforgettable üí´\nEmail: roumaissaks1997@gmail.com\nLinktree: linktr.ee/roumaissou19",
                'origin.exit': 'Returning to Mission Control...\nSystem Sync: 25% completed.',
                'origin.error': 'Command not found.\nEven my creativity module couldn\'t process that.\nTry \'help\' before I start guessing ü§î',
                'origin.easter.coffee': '‚òï Brewing creativity... Done. +15% inspiration.',
                'origin.lang.title': 'Language Selection System',
                'origin.lang.available': 'Available languages:',
                'origin.lang.current': 'Current language: {lang}',
                'origin.lang.set': 'Language changed to: {lang}',
                'origin.lang.notavailable': 'Language \'{lang}\' is not available yet.\nAvailable languages: en, fr, ar, it',
                'origin.lang.usage': 'Usage: lang [language_code]\nExample: lang fr (to switch to French)',
                'origin.lang.prompt': 'Type the language name or code (or any command to cancel):',
                'origin.lang.cancelled': 'Language selection cancelled.',
                'playground.title': 'Level 02: The Playground',
                'playground.subtitle': 'Where ideas turn into visuals',
                'level2.locked.title': 'level_02_locked.exe',
                'level2.locked.message': 'Complete Level 01 first to unlock the full experience!',
                'level2.locked.submessage': 'Explore The Origin to discover my story and unlock The Playground.',
                'level2.locked.btn.level1': 'Go to Level 01',
                'level2.locked.btn.emergency': 'Emergency Access',
                'coming.soon': 'This level is coming soon! Stay tuned...',
                'coming.soon.btn': 'OK',
                'footer.text': '¬© 2025 Roumaissa Koussa ‚Äì story mode edition'
            },
            'fr': {
                'lang.toggle.text': 'FR',
                'window.minimize': '-',
                'window.close': 'x',
                'window.title.welcome': '',
                'window.title.missions': 'selecteur_mission.exe',
                'welcome.logo.p1': 'Remplacez ceci par votre logo',
                'welcome.logo.p2': 'Roumaissa',
                'welcome.logo.p3': '(Depuis my-portfolio-design1.png)',
                'welcome.dialog.title': 'Bienvenue.exe',
                'welcome.dialog.h1': "Voici la zone de Roumaissa",
                'welcome.dialog.p1': 'Oh, encore un portfolio de designer typique... mais croyez-moi, celui-ci a de la personnalit√©',
                'welcome.dialog.p2': 'D√©marrage du syst√®me ...',
                'welcome.dialog.p3': "bienvenue sur Roumaissa OS- 99% cr√©ativit√©, 1% caf√©ine",
                'welcome.dialog.btn.start': 'Commencer la mission',
                'welcome.dialog.btn.classic': 'Vue classique',
                'missions.title': 'Contr√¥le de mission ‚Äî Pr√™t pour le d√©ploiement ...',
                'missions.sync.text': 'Synchro syst√®me : {percent}% termin√©e',
                'missions.level1.title': 'niveau 01 : l\'origine',
                'missions.level1.desc': 'Chaque histoire commence quelque part.',
                'missions.level2.title': 'niveau 02 : le Terrain de jeu',
                'missions.level2.desc': 'O√π les id√©es deviennent visuels',
                'missions.level3.title': 'niveau 03 : la Bo√Æte √† outils',
                'missions.level3.desc': 'D√©couvrez mon arsenal cr√©atif',
                'missions.level4.title': 'niveau 04 : le Portail Final',
                'missions.level4.desc': 'Connectons-nous et cr√©ons ensemble',
                'missions.level.status.unlocked': 'Statut : d√©verrouill√©',
                'missions.level.status.locked': 'Statut : verrouill√©',
                'missions.tip': '>> Astuce : Terminez tous les niveaux pour d√©bloquer la fin secr√®te_',
                'origin.title': 'Niveau 01 : L\'Origine',
                'origin.subtitle': 'Chaque histoire commence quelque part, et la mienne commence √† S√©tif',
                'origin.boot.line1': 'D√©marrage du syst√®me d\'exploitation Roumaisa v1.0 ...',
                'origin.boot.line2': 'Chargement des souvenirs d\'enfance...',
                'origin.boot.line3': 'Chargement des modules de cr√©ativit√©...',
                'origin.boot.line4': 'Syst√®me pr√™t.',
                'origin.welcome': "Bienvenue, voyageur. Vous √™tes entr√© dans un syst√®me cr√©atif construit avec imagination et caf√©ine ‚òï",
                'origin.help.prompt': 'Tapez \'help\' pour commencer votre exploration_',
                'origin.help.title': 'Commandes disponibles:',
                'origin.help.whoami': '[1] whoami      ‚Üí Apprenez qui se cache derri√®re le syst√®me',
                'origin.help.origin': '[2] origin      ‚Üí D√©couvrez o√π tout a commenc√©',
                'origin.help.spark': '[3] spark       ‚Üí Le moment o√π la cr√©ativit√© s\'est allum√©e',
                'origin.help.skills': '[4] skills      ‚Üí Ce qui alimente mon processus de conception',
                'origin.help.toolkit': '[5] toolkit     ‚Üí Mes armes cr√©atives pr√©f√©r√©es',
                'origin.help.contact': '[6] contact     ‚Üí Connectez-vous avec moi',
                'origin.help.lang': '[7] lang        ‚Üí Changer la langue du syst√®me',
                'origin.help.exit': '[8] exit        ‚Üí Retour au Centre de Contr√¥le',
                'origin.help.clear': '[9] clear       ‚Üí Effacer l\'√©cran du terminal',
                'origin.whoami': "Je suis Roumaisa ‚Äî une designer qui traduit les id√©es en √©motions,\net les √©motions en visuels.\nAliment√©e par la curiosit√©, la couleur et un brin de chaos organis√© ‚ú®",
                'origin.origin': "Chaque histoire commence quelque part‚Ä¶ la mienne a commenc√© √† S√©tif, Alg√©rie üá©üáø\nDu griffonnage sur des cahiers √† la conception d\'identit√©s de marque compl√®tes ‚Äî\nmon voyage n\'a jamais √©t√© planifi√©, juste passionn√©ment cr√©√©.",
                'origin.spark': "L\'√©tincelle?\nProbablement le moment o√π j\'ai r√©alis√© que le design pouvait faire *ressentir* aux gens.\nDepuis, je chasse ce sentiment ‚Äî un pixel √† la fois.",
                'origin.skills.title': 'Comp√©tences d√©tect√©es:',
                'origin.skills.list': '- Branding et Identit√© Visuelle\n- Design de M√©dias Sociaux\n- Concept Art & Illustration\n- Storytelling par les visuels\n- Exploration de design am√©lior√©e par l\'IA ü§ñ',
                'origin.toolkit.title': 'Bo√Æte √† outils initialis√©e:',
                'origin.toolkit.list': '- Adobe Illustrator\n- Photoshop\n- Figma\n- After Effects\n- ChatGPT + Midjourney (mes compagnons IA ‚ö°)',
                'origin.contact': "Connectons-nous et cr√©ons quelque chose d\'inoubliable üí´\nEmail: roumaissaks1997@gmail.com\nLinktree: linktr.ee/roumaissou19",
                'origin.exit': 'Retour au Centre de Contr√¥le...\nSynchronisation du syst√®me : 25% termin√©e.',
                'origin.error': 'Commande non trouv√©e.\nM√™me mon module de cr√©ativit√© n\'a pas pu traiter cela.\nEssayez \'help\' avant que je commence √† deviner ü§î',
                'origin.easter.coffee': '‚òï Infusion de cr√©ativit√©... Fait. +15% d\'inspiration.',
                'origin.lang.title': 'Syst√®me de S√©lection de Langue',
                'origin.lang.available': 'Langues disponibles:',
                'origin.lang.current': 'Langue actuelle: {lang}',
                'origin.lang.set': 'Langue chang√©e en: {lang}',
                'origin.lang.notavailable': 'La langue \'{lang}\' n\'est pas encore disponible.\nLangues disponibles: en, fr, ar, it',
                'origin.lang.usage': 'Utilisation: lang [code_langue]\nExemple: lang fr (pour passer au fran√ßais)',
                'origin.lang.prompt': 'Tapez le nom ou le code de la langue (ou toute commande pour annuler):',
                'origin.lang.cancelled': 'S√©lection de langue annul√©e.',
                'playground.title': 'Niveau 02 : Le Terrain de jeu',
                'playground.subtitle': 'O√π les id√©es deviennent visuels',
                'level2.locked.title': 'niveau_02_verrouille.exe',
                'level2.locked.message': 'Compl√©tez le Niveau 01 d\'abord pour d√©bloquer l\'exp√©rience compl√®te!',
                'level2.locked.submessage': 'Explorez L\'Origine pour d√©couvrir mon histoire et d√©bloquer Le Terrain de jeu.',
                'level2.locked.btn.level1': 'Aller au Niveau 01',
                'level2.locked.btn.emergency': 'Acc√®s d\'urgence',
                'coming.soon': 'Ce niveau arrive bient√¥t! Restez √† l\'√©coute...',
                'coming.soon.btn': 'OK',
                'footer.text': '¬© 2025 Roumaissa Koussa ‚Äì √©dition mode histoire'
            },
            'ar': {
                'lang.toggle.text': 'ÿπ',
                'window.minimize': '-',
                'window.close': 'x',
                'window.title.missions': 'mission_selector.exe',
                'welcome.logo.p1': 'ŸäŸèÿ≥ÿ™ÿ®ÿØŸÑ Ÿáÿ∞ÿß ÿ®ÿ¥ÿπÿßÿ±ŸÉ ÿßŸÑÿÆÿßÿµ',
                'welcome.logo.p2': 'ÿ±ŸÖŸäÿ≥ÿ©',
                'welcome.logo.p3': '(ŸÖŸÜ my-portfolio-design1.png)',
                'welcome.dialog.title': 'Welcome.exe',
                'welcome.dialog.h1': 'ŸáŸÜÿß ŸÖŸÜÿ∑ŸÇÿ© ÿ±ŸÖŸäÿ≥ÿ©',
                'welcome.dialog.p1': 'ÿ£ŸàŸáÿå ŸÖŸÑŸÅ ŸÖÿµŸÖŸÖ ŸÜŸÖŸàÿ∞ÿ¨Ÿä ÿ¢ÿÆÿ±.. ŸÑŸÉŸÜ ÿ´ŸÇ ÿ®Ÿäÿå Ÿáÿ∞ÿß ÿßŸÑŸÖŸÑŸÅ ŸÑŸá ÿ¥ÿÆÿµŸäÿ© ŸÖŸÖŸäÿ≤ÿ©',
                'welcome.dialog.p2': '...ÿ¨ÿßÿ±Ÿä ÿ™ÿ¥ÿ∫ŸäŸÑ ÿßŸÑŸÜÿ∏ÿßŸÖ',
                'welcome.dialog.p3': 'ŸÖÿ±ÿ≠ÿ®Ÿãÿß ÿ®ŸÉ ŸÅŸä ŸÜÿ∏ÿßŸÖ ÿ±ŸÖŸäÿ≥ÿ© - 99% ÿ•ÿ®ÿØÿßÿπÿå 1% ŸÉÿßŸÅŸäŸäŸÜ',
                'welcome.dialog.btn.start': 'ÿ•ÿ®ÿØÿ£ ÿßŸÑŸÖŸáŸÖÿ©',
                'welcome.dialog.btn.classic': 'ÿßŸÑÿπÿ±ÿ∂ ÿßŸÑŸÉŸÑÿßÿ≥ŸäŸÉŸä',
                'missions.title': 'ŸÖÿ±ŸÉÿ≤ ÿßŸÑÿ™ÿ≠ŸÉŸÖ ‚Äî ÿ¨ÿßŸáÿ≤ ŸÑŸÑŸÑÿßŸÜÿ∑ŸÑÿßŸÇ ...',
                'missions.sync.text': 'ŸÖÿ≤ÿßŸÖŸÜÿ© ÿßŸÑŸÜÿ∏ÿßŸÖ: {percent}% ŸÖŸÉÿ™ŸÖŸÑ',
                'missions.level1.title': 'ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ 01: ÿßŸÑÿ£ÿµŸÑ',
                'missions.level1.desc': 'ŸÉŸÑ ŸÇÿµÿ© ÿ™ÿ®ÿØÿ£ ŸÖŸÜ ŸÖŸÉÿßŸÜ ŸÖÿß.',
                'missions.level2.title': 'ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ 02: ÿßŸÑŸÖŸÑÿπÿ®',
                'missions.level2.desc': 'ÿ£ŸäŸÜ ÿ™ÿ™ÿ≠ŸàŸÑ ÿßŸÑÿ£ŸÅŸÉÿßÿ± ÿ•ŸÑŸâ ŸÖÿ±ÿ¶Ÿäÿßÿ™',
                'missions.level3.title': 'ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ 03: ÿµŸÜÿØŸàŸÇ ÿßŸÑÿ£ÿØŸàÿßÿ™',
                'missions.level3.desc': 'ÿßŸÉÿ™ÿ¥ŸÅ ÿ™ÿ±ÿ≥ÿßŸÜÿ™Ÿä ÿßŸÑÿ•ÿ®ÿØÿßÿπŸäÿ©',
                'missions.level4.title': 'ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ 04: ÿßŸÑÿ®Ÿàÿßÿ®ÿ© ÿßŸÑŸÜŸáÿßÿ¶Ÿäÿ©',
                'missions.level4.desc': 'ŸÑŸÜÿ™ŸàÿßÿµŸÑ ŸàŸÜÿ®ÿØÿπ ŸÖÿπŸãÿß',
                'missions.level.status.unlocked': 'ÿßŸÑÿ≠ÿßŸÑÿ©: ŸÖŸÅÿ™Ÿàÿ≠',
                'missions.level.status.locked': 'ÿßŸÑÿ≠ÿßŸÑÿ©: ŸÖŸÇŸÅŸÑ',
                'missions.tip': '>> ŸÜÿµŸäÿ≠ÿ©: ÿ£ŸÉŸÖŸÑ ÿ¨ŸÖŸäÿπ ÿßŸÑŸÖÿ≥ÿ™ŸàŸäÿßÿ™ ŸÑŸÅÿ™ÿ≠ ÿßŸÑŸÜŸáÿßŸäÿ© ÿßŸÑÿ≥ÿ±Ÿäÿ©_',
                'origin.title': 'ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ 01: ÿßŸÑÿ£ÿµŸÑ',
                'origin.subtitle': 'ŸÉŸÑ ŸÇÿµÿ© ÿ™ÿ®ÿØÿ£ ŸÖŸÜ ŸÖŸÉÿßŸÜ ŸÖÿßÿå ŸàŸÇÿµÿ™Ÿä ÿ™ÿ®ÿØÿ£ ŸÖŸÜ ÿ≥ÿ∑ŸäŸÅ',
                'origin.boot.line1': 'ÿ™ÿ¥ÿ∫ŸäŸÑ ŸÜÿ∏ÿßŸÖ ÿ™ÿ¥ÿ∫ŸäŸÑ ÿ±ŸÖŸäÿ≥ÿ© v1.0 ...',
                'origin.boot.line2': 'ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ ÿ∞ŸÉÿ±Ÿäÿßÿ™ ÿßŸÑÿ∑ŸÅŸàŸÑÿ©...',
                'origin.boot.line3': 'ÿ¨ÿßÿ±Ÿä ÿ™ÿ≠ŸÖŸäŸÑ Ÿàÿ≠ÿØÿßÿ™ ÿßŸÑÿ•ÿ®ÿØÿßÿπ...',
                'origin.boot.line4': 'ÿßŸÑŸÜÿ∏ÿßŸÖ ÿ¨ÿßŸáÿ≤.',
                'origin.welcome': "ÿ£ŸáŸÑÿß Ÿàÿ≥ŸáŸÑÿß ÿ£ŸäŸáÿß ÿßŸÑŸÖÿ≥ÿßŸÅÿ±. ŸÑŸÇÿØ ÿØÿÆŸÑÿ™ ŸÜÿ∏ÿßŸÖ ÿ•ÿ®ÿØÿßÿπŸä ŸÖÿ®ŸÜŸä ÿπŸÑŸâ ÿßŸÑÿÆŸäÿßŸÑ ŸàÿßŸÑŸÉÿßŸÅŸäŸäŸÜ ‚òï",
                'origin.help.prompt': "ÿßŸÉÿ™ÿ® 'help' ŸÑÿ®ÿØÿ° ÿßÿ≥ÿ™ŸÉÿ¥ÿßŸÅŸÉ_",
                'origin.help.title': 'ÿßŸÑÿ£ŸàÿßŸÖÿ± ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©:',
                'origin.help.whoami': '[1] whoami      ‚Üí ÿ™ÿπÿ±ŸÅ ÿπŸÑŸâ ŸÖŸÜ Ÿàÿ±ÿßÿ° ÿßŸÑŸÜÿ∏ÿßŸÖ',
                'origin.help.origin': '[2] origin      ‚Üí ÿßŸÉÿ™ÿ¥ŸÅ ÿ£ŸäŸÜ ÿ®ÿØÿ£ÿ™ ÿßŸÑÿ≠ŸÉÿßŸäÿ©',
                'origin.help.spark': '[3] spark       ‚Üí ŸÑÿ≠ÿ∏ÿ© ÿßÿ¥ÿ™ÿπÿßŸÑ ÿßŸÑÿ•ÿ®ÿØÿßÿπ',
                'origin.help.skills': '[4] skills      ‚Üí ŸÖÿß Ÿäÿ¥ÿ∫ŸÑ ÿπŸÖŸÑŸäÿ© ÿ™ÿµŸÖŸäŸÖŸä',
                'origin.help.toolkit': '[5] toolkit     ‚Üí ÿ£ÿØŸàÿßÿ™Ÿä ÿßŸÑÿ•ÿ®ÿØÿßÿπŸäÿ© ÿßŸÑŸÖŸÅÿ∂ŸÑÿ©',
                'origin.help.contact': '[6] contact     ‚Üí ÿ™ŸàÿßÿµŸÑ ŸÖÿπŸä',
                'origin.help.lang': '[7] lang        ‚Üí ÿ™ÿ∫ŸäŸäÿ± ŸÑÿ∫ÿ© ÿßŸÑŸÜÿ∏ÿßŸÖ',
                'origin.help.exit': '[8] exit        ‚Üí ÿßŸÑÿπŸàÿØÿ© ÿ•ŸÑŸâ ÿ∫ÿ±ŸÅÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ',
                'origin.help.clear': '[9] clear       ‚Üí ÿßŸÖÿ≥ÿ≠ ÿ¥ÿßÿ¥ÿ© ÿßŸÑÿ∑ÿ±ŸÅŸäÿ©',
                'origin.whoami': "ÿ£ŸÜÿß ÿ±ŸÖŸäÿ≥ÿ© ‚Äî ŸÖÿµŸÖŸÖÿ© ÿ£ÿ™ÿ±ÿ¨ŸÖ ÿßŸÑÿ£ŸÅŸÉÿßÿ± ÿ•ŸÑŸâ ŸÖÿ¥ÿßÿπÿ±ÿå\nŸàÿßŸÑŸÖÿ¥ÿßÿπÿ± ÿ•ŸÑŸâ ÿ±ÿ≥ŸàŸÖŸäÿßÿ™.\nŸÖÿØŸÅŸàÿπÿ© ÿ®ÿßŸÑŸÅÿ∂ŸàŸÑ ŸàÿßŸÑÿ£ŸÑŸàÿßŸÜ Ÿàÿ®ÿπÿ∂ ÿßŸÑŸÅŸàÿ∂Ÿâ ÿßŸÑŸÖŸÜÿ∏ŸÖÿ© ‚ú®",
                'origin.origin': "ŸÉŸÑ ŸÇÿµÿ© ÿ™ÿ®ÿØÿ£ ŸÖŸÜ ŸÖŸÉÿßŸÜ ŸÖÿß... ŸÇÿµÿ™Ÿä ÿ®ÿØÿ£ÿ™ ŸÖŸÜ ÿ≥ÿ∑ŸäŸÅÿå ÿßŸÑÿ¨ÿ≤ÿßÿ¶ÿ± üá©üáø\nŸÖŸÜ ÿßŸÑÿ±ÿ≥ŸÖ ÿπŸÑŸâ ÿØŸÅÿßÿ™ÿ±Ÿä ÿ•ŸÑŸâ ÿ™ÿµŸÖŸäŸÖ ŸáŸàŸäÿßÿ™ ŸÖÿßÿ±ŸÉÿßÿ™ ŸÉÿßŸÖŸÑÿ© ‚Äî\nÿ±ÿ≠ŸÑÿ™Ÿä ŸÑŸÖ ÿ™ŸÉŸÜ ŸÖÿÆÿ∑ÿ∑ÿ© ÿ£ÿ®ÿØÿßŸãÿå ŸÅŸÇÿ∑ ŸÖÿ®ÿØÿπÿ© ÿ®ÿ¥ÿ∫ŸÅ.",
                'origin.spark': "ÿßŸÑÿ¥ÿ±ÿßÿ±ÿ©ÿü\nÿ±ÿ®ŸÖÿß ÿ£ŸàŸÑ ŸÖÿ±ÿ© ÿ£ÿØÿ±ŸÉÿ™ ÿ£ŸÜ ÿßŸÑÿ™ÿµŸÖŸäŸÖ ŸäŸÖŸÉŸÜŸá ÿ£ŸÜ Ÿäÿ¨ÿπŸÑ ÿßŸÑŸÜÿßÿ≥ *Ÿäÿ¥ÿπÿ±ŸàŸÜ*.\nŸÖŸÜÿ∞ ÿ∞ŸÑŸÉ ÿßŸÑÿ≠ŸäŸÜÿå ÿ£ŸÜÿß ÿ£ÿ∑ÿßÿ±ÿØ Ÿáÿ∞ÿß ÿßŸÑÿ¥ÿπŸàÿ± ‚Äî ÿ®ŸÉÿ≥ŸÑ Ÿàÿßÿ≠ÿØ ŸÅŸä ŸÉŸÑ ŸÖÿ±ÿ©.",
                'origin.skills.title': 'ÿßŸÑŸÖŸáÿßÿ±ÿßÿ™ ÿßŸÑŸÖŸÉÿ™ÿ¥ŸÅÿ©:',
                'origin.skills.list': '- ÿßŸÑŸáŸàŸäÿ© ÿßŸÑÿ®ÿµÿ±Ÿäÿ© ŸàÿßŸÑÿ™ÿµŸÖŸäŸÖ ÿßŸÑÿ¥ÿßŸÖŸÑ\n- ÿ™ÿµŸÖŸäŸÖ Ÿàÿ≥ÿßÿ¶ŸÑ ÿßŸÑÿ™ŸàÿßÿµŸÑ ÿßŸÑÿßÿ¨ÿ™ŸÖÿßÿπŸä\n- ÿßŸÑŸÅŸÜ ÿßŸÑŸÖŸÅÿßŸáŸäŸÖŸä ŸàÿßŸÑÿ±ÿ≥ŸàŸÖ ÿßŸÑÿ™Ÿàÿ∂Ÿäÿ≠Ÿäÿ©\n- ÿ≥ÿ±ÿØ ÿßŸÑŸÇÿµÿµ ŸÖŸÜ ÿÆŸÑÿßŸÑ ÿßŸÑÿ±ÿ≥ŸàŸÖŸäÿßÿ™\n- ÿßÿ≥ÿ™ŸÉÿ¥ÿßŸÅ ÿßŸÑÿ™ÿµŸÖŸäŸÖ ÿßŸÑŸÖÿ≠ÿ≥ŸëŸÜ ÿ®ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ü§ñ',
                'origin.toolkit.title': 'ÿµŸÜÿØŸàŸÇ ÿßŸÑÿ£ÿØŸàÿßÿ™ ÿ¨ÿßŸáÿ≤:',
                'origin.toolkit.list': '- Adobe Illustrator\n- Photoshop\n- Figma\n- After Effects\n- ChatGPT + Midjourney (ÿ±ŸÅÿßŸÇŸä ŸÅŸä ÿßŸÑÿ∞ŸÉÿßÿ° ÿßŸÑÿßÿµÿ∑ŸÜÿßÿπŸä ‚ö°)',
                'origin.contact': "ŸÑŸÜÿ™ŸàÿßÿµŸÑ ŸàŸÜÿ®ÿØÿπ ÿ¥Ÿäÿ¶ÿßŸã ŸÑÿß ŸäŸèŸÜÿ≥Ÿâ üí´\nÿßŸÑÿ®ÿ±ŸäÿØ ÿßŸÑÿ•ŸÑŸÉÿ™ÿ±ŸàŸÜŸä: roumaissaks1997@gmail.com\nLinktree: linktr.ee/roumaissou19",
                'origin.exit': 'ÿßŸÑÿπŸàÿØÿ© ÿ•ŸÑŸâ ÿ∫ÿ±ŸÅÿ© ÿßŸÑÿ™ÿ≠ŸÉŸÖ...\nŸÖÿ≤ÿßŸÖŸÜÿ© ÿßŸÑŸÜÿ∏ÿßŸÖ: 25% ŸÖŸÉÿ™ŸÖŸÑÿ©.',
                'origin.error': 'ÿßŸÑÿ£ŸÖÿ± ÿ∫Ÿäÿ± ŸÖŸàÿ¨ŸàÿØ.\nÿ≠ÿ™Ÿâ Ÿàÿ≠ÿØÿ© ÿßŸÑÿ•ÿ®ÿØÿßÿπ ÿßŸÑÿÆÿßÿµÿ© ÿ®Ÿä ŸÑŸÖ ÿ™ÿ≥ÿ™ÿ∑ÿπ ŸÖÿπÿßŸÑÿ¨ÿ© ÿ∞ŸÑŸÉ.\nÿ¨ÿ±ÿ® \'help\' ŸÇÿ®ŸÑ ÿ£ŸÜ ÿ£ÿ®ÿØÿ£ ŸÅŸä ÿßŸÑÿ™ÿÆŸÖŸäŸÜ ü§î',
                'origin.easter.coffee': '‚òï ÿ™ÿÆŸÖŸäÿ± ÿßŸÑÿ•ÿ®ÿØÿßÿπ... ÿ™ŸÖŸë. +15% ÿ•ŸÑŸáÿßŸÖ.',
                'origin.lang.title': 'ŸÜÿ∏ÿßŸÖ ÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑŸÑÿ∫ÿ©',
                'origin.lang.available': 'ÿßŸÑŸÑÿ∫ÿßÿ™ ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©:',
                'origin.lang.current': 'ÿßŸÑŸÑÿ∫ÿ© ÿßŸÑÿ≠ÿßŸÑŸäÿ©: {lang}',
                'origin.lang.set': 'ÿ™ŸÖ ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑŸÑÿ∫ÿ© ÿ•ŸÑŸâ: {lang}',
                'origin.lang.notavailable': 'ÿßŸÑŸÑÿ∫ÿ© \'{lang}\' ÿ∫Ÿäÿ± ŸÖÿ™ÿßÿ≠ÿ© ÿ®ÿπÿØ.\nÿßŸÑŸÑÿ∫ÿßÿ™ ÿßŸÑŸÖÿ™ÿßÿ≠ÿ©: en, fr, ar, it',
                'origin.lang.usage': 'ÿßŸÑÿßÿ≥ÿ™ÿÆÿØÿßŸÖ: lang [ÿ±ŸÖÿ≤_ÿßŸÑŸÑÿ∫ÿ©]\nŸÖÿ´ÿßŸÑ: lang ar (ŸÑŸÑÿ™ÿ®ÿØŸäŸÑ ÿ•ŸÑŸâ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©)',
                'origin.lang.prompt': 'ÿßŸÉÿ™ÿ® ÿßÿ≥ŸÖ ÿßŸÑŸÑÿ∫ÿ© ÿ£Ÿà ÿßŸÑÿ±ŸÖÿ≤ (ÿ£Ÿà ÿ£Ÿä ÿ£ŸÖÿ± ŸÑÿ•ŸÑÿ∫ÿßÿ°):',
                'origin.lang.cancelled': 'ÿ™ŸÖ ÿ•ŸÑÿ∫ÿßÿ° ÿßÿÆÿ™Ÿäÿßÿ± ÿßŸÑŸÑÿ∫ÿ©.',
                'playground.title': 'ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ 02: ÿßŸÑŸÖŸÑÿπÿ®',
                'playground.subtitle': 'ÿ£ŸäŸÜ ÿ™ÿ™ÿ≠ŸàŸÑ ÿßŸÑÿ£ŸÅŸÉÿßÿ± ÿ•ŸÑŸâ ŸÖÿ±ÿ¶Ÿäÿßÿ™',
                'level2.locked.title': 'ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ_02_ŸÖŸÇŸÅŸÑ.exe',
                'level2.locked.message': 'ÿ£ŸÉŸÖŸÑ ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ 01 ÿ£ŸàŸÑÿßŸã ŸÑŸÅÿ™ÿ≠ ÿßŸÑÿ™ÿ¨ÿ±ÿ®ÿ© ÿßŸÑŸÉÿßŸÖŸÑÿ©!',
                'level2.locked.submessage': 'ÿßÿ≥ÿ™ŸÉÿ¥ŸÅ ÿßŸÑÿ£ÿµŸÑ ŸÑÿßŸÉÿ™ÿ¥ÿßŸÅ ŸÇÿµÿ™Ÿä ŸàŸÅÿ™ÿ≠ ÿßŸÑŸÖŸÑÿπÿ®.',
                'level2.locked.btn.level1': 'ÿßÿ∞Ÿáÿ® ÿ•ŸÑŸâ ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ 01',
                'level2.locked.btn.emergency': 'ŸàÿµŸàŸÑ ÿ∑Ÿàÿßÿ±ÿ¶',
                'coming.soon': 'Ÿáÿ∞ÿß ÿßŸÑŸÖÿ≥ÿ™ŸàŸâ ŸÇÿßÿØŸÖ ŸÇÿ±Ÿäÿ®ÿßŸã! ÿßÿ®ŸÇ ŸÖÿ™ÿßÿ®ÿπÿßŸã...',
                'coming.soon.btn': 'ÿ≠ÿ≥ŸÜÿßŸã',
                'footer.text': '¬© 2025 ÿ±ŸÖŸäÿ≥ÿ© ŸÉŸàÿ≥ÿ© ‚Äì ÿ•ÿµÿØÿßÿ± ÿ∑Ÿàÿ± ÿßŸÑŸÇÿµÿ©'
            },
            'it': {
                'lang.toggle.text': 'IT',
                'window.minimize': '-',
                'window.close': 'x',
                'window.title.welcome': '',
                'window.title.missions': 'mission_selector.exe',
                'welcome.logo.p1': 'Sostituisci questo con il tuo logo',
                'welcome.logo.p2': 'Roumaissa',
                'welcome.logo.p3': '(Da my-portfolio-design1.png)',
                'welcome.dialog.title': 'Welcome.exe',
                'welcome.dialog.h1': "Ecco la zona di Roumaissa",
                'welcome.dialog.p1': 'Oh, un altro portfolio di designer tipico... ma credimi, questo ha davvero personalit√†',
                'welcome.dialog.p2': 'Avvio del sistema ...',
                'welcome.dialog.p3': "Benvenuto nel Sistema Operativo di Roumaissa - 99% creativit√†, 1% caffeina",
                'welcome.dialog.btn.start': 'Inizia missione',
                'welcome.dialog.btn.classic': 'Vista classica',
                'missions.title': 'Centro di Controllo Missione ‚Äî Pronto per il Lancio ...',
                'missions.sync.text': 'Sincronizzazione Sistema: {percent}% completata',
                'missions.level1.title': 'livello 01: l\'origine',
                'missions.level1.desc': 'Ogni storia inizia da qualche parte.',
                'missions.level2.title': 'livello 02: il Parco Giochi',
                'missions.level2.desc': 'Dove le idee si trasformano in immagini',
                'missions.level3.title': 'livello 03: la Cassetta degli Attrezzi',
                'missions.level3.desc': 'Scopri il mio arsenale creativo',
                'missions.level4.title': 'livello 04: il Portale Finale',
                'missions.level4.desc': "Connettiamoci e creiamo insieme",
                'missions.level.status.unlocked': 'Stato: sbloccato',
                'missions.level.status.locked': 'Stato: bloccato',
                'missions.tip': '>> Consiglio: Completa tutti i livelli per sbloccare il finale segreto_',
                'origin.title': 'Livello 01: L\'Origine',
                'origin.subtitle': 'Ogni storia inizia da qualche parte, e la mia inizia a S√©tif',
                'origin.boot.line1': 'Avvio del sistema operativo Roumaisa v1.0 ...',
                'origin.boot.line2': 'Caricamento dei ricordi d\'infanzia...',
                'origin.boot.line3': 'Caricamento dei moduli di creativit√†...',
                'origin.boot.line4': 'Sistema pronto.',
                'origin.welcome': "Benvenuto, viaggiatore. Sei entrato in un sistema creativo costruito con immaginazione e caffeina ‚òï",
                'origin.help.prompt': "Digita 'help' per iniziare la tua esplorazione_",
                'origin.help.title': 'Comandi disponibili:',
                'origin.help.whoami': 'whoami      ‚Üí Scopri chi c\'√® dietro il sistema',
                'origin.help.origin': 'origin      ‚Üí Scopri dove tutto √® iniziato',
                'origin.help.spark': 'spark       ‚Üí Il momento in cui la creativit√† si √® accesa',
                'origin.help.skills': 'skills      ‚Üí Cosa alimenta il mio processo di progettazione',
                'origin.help.toolkit': 'toolkit     ‚Üí Le mie armi creative preferite',
                'origin.help.contact': 'contact     ‚Üí Contattami',
                'origin.help.lang': 'lang        ‚Üí Cambia la lingua del sistema',
                'origin.help.exit': 'exit        ‚Üí Ritorno al Centro di Controllo Missioni',
                'origin.help.clear': 'clear       ‚Üí Cancella lo schermo del terminale',
                'origin.whoami': "Sono Roumaisa ‚Äî una designer che traduce le idee in emozioni,\ne le emozioni in grafica.\nAlimentata da curiosit√†, colore e un pizzico di caos organizzato ‚ú®",
                'origin.origin': "Ogni storia inizia da qualche parte‚Ä¶ la mia √® iniziata a S√©tif, Algeria üá©üáø\nDal disegno su quaderni alla progettazione di identit√† di marca complete ‚Äî\nil mio viaggio non √® mai stato pianificato, solo creato appassionatamente.",
                'origin.spark': "La scintilla?\nProbabilmente la prima volta che ho capito che il design potrebbe far *sentire* le persone.\nDa allora, sto inseguendo quel sentimento ‚Äî un pixel alla volta.",
                'origin.skills.title': 'Competenze rilevate:',
                'origin.skills.list': '- Branding e Identit√† Visiva\n- Design dei Social Media\n- Concept Art e Illustrazione\n- Storytelling attraverso la grafica\n- Esplorazione di design potenziata dall\'IA ü§ñ',
                'origin.toolkit.title': 'Kit di strumenti inizializzato:',
                'origin.toolkit.list': '- Adobe Illustrator\n- Photoshop\n- Figma\n- After Effects\n- ChatGPT + Midjourney (i miei compagni IA ‚ö°)',
                'origin.contact': "Connettiamoci e creiamo qualcosa di indimenticabile üí´\nEmail: roumaissaks1997@gmail.com\nLinktree: linktr.ee/roumaissou19",
                'origin.exit': 'Ritorno al Centro di Controllo Missioni...\nSincronizzazione del sistema: 25% completata.',
                'origin.error': 'Comando non trovato.\nNeanche il mio modulo di creativit√† ha potuto elaborarlo.\nProva \'help\' prima che cominci a indovinare ü§î',
                'origin.easter.coffee': '‚òï Preparazione della creativit√†... Fatto. +15% ispirazione.',
                'origin.lang.title': 'Sistema di Selezione Lingua',
                'origin.lang.available': 'Lingue disponibili:',
                'origin.lang.current': 'Lingua corrente: {lang}',
                'origin.lang.set': 'Lingua cambiata in: {lang}',
                'origin.lang.notavailable': 'La lingua \'{lang}\' non √® ancora disponibile.\nLingue disponibili: en, fr, ar, it',
                'origin.lang.usage': 'Utilizzo: lang [codice_lingua]\nEsempio: lang it (per passare all\'italiano)',
                'origin.lang.prompt': 'Digita il nome o il codice della lingua (o qualsiasi comando per annullare):',
                'origin.lang.cancelled': 'Selezione lingua annullata.',
                'playground.title': 'Livello 02: Il Parco Giochi',
                'playground.subtitle': 'Dove le idee si trasformano in immagini',
                'level2.locked.title': 'livello_02_bloccato.exe',
                'level2.locked.message': 'Completa il Livello 01 prima per sbloccare l\'esperienza completa!',
                'level2.locked.submessage': 'Esplora L\'Origine per scoprire la mia storia e sbloccare Il Parco Giochi.',
                'level2.locked.btn.level1': 'Vai al Livello 01',
                'level2.locked.btn.emergency': 'Accesso di Emergenza',
                'coming.soon': 'Questo livello arriva presto! Rimani sintonizzato...',
                'coming.soon.btn': 'OK',
                'footer.text': '¬© 2025 Roumaissa Koussa ‚Äì edizione story mode'
            }
        };

        const languages = ['en', 'fr', 'ar', 'it'];
        let currentLang = 'en';

        document.addEventListener('DOMContentLoaded', () => {
            // Page Elements
            const pageWelcome = document.getElementById('page-welcome');
            const pageMissions = document.getElementById('page-missions');
            const windowTitleText = document.getElementById('window-title-text');

            // Button Elements
            const startMissionBtn = document.getElementById('start-mission-btn');
            const classicViewBtn = document.getElementById('classic-view-btn');
            const homeBtn = document.getElementById('home-btn');
            const themeToggleBtn = document.getElementById('theme-toggle');
            const langToggleBtn = document.getElementById('lang-toggle-btn');

            // Icon Elements
            const iconSun = document.getElementById('icon-sun');
            const iconMoon = document.getElementById('icon-moon');

            // --- Page Navigation ---
            function showWelcomePage() {
                // Hide all pages first (one window at a time)
                pageMissions.classList.add('hidden');
                pageOrigin.classList.add('hidden');
                if (pagePlayground) pagePlayground.classList.add('hidden');
                // Show welcome page
                pageWelcome.classList.remove('hidden');
                windowTitleText.dataset.translateKey = 'window.title.welcome';
                updateWindowTitle(); // Update title on page change
            }

            // Update progress bar and sync text based on unlocked levels
            function updateProgress() {
                const segments = Array.from(document.querySelectorAll('.progress-bar-segment'));
                const completedCount = document.querySelectorAll('.level-card.completed').length;
                const percent = completedCount * 25; // 4 levels -> 25% each

                // Update segments fill
                segments.forEach((seg, idx) => {
                    if (idx < completedCount) seg.classList.add('filled');
                    else seg.classList.remove('filled');
                });

                // Update the sync text using translation template {percent}
                const el = document.querySelector('[data-translate-key="missions.sync.text"]');
                if (el) {
                    const template = (translations[currentLang] && translations[currentLang]['missions.sync.text']) || '';
                    el.textContent = template.replace('{percent}', percent);
                }
            }

            function showMissionsPage() {
                // Hide all pages first (one window at a time)
                pageWelcome.classList.add('hidden');
                pageOrigin.classList.add('hidden');
                if (pagePlayground) pagePlayground.classList.add('hidden');
                // Show missions page
                pageMissions.classList.remove('hidden');
                windowTitleText.dataset.translateKey = 'window.title.missions';
                updateWindowTitle(); // Update title on page change
                updateProgress();
            }

            // PAGE 3: Origin Terminal
            const pageOrigin = document.getElementById('page-origin');
            const terminalOutput = document.getElementById('terminal-output');
            const terminalInput = document.getElementById('terminal-input');
            const homeBtnOrigin = document.getElementById('home-btn-origin');
            
            // Language selection mode
            let isLanguageSelectionMode = false;
            
            // Language mapping - all possible ways to write each language
            const languageMap = {
                'en': ['en', 'english', 'anglais', 'ingl√©s', 'inglese', 'ÿßŸÜÿ¨ŸÑŸäÿ≤Ÿä', 'ÿßŸÜÿ¨ŸÑŸäÿ≤Ÿäÿ©', 'ÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿä', 'ÿ•ŸÜÿ¨ŸÑŸäÿ≤Ÿäÿ©', 'eng', 'ang', 'inglish', 'inglish', 'ÿßŸÜÿ¨ŸÑŸäÿ≤ŸäŸá'],
                'fr': ['fr', 'french', 'fran√ßais', 'francais', 'frances', 'francese', 'ŸÅÿ±ŸÜÿ≥Ÿä', 'ŸÅÿ±ŸÜÿ≥Ÿäÿ©', 'franco', 'france', 'frensh', 'ŸÅÿ±ŸÜÿ≥ŸäŸá'],
                'ar': ['ar', 'arabic', 'arabe', 'arabo', '√°rabe', 'ÿπÿ±ÿ®Ÿä', 'ÿπÿ±ÿ®Ÿäÿ©', 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©', 'ÿßŸÑÿπÿ±ÿ®Ÿä', 'arab', 'ara', 'arabik', 'ÿπÿ±ÿ®ŸäŸá', 'ÿπÿ±ÿ®Ÿâ'],
                'it': ['it', 'italian', 'italien', 'italiano', 'ÿ•Ÿäÿ∑ÿßŸÑŸä', 'ÿßŸäÿ∑ÿßŸÑŸä', 'ÿ•Ÿäÿ∑ÿßŸÑŸäÿ©', 'ÿßŸäÿ∑ÿßŸÑŸäÿ©', 'italia', 'italy', 'italien', 'ÿßŸäÿ∑ÿßŸÑŸäŸá']
            };

            function showOriginPage() {
                // Hide all pages first (one window at a time)
                pageWelcome.classList.add('hidden');
                pageMissions.classList.add('hidden');
                if (pagePlayground) pagePlayground.classList.add('hidden');
                // Show origin page
                pageOrigin.classList.remove('hidden');
                windowTitleText.dataset.translateKey = 'window.title.missions'; // Keep same title
                updateWindowTitle();
                // Focus on input and start boot sequence
                setTimeout(() => terminalInput.focus(), 100);
                if (terminalOutput.textContent.trim() === '') {
                    startBootSequence();
                }
            }

            function showMissionsPageFromOrigin() {
                // Hide all pages first (one window at a time)
                pageOrigin.classList.add('hidden');
                pageWelcome.classList.add('hidden');
                if (pagePlayground) pagePlayground.classList.add('hidden');
                // Show missions page
                pageMissions.classList.remove('hidden');
            }

            // PAGE 4: Playground File Explorer
            const pagePlayground = document.getElementById('page-playground');
            const homeBtnPlayground = document.getElementById('home-btn-playground');
            
            // Portfolio Data Structure
            const portfolioData = {
                'C:\\Roumaissa\\Portfolio': {
                    type: 'folder',
                    items: [
                        { name: 'Branding', type: 'folder', path: 'C:\\Roumaissa\\Portfolio\\Branding' },
                        { name: 'Social Media', type: 'folder', path: 'C:\\Roumaissa\\Portfolio\\Social Media' },
                        { name: 'Web Design', type: 'folder', path: 'C:\\Roumaissa\\Portfolio\\Web Design' },
                        { name: 'Illustration', type: 'folder', path: 'C:\\Roumaissa\\Portfolio\\Illustration' }
                    ]
                },
                'C:\\Roumaissa\\Portfolio\\Branding': {
                    type: 'folder',
                    items: [
                        { name: 'brand_identity.brand', type: 'file', image: 'https://via.placeholder.com/400x300/00A2E8/FFFFFF?text=Brand+Identity', date: '2024-01-15', client: 'Tech Startup', category: 'Branding', link: '#' },
                        { name: 'logo_design.brand', type: 'file', image: 'https://via.placeholder.com/400x300/F99D1C/FFFFFF?text=Logo+Design', date: '2024-02-20', client: 'Local Business', category: 'Branding', link: '#' },
                        { name: 'corporate_identity.brand', type: 'file', image: 'https://via.placeholder.com/400x300/00A2E8/FFFFFF?text=Corporate+Identity', date: '2024-03-10', client: 'Enterprise', category: 'Branding', link: '#' }
                    ]
                },
                'C:\\Roumaissa\\Portfolio\\Social Media': {
                    type: 'folder',
                    items: [
                        { name: 'instagram_campaign.insta', type: 'file', image: 'https://via.placeholder.com/400x300/F99D1C/FFFFFF?text=Instagram+Campaign', date: '2024-04-05', client: 'Fashion Brand', category: 'Social Media', link: '#' },
                        { name: 'facebook_ads.social', type: 'file', image: 'https://via.placeholder.com/400x300/00A2E8/FFFFFF?text=Facebook+Ads', date: '2024-05-12', client: 'E-commerce', category: 'Social Media', link: '#' },
                        { name: 'twitter_banner.social', type: 'file', image: 'https://via.placeholder.com/400x300/F99D1C/FFFFFF?text=Twitter+Banner', date: '2024-06-18', client: 'Tech Company', category: 'Social Media', link: '#' }
                    ]
                },
                'C:\\Roumaissa\\Portfolio\\Web Design': {
                    type: 'folder',
                    items: [
                        { name: 'landing_page.web', type: 'file', image: 'https://via.placeholder.com/400x300/00A2E8/FFFFFF?text=Landing+Page', date: '2024-07-22', client: 'SaaS Company', category: 'Web Design', link: '#' },
                        { name: 'dashboard_ui.web', type: 'file', image: 'https://via.placeholder.com/400x300/F99D1C/FFFFFF?text=Dashboard+UI', date: '2024-08-30', client: 'Startup', category: 'Web Design', link: '#' },
                        { name: 'mobile_app.web', type: 'file', image: 'https://via.placeholder.com/400x300/00A2E8/FFFFFF?text=Mobile+App', date: '2024-09-15', client: 'Mobile App', category: 'Web Design', link: '#' }
                    ]
                },
                'C:\\Roumaissa\\Portfolio\\Illustration': {
                    type: 'folder',
                    items: [
                        { name: 'character_design.ill', type: 'file', image: 'https://via.placeholder.com/400x300/F99D1C/FFFFFF?text=Character+Design', date: '2024-10-01', client: 'Game Studio', category: 'Illustration', link: '#' },
                        { name: 'icon_set.ill', type: 'file', image: 'https://via.placeholder.com/400x300/00A2E8/FFFFFF?text=Icon+Set', date: '2024-11-10', client: 'App Developer', category: 'Illustration', link: '#' },
                        { name: 'vector_art.ill', type: 'file', image: 'https://via.placeholder.com/400x300/F99D1C/FFFFFF?text=Vector+Art', date: '2024-12-05', client: 'Design Agency', category: 'Illustration', link: '#' }
                    ]
                }
            };

            let currentPath = 'C:\\Roumaissa\\Portfolio';
            let pathHistory = ['C:\\Roumaissa\\Portfolio'];
            let historyIndex = 0;
            let currentZoom = 100;

            function showPlaygroundPage() {
                // Hide all pages first (one window at a time)
                pageWelcome.classList.add('hidden');
                pageMissions.classList.add('hidden');
                pageOrigin.classList.add('hidden');
                // Show playground page
                if (pagePlayground) {
                    pagePlayground.classList.remove('hidden');
                    windowTitleText.dataset.translateKey = 'window.title.missions';
                    updateWindowTitle();
                    loadFolder(currentPath);
                }
            }

            function loadFolder(path) {
                // Show loading
                const loadingEl = document.getElementById('explorer-loading');
                loadingEl.classList.remove('hidden');
                
                // Reset loading animation
                const progressEl = loadingEl.querySelector('.loading-progress');
                progressEl.style.width = '0%';
                setTimeout(() => {
                    progressEl.style.width = '100%';
                }, 10);

                setTimeout(() => {
                    loadingEl.classList.add('hidden');
                    
                    // Update address bar
                    const addressInput = document.getElementById('explorer-address');
                    addressInput.value = path;
                    
                    // Update active tree item
                    document.querySelectorAll('.tree-item').forEach(item => {
                        item.classList.remove('active');
                        if (item.dataset.path === path) {
                            item.classList.add('active');
                        }
                    });
                    
                    // Load folder content
                    const folder = portfolioData[path];
                    const grid = document.getElementById('explorer-grid');
                    grid.innerHTML = '';
                    
                    if (folder && folder.items) {
                        folder.items.forEach(item => {
                            const itemEl = document.createElement('div');
                            itemEl.className = 'explorer-item';
                            itemEl.dataset.path = item.path || path;
                            itemEl.dataset.type = item.type;
                            
                            if (item.type === 'folder') {
                                itemEl.innerHTML = `
                                    <div class="explorer-item-icon">üìÅ</div>
                                    <div class="explorer-item-label">${item.name}</div>
                                `;
                                itemEl.addEventListener('click', () => {
                                    navigateToFolder(item.path);
                                });
                            } else {
                                const iconMap = {
                                    'brand': 'üé®',
                                    'insta': 'üì±',
                                    'social': 'üì≤',
                                    'web': 'üåê',
                                    'ill': '‚úèÔ∏è'
                                };
                                const ext = item.name.split('.').pop();
                                const icon = iconMap[ext] || 'üìÑ';
                                
                                itemEl.innerHTML = `
                                    <div class="explorer-item-icon">${icon}</div>
                                    <div class="explorer-item-label">${item.name}</div>
                                `;
                                itemEl.addEventListener('click', () => {
                                    openProject(item);
                                });
                            }
                            
                            grid.appendChild(itemEl);
                        });
                    }
                    
                    // Update navigation buttons
                    updateNavigationButtons();
                }, 500);
            }

            function navigateToFolder(path) {
                if (portfolioData[path]) {
                    // Add to history if not going back/forward
                    if (path !== pathHistory[historyIndex]) {
                        pathHistory = pathHistory.slice(0, historyIndex + 1);
                        pathHistory.push(path);
                        historyIndex = pathHistory.length - 1;
                    }
                    currentPath = path;
                    loadFolder(path);
                }
            }

            function updateNavigationButtons() {
                const backBtn = document.getElementById('explorer-back');
                const forwardBtn = document.getElementById('explorer-forward');
                const upBtn = document.getElementById('explorer-up');
                
                backBtn.disabled = historyIndex <= 0;
                forwardBtn.disabled = historyIndex >= pathHistory.length - 1;
                
                const parentPath = currentPath.split('\\').slice(0, -1).join('\\');
                upBtn.disabled = !portfolioData[parentPath] || parentPath === 'C:\\Roumaissa';
            }

            function openProject(project) {
                const modal = document.getElementById('project-viewer-modal');
                const viewerImage = document.getElementById('viewer-image');
                const viewerTitle = document.getElementById('viewer-title');
                const propertyName = document.getElementById('property-name');
                const propertyDate = document.getElementById('property-date');
                const propertyClient = document.getElementById('property-client');
                const propertyCategory = document.getElementById('property-category');
                const propertyLink = document.getElementById('property-link');
                
                viewerImage.src = project.image;
                viewerTitle.textContent = project.name;
                propertyName.textContent = project.name.replace(/\.[^.]+$/, '');
                propertyDate.textContent = project.date;
                propertyClient.textContent = project.client;
                propertyCategory.textContent = project.category;
                propertyLink.href = project.link;
                
                currentZoom = 100;
                viewerImage.style.transform = `scale(${currentZoom / 100})`;
                
                modal.classList.remove('hidden');
            }

            function closeProjectViewer() {
                const modal = document.getElementById('project-viewer-modal');
                modal.classList.add('hidden');
            }

            // File Explorer Event Handlers
            if (pagePlayground) {
                document.getElementById('explorer-back')?.addEventListener('click', () => {
                    if (historyIndex > 0) {
                        historyIndex--;
                        currentPath = pathHistory[historyIndex];
                        loadFolder(currentPath);
                    }
                });

                document.getElementById('explorer-forward')?.addEventListener('click', () => {
                    if (historyIndex < pathHistory.length - 1) {
                        historyIndex++;
                        currentPath = pathHistory[historyIndex];
                        loadFolder(currentPath);
                    }
                });

                document.getElementById('explorer-up')?.addEventListener('click', () => {
                    const parentPath = currentPath.split('\\').slice(0, -1).join('\\');
                    if (portfolioData[parentPath] && parentPath !== 'C:\\Roumaissa') {
                        navigateToFolder(parentPath);
                    }
                });

                document.querySelectorAll('.tree-item').forEach(item => {
                    item.addEventListener('click', (e) => {
                        e.stopPropagation();
                        const path = item.dataset.path;
                        if (path && portfolioData[path]) {
                            navigateToFolder(path);
                        }
                    });
                });

                document.getElementById('viewer-close-btn')?.addEventListener('click', closeProjectViewer);
                document.getElementById('viewer-properties-btn')?.addEventListener('click', () => {
                    const properties = document.getElementById('viewer-properties');
                    properties.classList.toggle('hidden');
                });

                document.getElementById('viewer-zoom-in')?.addEventListener('click', () => {
                    currentZoom = Math.min(currentZoom + 25, 200);
                    document.getElementById('viewer-image').style.transform = `scale(${currentZoom / 100})`;
                });

                document.getElementById('viewer-zoom-out')?.addEventListener('click', () => {
                    currentZoom = Math.max(currentZoom - 25, 50);
                    document.getElementById('viewer-image').style.transform = `scale(${currentZoom / 100})`;
                });

                document.getElementById('viewer-rotate')?.addEventListener('click', () => {
                    const img = document.getElementById('viewer-image');
                    const currentRotate = img.style.transform.match(/rotate\((\d+)deg\)/) ? 
                        parseInt(img.style.transform.match(/rotate\((\d+)deg\)/)[1]) : 0;
                    const newRotate = (currentRotate + 90) % 360;
                    img.style.transform = `${img.style.transform.replace(/rotate\(\d+deg\)/, '')} rotate(${newRotate}deg)`.trim();
                });

                homeBtnPlayground?.addEventListener('click', () => {
                    showMissionsPage();
                });

                // Close modal on outside click
                document.getElementById('project-viewer-modal')?.addEventListener('click', (e) => {
                    if (e.target.id === 'project-viewer-modal') {
                        closeProjectViewer();
                    }
                });
            }

            // Terminal Boot Sequence
            function startBootSequence() {
                terminalOutput.innerHTML = '';
                const lines = [
                    { key: 'origin.boot.line1', delay: 0 },
                    { key: 'origin.boot.line2', delay: 800 },
                    { key: 'origin.boot.line3', delay: 1600 },
                    { key: 'origin.boot.line4', delay: 2400 }
                ];

                lines.forEach(({ key, delay }) => {
                    setTimeout(() => {
                        const text = translations[currentLang][key] || '';
                        addTerminalLine(text);
                    }, delay);
                });

                setTimeout(() => {
                    addTerminalLine('');
                    addTerminalLine(translations[currentLang]['origin.welcome'] || '');
                    addTerminalLine(translations[currentLang]['origin.help.prompt'] || '');
                }, 3200);
            }

            function addTerminalLine(text, isCommand = false) {
                const line = document.createElement('div');
                line.className = 'terminal-line';
                if (isCommand) {
                    line.innerHTML = `<span class="terminal-prompt">>>> </span><span class="terminal-command">${escapeHtml(text)}</span>`;
                } else {
                    line.textContent = text;
                }
                terminalOutput.appendChild(line);
                terminalOutput.scrollTop = terminalOutput.scrollHeight;
            }

            function escapeHtml(text) {
                const map = {
                    '&': '&amp;',
                    '<': '&lt;',
                    '>': '&gt;',
                    '"': '&quot;',
                    "'": '&#039;'
                };
                return text.replace(/[&<>"']/g, m => map[m]);
            }

            // Function to detect language from any input
            function detectLanguage(input) {
                const normalizedInput = input.trim().toLowerCase();
                for (const [langCode, variants] of Object.entries(languageMap)) {
                    if (variants.includes(normalizedInput)) {
                        return langCode;
                    }
                }
                return null;
            }

            // Terminal Command Handler
            function processCommand(input) {
                const cmd = input.trim().toLowerCase();
                
                // If in language selection mode, check if input is a language or another command
                if (isLanguageSelectionMode) {
                    // Check if it's another command (not a language selection)
                    const isOtherCommand = ['help', 'whoami', 'origin', 'spark', 'skills', 'toolkit', 'contact', 'exit', 'clear', 'coffee'].includes(cmd);
                    
                    if (isOtherCommand) {
                        // Cancel language selection mode and process the command normally
                        isLanguageSelectionMode = false;
                        addTerminalLine(input, true);
                        addTerminalLine('');
                        addTerminalLine(translations[currentLang]['origin.lang.cancelled'] || 'Language selection cancelled.');
                        addTerminalLine('');
                        // Process the command (will be handled below)
                    } else {
                        // Try to detect language
                        const detectedLang = detectLanguage(input);
                        if (detectedLang) {
                            addTerminalLine(input, true);
                            addTerminalLine('');
                            setLanguage(detectedLang);
                            const langNames = { 'en': 'English', 'fr': 'Fran√ßais', 'ar': 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©', 'it': 'Italiano' };
                            const langName = langNames[detectedLang] || detectedLang;
                            addTerminalLine((translations[detectedLang]['origin.lang.set'] || '').replace('{lang}', langName));
                            isLanguageSelectionMode = false;
                            addTerminalLine('');
                            return;
                        } else {
                            // Invalid language input - try to suggest similar
                            addTerminalLine(input, true);
                            addTerminalLine('');
                            const inputLower = input.toLowerCase();
                            let suggestion = '';
                            
                            // Simple suggestion logic
                            if (inputLower.includes('eng') || inputLower.includes('angl')) {
                                suggestion = '\nDid you mean: english, en?';
                            } else if (inputLower.includes('fren') || inputLower.includes('fran')) {
                                suggestion = '\nDid you mean: french, fr, fran√ßais?';
                            } else if (inputLower.includes('arab') || inputLower.includes('ÿπÿ±ÿ®')) {
                                suggestion = '\nDid you mean: arabic, ar, ÿπÿ±ÿ®Ÿäÿ©?';
                            } else if (inputLower.includes('ital') || inputLower.includes('ÿßŸäÿ∑ÿßŸÑ')) {
                                suggestion = '\nDid you mean: italian, it, italiano?';
                            }
                            
                            addTerminalLine((translations[currentLang]['origin.lang.notavailable'] || '').replace('{lang}', input) + suggestion);
                            addTerminalLine('');
                            addTerminalLine(translations[currentLang]['origin.lang.usage'] || '');
                            addTerminalLine('');
                            return;
                        }
                    }
                } else {
                    addTerminalLine(input, true);
                }

                if (cmd === 'help') {
                    const helpTitle = translations[currentLang]['origin.help.title'] || '';
                    addTerminalLine('');
                    addTerminalLine(helpTitle);
                    addTerminalLine('----------------------------------------------');
                    addTerminalLine(translations[currentLang]['origin.help.whoami'] || '');
                    addTerminalLine(translations[currentLang]['origin.help.origin'] || '');
                    addTerminalLine(translations[currentLang]['origin.help.spark'] || '');
                    addTerminalLine(translations[currentLang]['origin.help.skills'] || '');
                    addTerminalLine(translations[currentLang]['origin.help.toolkit'] || '');
                    addTerminalLine(translations[currentLang]['origin.help.contact'] || '');
                    addTerminalLine(translations[currentLang]['origin.help.lang'] || '');
                    addTerminalLine(translations[currentLang]['origin.help.exit'] || '');
                    addTerminalLine(translations[currentLang]['origin.help.clear'] || '');
                    addTerminalLine('----------------------------------------------');
                } else if (cmd === 'whoami') {
                    addTerminalLine('');
                    addTerminalLine(translations[currentLang]['origin.whoami'] || '');
                } else if (cmd === 'origin') {
                    addTerminalLine('');
                    addTerminalLine(translations[currentLang]['origin.origin'] || '');
                } else if (cmd === 'spark') {
                    addTerminalLine('');
                    addTerminalLine(translations[currentLang]['origin.spark'] || '');
                } else if (cmd === 'skills') {
                    addTerminalLine('');
                    addTerminalLine(translations[currentLang]['origin.skills.title'] || '');
                    addTerminalLine(translations[currentLang]['origin.skills.list'] || '');
                } else if (cmd === 'toolkit') {
                    addTerminalLine('');
                    addTerminalLine(translations[currentLang]['origin.toolkit.title'] || '');
                    addTerminalLine(translations[currentLang]['origin.toolkit.list'] || '');
                } else if (cmd === 'contact') {
                    addTerminalLine('');
                    addTerminalLine(translations[currentLang]['origin.contact'] || '');
                } else if (cmd.startsWith('lang')) {
                    addTerminalLine('');
                    const parts = input.trim().split(/\s+/);
                    if (parts.length === 1) {
                        // Enter interactive language selection mode
                        addTerminalLine(translations[currentLang]['origin.lang.title'] || '');
                        addTerminalLine('==============================================');
                        addTerminalLine(translations[currentLang]['origin.lang.available'] || '');
                        addTerminalLine('');
                        addTerminalLine('  [1] English (en)');
                        addTerminalLine('      Examples: english, anglais, ÿßŸÜÿ¨ŸÑŸäÿ≤Ÿä');
                        addTerminalLine('');
                        addTerminalLine('  [2] Fran√ßais (fr)');
                        addTerminalLine('      Examples: french, francais, ŸÅÿ±ŸÜÿ≥Ÿä');
                        addTerminalLine('');
                        addTerminalLine('  [3] ÿßŸÑÿπÿ±ÿ®Ÿäÿ© (ar)');
                        addTerminalLine('      Examples: arabic, arabe, ÿπÿ±ÿ®Ÿäÿ©');
                        addTerminalLine('');
                        addTerminalLine('  [4] Italiano (it)');
                        addTerminalLine('      Examples: italian, italien, ÿ•Ÿäÿ∑ÿßŸÑŸä');
                        addTerminalLine('');
                        addTerminalLine('==============================================');
                        const langNames = { 'en': 'English', 'fr': 'Fran√ßais', 'ar': 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©', 'it': 'Italiano' };
                        const currentLangName = langNames[currentLang] || currentLang;
                        addTerminalLine((translations[currentLang]['origin.lang.current'] || '').replace('{lang}', currentLangName));
                        addTerminalLine('');
                        addTerminalLine(translations[currentLang]['origin.lang.prompt'] || 'Type the language name or code (or any command to cancel):');
                        isLanguageSelectionMode = true;
                    } else if (parts.length === 2) {
                        // Direct language change (backward compatibility)
                        const detectedLang = detectLanguage(parts[1]);
                        const langNames = { 'en': 'English', 'fr': 'Fran√ßais', 'ar': 'ÿßŸÑÿπÿ±ÿ®Ÿäÿ©', 'it': 'Italiano' };
                        if (detectedLang) {
                            setLanguage(detectedLang);
                            const langName = langNames[detectedLang] || detectedLang;
                            addTerminalLine((translations[detectedLang]['origin.lang.set'] || '').replace('{lang}', langName));
                        } else {
                            addTerminalLine((translations[currentLang]['origin.lang.notavailable'] || '').replace('{lang}', parts[1]));
                        }
                    } else {
                        addTerminalLine(translations[currentLang]['origin.lang.usage'] || '');
                    }
                } else if (cmd === 'clear') {
                    terminalOutput.innerHTML = '';
                    addTerminalLine(translations[currentLang]['origin.welcome'] || '');
                    addTerminalLine(translations[currentLang]['origin.help.prompt'] || '');
                } else if (cmd === 'exit') {
                    addTerminalLine('');
                    addTerminalLine(translations[currentLang]['origin.exit'] || '');
                    // Mark Level 01 as completed and unlock Level 02
                    setTimeout(() => {
                        // Mark Level 01 as completed (for progress) and change to unlocked visually
                        if (level1Card && !level1Card.classList.contains('completed')) {
                            level1Card.classList.add('completed');
                        }
                        // Change Level 01 from locked to unlocked visually
                        if (level1Card && level1Card.classList.contains('locked')) {
                            level1Card.classList.remove('locked');
                            level1Card.classList.add('unlocked');
                            level1Card.querySelector('.level-status').textContent = translations[currentLang]['missions.level.status.unlocked'] || 'Status: unlocked';
                            level1Card.querySelector('.level-status').classList.remove('locked');
                            level1Card.querySelector('.level-status').classList.add('unlocked');
                        }
                        // Unlock Level 02 (internally) but keep it looking locked
                        const levelCard2 = document.getElementById('level-2-card');
                        if (levelCard2 && levelCard2.classList.contains('locked')) {
                            // Add a custom attribute to mark it as unlocked internally
                            levelCard2.setAttribute('data-unlocked', 'true');
                            // Click handler is already added on page load
                        }
                        // Update progress (25% for Level 01 completed)
                        updateProgress();
                        showMissionsPageFromOrigin();
                    }, 1000);
                } else if (cmd === 'coffee') {
                    addTerminalLine('');
                    addTerminalLine(translations[currentLang]['origin.easter.coffee'] || '');
                } else if (cmd !== '') {
                    addTerminalLine('');
                    addTerminalLine(translations[currentLang]['origin.error'] || '');
                }
                addTerminalLine('');
            }

            // Terminal Input Handler
            terminalInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    processCommand(terminalInput.value);
                    terminalInput.value = '';
                }
            });

            startMissionBtn.addEventListener('click', showMissionsPage);
            homeBtn.addEventListener('click', showWelcomePage);
            homeBtnOrigin.addEventListener('click', showMissionsPageFromOrigin);

            // Level 02 Locked Modal Handler
            const level2LockedModal = document.getElementById('level2-locked-modal');
            const closeLevel2LockedBtn = document.getElementById('close-level2-locked-btn');
            const goToLevel1Btn = document.getElementById('go-to-level1-btn');
            const emergencyAccessBtn = document.getElementById('emergency-access-btn');

            function showLevel2LockedModal() {
                level2LockedModal.classList.remove('hidden');
            }

            function hideLevel2LockedModal() {
                level2LockedModal.classList.add('hidden');
            }

            if (closeLevel2LockedBtn) {
                closeLevel2LockedBtn.addEventListener('click', hideLevel2LockedModal);
            }

            if (goToLevel1Btn) {
                goToLevel1Btn.addEventListener('click', () => {
                    hideLevel2LockedModal();
                    showOriginPage();
                });
            }

            if (emergencyAccessBtn) {
                emergencyAccessBtn.addEventListener('click', () => {
                    hideLevel2LockedModal();
                    showPlaygroundPage();
                });
            }

            // Close modal when clicking outside
            if (level2LockedModal) {
                level2LockedModal.addEventListener('click', (e) => {
                    if (e.target === level2LockedModal) {
                        hideLevel2LockedModal();
                    }
                });
            }

            // Coming Soon Modal Handler
            const comingSoonModal = document.getElementById('coming-soon-modal');
            const closeComingSoonBtn = document.getElementById('close-coming-soon-btn');
            const okComingSoonBtn = document.getElementById('ok-coming-soon-btn');

            function showComingSoonModal() {
                comingSoonModal.classList.remove('hidden');
            }

            function hideComingSoonModal() {
                comingSoonModal.classList.add('hidden');
            }

            if (closeComingSoonBtn) {
                closeComingSoonBtn.addEventListener('click', hideComingSoonModal);
            }

            if (okComingSoonBtn) {
                okComingSoonBtn.addEventListener('click', hideComingSoonModal);
            }

            // Close modal when clicking outside
            comingSoonModal.addEventListener('click', (e) => {
                if (e.target === comingSoonModal) {
                    hideComingSoonModal();
                }
            });

            // Level 01 Card Click Handler
            const level1Card = document.getElementById('level-1-card');
            if (level1Card) {
                level1Card.addEventListener('click', (e) => {
                    e.preventDefault();
                    // Unlock Level 01 when entered
                    if (level1Card.classList.contains('locked')) {
                        level1Card.classList.remove('locked');
                        level1Card.classList.add('unlocked');
                        level1Card.querySelector('.level-status').textContent = translations[currentLang]['missions.level.status.unlocked'] || 'Status: unlocked';
                        level1Card.querySelector('.level-status').classList.remove('locked');
                        level1Card.querySelector('.level-status').classList.add('unlocked');
                    }
                    showOriginPage();
                });
            }

            // Level 02 Card Click Handler
            const level2Card = document.getElementById('level-2-card');
            if (level2Card) {
                level2Card.addEventListener('click', () => {
                    // Check if level is unlocked
                    if (level2Card.getAttribute('data-unlocked') === 'true' || !level2Card.classList.contains('locked')) {
                        showPlaygroundPage();
                    } else {
                        showLevel2LockedModal();
                    }
                });
            }

            // Level 03 Card Click Handler
            const level3Card = document.getElementById('level-3-card');
            if (level3Card) {
                level3Card.addEventListener('click', () => {
                    showComingSoonModal();
                });
            }

            // Level 04 Card Click Handler
            const level4Card = document.getElementById('level-4-card');
            if (level4Card) {
                level4Card.addEventListener('click', () => {
                    showComingSoonModal();
                });
            }

            classicViewBtn.addEventListener('click', () => {
                // You can replace this with a link to another page or a modal
                console.log('Classic View button clicked!');
                // Example: window.location.href = '/classic-portfolio.html';
            });

            // --- Theme Toggler ---

            function updateThemeIcons(isDark) {
                if (isDark) {
                    iconSun.classList.add('hidden');
                    iconMoon.classList.remove('hidden');
                } else {
                    iconSun.classList.remove('hidden');
                    iconMoon.classList.add('hidden');
                }
            }

            function toggleTheme() {
                const htmlEl = document.documentElement;
                const isDark = htmlEl.classList.toggle('dark');
                localStorage.setItem('theme', isDark ? 'dark' : 'light');
                updateThemeIcons(isDark);
            }

            function initTheme() {
                const savedTheme = localStorage.getItem('theme');
                const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;

                if (savedTheme === 'dark' || (!savedTheme && prefersDark)) {
                    document.documentElement.classList.add('dark');
                    updateThemeIcons(true);
                } else {
                    document.documentElement.classList.remove('dark');
                    updateThemeIcons(false);
                }
            }

            themeToggleBtn.addEventListener('click', toggleTheme);

            // --- Language Toggler ---

            function updateWindowTitle() {
                const titleKey = windowTitleText.dataset.translateKey;
                if (titleKey) {
                    windowTitleText.textContent = translations[currentLang][titleKey] || '';
                } else {
                    windowTitleText.textContent = '';
                }
            }

            function setLanguage(lang) {
                if (!languages.includes(lang)) lang = 'en';
                currentLang = lang;

                // Set HTML lang and dir
                document.documentElement.lang = lang;
                document.documentElement.dir = lang === 'ar' ? 'rtl' : 'ltr';

                // Save preference
                localStorage.setItem('lang', lang);

                // Update lang toggle dropdown value
                langToggleBtn.value = lang;

                // Translate all elements with data-translate-key
                document.querySelectorAll('[data-translate-key]').forEach(el => {
                    const key = el.dataset.translateKey;
                    if (translations[lang][key]) {
                        el.textContent = translations[lang][key];
                    }
                });

                // Translate all elements with data-translate-key-attr (for titles/aria-labels)
                document.querySelectorAll('[data-translate-key-attr]').forEach(el => {
                    const key = el.dataset.translateKey;
                    const attr = el.dataset.translateKeyAttr;
                    if (translations[lang][key]) {
                        el.setAttribute(attr, translations[lang][key]);
                    }
                });

                // Update the dynamic window title
                updateWindowTitle();
                // Update progress text/segments (depends on translations/currentLang)
                if (typeof updateProgress === 'function') updateProgress();
            }

            function cycleLanguage() {
                const currentLangIndex = languages.indexOf(currentLang);
                const nextLangIndex = (currentLangIndex + 1) % languages.length;
                const nextLang = languages[nextLangIndex];
                setLanguage(nextLang);
            }

            function initLang() {
                const savedLang = localStorage.getItem('lang');
                setLanguage(savedLang || 'en'); // Default to English
                // Set dropdown to current language
                langToggleBtn.value = currentLang;
            }

            langToggleBtn.addEventListener('change', (e) => {
                setLanguage(e.target.value);
            });

            // --- Initial Load ---
            initLang(); // Initialize language first
            initTheme();
            // Show welcome page by default
            showWelcomePage();

        });
    </script>

</body>

</html>